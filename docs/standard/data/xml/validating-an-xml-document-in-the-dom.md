---
title: Validation d'un document XML dans le DOM
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-standard
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
- cpp
ms.assetid: 2c61c920-d0f8-4c72-bfcc-6524570f3060
caps.latest.revision: 
author: mairaw
ms.author: mairaw
manager: wpickett
ms.workload:
- dotnet
- dotnetcore
ms.openlocfilehash: 716e9baca52e9f5b7f4f24821e50b6a16aef9136
ms.sourcegitcommit: e7f04439d78909229506b56935a1105a4149ff3d
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 12/23/2017
---
# <a name="validating-an-xml-document-in-the-dom"></a><span data-ttu-id="22112-102">Validation d'un document XML dans le DOM</span><span class="sxs-lookup"><span data-stu-id="22112-102">Validating an XML Document in the DOM</span></span>
<span data-ttu-id="22112-103">La classe <xref:System.Xml.XmlDocument> ne valide pas le XML dans le DOM (Document Object Model) par rapport à un schéma de langage XSD (XML Schema Definition) ou à une définition de type de document (DTD) par défaut ; il est seulement vérifié que le XML est correctement construit.</span><span class="sxs-lookup"><span data-stu-id="22112-103">The <xref:System.Xml.XmlDocument> class does not validate the XML in the Document Object Model (DOM) against an XML Schema definition language (XSD) schema or document type definition (DTD) by default; the XML is only verified to be well-formed.</span></span>  
  
 <span data-ttu-id="22112-104">Vous pouvez valider le XML lors de son chargement dans le DOM en transférant un objet <xref:System.Xml.XmlReader> de validation de schéma à la méthode <xref:System.Xml.XmlDocument.Load%2A> de la classe <xref:System.Xml.XmlDocument>, ou vous pouvez valider un document XML qui n'était pas validé dans le DOM à l'aide de la méthode <xref:System.Xml.XmlDocument.Validate%2A> de la classe <xref:System.Xml.XmlDocument>.</span><span class="sxs-lookup"><span data-stu-id="22112-104">To validate the XML in the DOM, you can validate the XML as it is loaded into the DOM by passing a schema-validating <xref:System.Xml.XmlReader> to the <xref:System.Xml.XmlDocument.Load%2A> method of the <xref:System.Xml.XmlDocument> class, or validate a previously unvalidated XML document in the DOM using the <xref:System.Xml.XmlDocument.Validate%2A> method of the <xref:System.Xml.XmlDocument> class.</span></span>  
  
## <a name="validating-an-xml-document-as-it-is-loaded-into-the-dom"></a><span data-ttu-id="22112-105">Validation d'un document XML lors de son chargement dans le DOM</span><span class="sxs-lookup"><span data-stu-id="22112-105">Validating an XML Document As It Is Loaded into the DOM</span></span>  
 <span data-ttu-id="22112-106">La classe <xref:System.Xml.XmlDocument> valide les données XML lors de leur chargement dans le DOM lorsqu'un objet <xref:System.Xml.XmlReader> de validation est transféré à la méthode <xref:System.Xml.XmlDocument.Load%2A> de la classe <xref:System.Xml.XmlDocument>.</span><span class="sxs-lookup"><span data-stu-id="22112-106">The <xref:System.Xml.XmlDocument> class validates the XML data as it is loaded into the DOM when a validating <xref:System.Xml.XmlReader> is passed to the <xref:System.Xml.XmlDocument.Load%2A> method of the <xref:System.Xml.XmlDocument> class.</span></span>  
  
 <span data-ttu-id="22112-107">Après une validation réussie, les valeurs par défaut du schéma sont appliquées, les valeurs texte sont converties au besoin en valeurs atomiques et les informations sur le type sont associées aux éléments d’information validés.</span><span class="sxs-lookup"><span data-stu-id="22112-107">After successful validation, schema defaults are applied, text values are converted to atomic values as necessary, and type information is associated with validated information items.</span></span> <span data-ttu-id="22112-108">Par conséquent, les données XML typées remplacent les données XML qui ne l'étaient pas.</span><span class="sxs-lookup"><span data-stu-id="22112-108">As a result, typed XML data replaces previously untyped XML data.</span></span>  
  
### <a name="creating-an-xml-schema-validating-xmlreader"></a><span data-ttu-id="22112-109">Création d'un XmlReader de validation de schéma XML</span><span class="sxs-lookup"><span data-stu-id="22112-109">Creating an XML Schema-Validating XmlReader</span></span>  
 <span data-ttu-id="22112-110">Pour créer un objet <xref:System.Xml.XmlReader> de validation de schéma XML, procédez comme suit.</span><span class="sxs-lookup"><span data-stu-id="22112-110">To create an XML schema-validating <xref:System.Xml.XmlReader>, follow these steps.</span></span>  
  
1.  <span data-ttu-id="22112-111">Construisez une nouvelle instance de l'objet <xref:System.Xml.XmlReaderSettings>.</span><span class="sxs-lookup"><span data-stu-id="22112-111">Construct a new <xref:System.Xml.XmlReaderSettings> instance.</span></span>  
  
2.  <span data-ttu-id="22112-112">Ajoutez un schéma XML à la propriété <xref:System.Xml.XmlReaderSettings.Schemas%2A> de l'instance de l'objet <xref:System.Xml.XmlReaderSettings>.</span><span class="sxs-lookup"><span data-stu-id="22112-112">Add an XML schema to the <xref:System.Xml.XmlReaderSettings.Schemas%2A> property of the <xref:System.Xml.XmlReaderSettings> instance.</span></span>  
  
3.  <span data-ttu-id="22112-113">Spécifiez `Schema` en tant que propriété <xref:System.Xml.XmlReaderSettings.ValidationType%2A>.</span><span class="sxs-lookup"><span data-stu-id="22112-113">Specify `Schema` as the <xref:System.Xml.XmlReaderSettings.ValidationType%2A>.</span></span>  
  
4.  <span data-ttu-id="22112-114">Vous pouvez aussi spécifier la propriété <xref:System.Xml.XmlReaderSettings.ValidationFlags%2A> et <xref:System.Xml.XmlReaderSettings.ValidationEventHandler> pour traiter les erreurs et les avertissements de validation de schéma détectés au cours de la validation.</span><span class="sxs-lookup"><span data-stu-id="22112-114">Optionally specify <xref:System.Xml.XmlReaderSettings.ValidationFlags%2A> and a <xref:System.Xml.XmlReaderSettings.ValidationEventHandler> to handle schema validation errors and warnings encountered during validation.</span></span>  
  
5.  <span data-ttu-id="22112-115">Transférez enfin l'objet <xref:System.Xml.XmlReaderSettings> à la méthode <xref:System.Xml.XmlReader.Create%2A> de la classe <xref:System.Xml.XmlReader> avec le document XML, créant ainsi un objet <xref:System.Xml.XmlReader> de validation de schéma.</span><span class="sxs-lookup"><span data-stu-id="22112-115">Finally, pass the <xref:System.Xml.XmlReaderSettings> object to the <xref:System.Xml.XmlReader.Create%2A> method of the <xref:System.Xml.XmlReader> class along with the XML document, creating a schema-validating <xref:System.Xml.XmlReader>.</span></span>  
  
### <a name="example"></a><span data-ttu-id="22112-116">Exemple</span><span class="sxs-lookup"><span data-stu-id="22112-116">Example</span></span>  
 <span data-ttu-id="22112-117">Dans l'exemple de code suivant, un objet <xref:System.Xml.XmlReader> de validation de schéma valide les données XML chargées dans le DOM.</span><span class="sxs-lookup"><span data-stu-id="22112-117">In the code example that follows, a schema-validating <xref:System.Xml.XmlReader> validates the XML data loaded into the DOM.</span></span> <span data-ttu-id="22112-118">Des modifications non valides sont apportées au document XML, puis le document est revalidé, entraînant des erreurs de validation de schéma.</span><span class="sxs-lookup"><span data-stu-id="22112-118">Invalid modifications are made to the XML document and the document is then revalidated, causing schema validation errors.</span></span> <span data-ttu-id="22112-119">Une des erreurs est finalement corrigée et une partie du document XML est ensuite partiellement validée.</span><span class="sxs-lookup"><span data-stu-id="22112-119">Finally, one of the errors is corrected, and then part of the XML document is partially validated.</span></span>  
  
 [!code-cpp[XmlDocumentValidation.Load#1](../../../../samples/snippets/cpp/VS_Snippets_Data/XmlDocumentValidation.Load/CPP/XmlDocumentValidationExample.cpp#1)]
 [!code-csharp[XmlDocumentValidation.Load#1](../../../../samples/snippets/csharp/VS_Snippets_Data/XmlDocumentValidation.Load/CS/XmlDocumentValidationExample.cs#1)]
 [!code-vb[XmlDocumentValidation.Load#1](../../../../samples/snippets/visualbasic/VS_Snippets_Data/XmlDocumentValidation.Load/VB/XmlDocumentValidationExample.vb#1)]  
  
 <span data-ttu-id="22112-120">L'exemple prend le fichier `contosoBooks.xml` comme entrée.</span><span class="sxs-lookup"><span data-stu-id="22112-120">The example takes the `contosoBooks.xml` file as input.</span></span>  
  
 [!code-xml[XPathXMLExamples#2](../../../../samples/snippets/xml/VS_Snippets_Data/XPathXMLExamples/XML/contosoBooks.xml#2)]  
  
 <span data-ttu-id="22112-121">L'exemple prend également le fichier `contosoBooks.xsd` comme entrée.</span><span class="sxs-lookup"><span data-stu-id="22112-121">The example also takes the `contosoBooks.xsd` file as input.</span></span>  
  
 [!code-xml[XPathXMLExamples#3](../../../../samples/snippets/xml/VS_Snippets_Data/XPathXMLExamples/XML/contosoBooks.xsd#3)]  
  
 <span data-ttu-id="22112-122">Tenez compte des éléments suivants lors de la validation des données XML lors de leur chargement dans le DOM.</span><span class="sxs-lookup"><span data-stu-id="22112-122">Consider the following when validating XML data as it is loaded into the DOM.</span></span>  
  
-   <span data-ttu-id="22112-123">Dans l'exemple ci-dessus, l'événement <xref:System.Xml.XmlReaderSettings.ValidationEventHandler> est appelé chaque fois qu'un type non valide est rencontré.</span><span class="sxs-lookup"><span data-stu-id="22112-123">In the above example, the <xref:System.Xml.XmlReaderSettings.ValidationEventHandler> is called whenever an invalid type is encountered.</span></span> <span data-ttu-id="22112-124">Si aucun événement <xref:System.Xml.XmlReaderSettings.ValidationEventHandler> n'est défini sur l'objet <xref:System.Xml.XmlReader> de validation, une exception <xref:System.Xml.Schema.XmlSchemaValidationException> est levée quand <xref:System.Xml.XmlDocument.Load%2A> est appelé si un type d'attribut ou d'élément ne correspond pas au type spécifié dans le schéma de validation.</span><span class="sxs-lookup"><span data-stu-id="22112-124">If a <xref:System.Xml.XmlReaderSettings.ValidationEventHandler> is not set on the validating <xref:System.Xml.XmlReader>,an <xref:System.Xml.Schema.XmlSchemaValidationException> is thrown when <xref:System.Xml.XmlDocument.Load%2A> is called if any attribute or element type does not match the corresponding type specified in the validating schema.</span></span>  
  
-   <span data-ttu-id="22112-125">Lorsqu'un document XML est chargé dans un objet <xref:System.Xml.XmlDocument> avec un schéma associé qui définit les valeurs par défaut, l'objet <xref:System.Xml.XmlDocument> traite ces valeurs par défaut comme si elles apparaissaient dans le document XML.</span><span class="sxs-lookup"><span data-stu-id="22112-125">When an XML document is loaded into an <xref:System.Xml.XmlDocument> object with an associated schema that defines default values, the <xref:System.Xml.XmlDocument> treats these defaults as if they appeared in the XML document.</span></span> <span data-ttu-id="22112-126">Cela signifie que la propriété <xref:System.Xml.XmlReader.IsEmptyElement%2A> retourne toujours `false` pour un élément associé au schéma.</span><span class="sxs-lookup"><span data-stu-id="22112-126">This means that the <xref:System.Xml.XmlReader.IsEmptyElement%2A> property always returns `false` for an element that was defaulted from the schema.</span></span> <span data-ttu-id="22112-127">Même s'il se trouvait dans le document XML, il était écrit comme un élément vide.</span><span class="sxs-lookup"><span data-stu-id="22112-127">Even if in the XML document, it was written as an empty element.</span></span>  
  
## <a name="validating-an-xml-document-in-the-dom"></a><span data-ttu-id="22112-128">Validation d'un document XML dans le DOM</span><span class="sxs-lookup"><span data-stu-id="22112-128">Validating an XML Document in the DOM</span></span>  
 <span data-ttu-id="22112-129">La méthode <xref:System.Xml.XmlDocument.Validate%2A> de la classe <xref:System.Xml.XmlDocument> valide les données XML chargées dans le DOM par rapport aux schémas de la propriété <xref:System.Xml.XmlDocument>de l'objet <xref:System.Xml.XmlDocument.Schemas%2A>.</span><span class="sxs-lookup"><span data-stu-id="22112-129">The <xref:System.Xml.XmlDocument.Validate%2A> method of the <xref:System.Xml.XmlDocument> class validates the XML data loaded in the DOM against the schemas in the <xref:System.Xml.XmlDocument> object's <xref:System.Xml.XmlDocument.Schemas%2A> property.</span></span> <span data-ttu-id="22112-130">Après une validation réussie, les valeurs par défaut du schéma sont appliquées, les valeurs texte sont converties au besoin en valeurs atomiques et les informations sur le type sont associées aux éléments d'information validés.</span><span class="sxs-lookup"><span data-stu-id="22112-130">After successful validation, schema defaults are applied, text values are converted to atomic values as necessary, and type information is associated with validated information items.</span></span> <span data-ttu-id="22112-131">Par conséquent, les données XML typées remplacent les données XML qui ne l'étaient pas.</span><span class="sxs-lookup"><span data-stu-id="22112-131">As a result, typed XML data replaces previously untyped XML data.</span></span>  
  
 <span data-ttu-id="22112-132">L'exemple ci-dessous est similaire à celui se trouvant dans la section « Validation d'un document XML lors de son chargement dans le DOM » ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="22112-132">The example below is similar to the example in "Validating an XML Document As It Is Loaded into the DOM" above.</span></span> <span data-ttu-id="22112-133">Dans cet exemple, le document XML n'est pas validé lors de son chargement dans le DOM, mais bien après qu'il a été chargé dans le DOM à l'aide de la méthode <xref:System.Xml.XmlDocument.Validate%2A> de la classe <xref:System.Xml.XmlDocument>.</span><span class="sxs-lookup"><span data-stu-id="22112-133">In this example, the XML document is not validated as it is loaded into the DOM, but rather is validated after it has been loaded into the DOM using the <xref:System.Xml.XmlDocument.Validate%2A> method of the <xref:System.Xml.XmlDocument> class.</span></span> <span data-ttu-id="22112-134">La méthode <xref:System.Xml.XmlDocument.Validate%2A> valide le document XML par rapport aux schémas XML contenus dans la propriété <xref:System.Xml.XmlDocument.Schemas%2A> de l'objet <xref:System.Xml.XmlDocument>.</span><span class="sxs-lookup"><span data-stu-id="22112-134">The <xref:System.Xml.XmlDocument.Validate%2A> method validates the XML document against the XML schemas contained in the <xref:System.Xml.XmlDocument.Schemas%2A> property of the <xref:System.Xml.XmlDocument>.</span></span> <span data-ttu-id="22112-135">Des modifications non valides sont alors apportées au document XML, puis le document est revalidé, entraînant des erreurs de validation de schéma.</span><span class="sxs-lookup"><span data-stu-id="22112-135">Invalid modifications are then made to the XML document, and the document is then revalidated, causing schema validation errors.</span></span> <span data-ttu-id="22112-136">Une des erreurs est finalement corrigée et une partie du document XML est ensuite partiellement validée.</span><span class="sxs-lookup"><span data-stu-id="22112-136">Finally, one of the errors is corrected, and then part of the XML document is partially validated.</span></span>  
  
 [!code-csharp[XmlDocumentValidation.Validate#1](../../../../samples/snippets/csharp/VS_Snippets_Data/XmlDocumentValidation.Validate/CS/XmlDocumentValidationExample.cs#1)]
 [!code-vb[XmlDocumentValidation.Validate#1](../../../../samples/snippets/visualbasic/VS_Snippets_Data/XmlDocumentValidation.Validate/VB/XmlDocumentValidationExample.vb#1)]  
  
 <span data-ttu-id="22112-137">L'exemple prend comme entrée les fichiers `contosoBooks.xml` et `contosoBooks.xsd` dont il est fait référence dans la section « Validation d'un document XML lors de son chargement dans le DOM » ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="22112-137">The example takes as input the `contosoBooks.xml` and `contosoBooks.xsd` files referred to in "Validating an XML Document as it is Loaded into the DOM" above.</span></span>  
  
## <a name="handling-validation-errors-and-warnings"></a><span data-ttu-id="22112-138">Traitement des erreurs et avertissements de validation</span><span class="sxs-lookup"><span data-stu-id="22112-138">Handling Validation Errors and Warnings</span></span>  
 <span data-ttu-id="22112-139">Les erreurs de validation de schéma XML sont signalées lors de la validation des données XML chargées dans le DOM.</span><span class="sxs-lookup"><span data-stu-id="22112-139">XML schema validation errors are reported when validating XML data loaded in the DOM.</span></span> <span data-ttu-id="22112-140">Vous êtes notifié de toutes les erreurs de validation de schéma détectées lors de la validation des données XML en cours de chargement, ou lors de la validation d’un document XML qui n’était pas validé.</span><span class="sxs-lookup"><span data-stu-id="22112-140">You are notified about all schema validation errors found while validating the XML data as it is being loaded, or when validating a previously unvalidated XML document.</span></span>  
  
 <span data-ttu-id="22112-141">Les erreurs de validation sont traitées par l'objet <xref:System.Xml.Schema.ValidationEventHandler>.</span><span class="sxs-lookup"><span data-stu-id="22112-141">Validation errors are handled by the <xref:System.Xml.Schema.ValidationEventHandler>.</span></span> <span data-ttu-id="22112-142">Si un objet <xref:System.Xml.Schema.ValidationEventHandler> a été assigné à l'instance de l'objet <xref:System.Xml.XmlReaderSettings> ou transféré à la méthode <xref:System.Xml.XmlDocument.Validate%2A> de la classe <xref:System.Xml.XmlDocument>, l'objet <xref:System.Xml.Schema.ValidationEventHandler> traitera les erreurs de validation de schéma ; sinon, un objet <xref:System.Xml.Schema.XmlSchemaValidationException> est levé lorsqu'une erreur de validation de schéma est détectée.</span><span class="sxs-lookup"><span data-stu-id="22112-142">If a <xref:System.Xml.Schema.ValidationEventHandler> was assigned to the <xref:System.Xml.XmlReaderSettings> instance, or passed to the <xref:System.Xml.XmlDocument.Validate%2A> method of the <xref:System.Xml.XmlDocument> class, the <xref:System.Xml.Schema.ValidationEventHandler> will handle schema validation errors; otherwise an <xref:System.Xml.Schema.XmlSchemaValidationException> is raised when a schema validation error is encountered.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="22112-143">Les données XML sont chargées dans le DOM malgré des erreurs de validation de schéma à moins que votre objet <xref:System.Xml.Schema.ValidationEventHandler> soulève une exception afin d'arrêter le processus.</span><span class="sxs-lookup"><span data-stu-id="22112-143">The XML data is loaded into the DOM despite schema validation errors unless your <xref:System.Xml.Schema.ValidationEventHandler> raises an exception to stop the process.</span></span>  
>   
>  <span data-ttu-id="22112-144">Les avertissements de validation de schéma ne sont pas signalés à moins que l'indicateur <xref:System.Xml.Schema.XmlSchemaValidationFlags.ReportValidationWarnings> ne soit spécifié à l'objet <xref:System.Xml.XmlReaderSettings>.</span><span class="sxs-lookup"><span data-stu-id="22112-144">Schema validation warnings are not reported unless the <xref:System.Xml.Schema.XmlSchemaValidationFlags.ReportValidationWarnings> flag is specified to the <xref:System.Xml.XmlReaderSettings> object.</span></span>  
  
 <span data-ttu-id="22112-145">Pour obtenir des exemples illustrant l'objet <xref:System.Xml.Schema.ValidationEventHandler>, consultez les sections « Validation d'un document XML lors de son chargement dans le DOM » et « Validation d'un document XML dans le DOM » ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="22112-145">For examples illustrating the <xref:System.Xml.Schema.ValidationEventHandler>, see "Validating an XML Document As It Is Loaded into the DOM" and "Validating an XML Document in the DOM" above.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="22112-146">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="22112-146">See Also</span></span>  
 <xref:System.Xml.XmlDocument>  
 <xref:System.Xml.XmlReader>  
 <xref:System.Xml.Schema.ValidationEventHandler>  
 <xref:System.Xml.XmlReaderSettings>  
 [<span data-ttu-id="22112-147">Traitement de données XML à l’aide du modèle DOM</span><span class="sxs-lookup"><span data-stu-id="22112-147">Process XML Data Using the DOM Model</span></span>](../../../../docs/standard/data/xml/process-xml-data-using-the-dom-model.md)  
 [<span data-ttu-id="22112-148">Utilisation de schémas XML</span><span class="sxs-lookup"><span data-stu-id="22112-148">Working with XML Schemas</span></span>](../../../../docs/standard/data/xml/working-with-xml-schemas.md)
