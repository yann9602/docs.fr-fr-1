---
title: "Portée et visibilité de la définition de l'activité"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: ccdffa07-9503-4eea-a61b-17f1564368b7
caps.latest.revision: "3"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: bb1b48bf06d024183a22027cb12dbca78f272085
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 12/22/2017
---
# <a name="activity-definition-scoping-and-visibility"></a><span data-ttu-id="cfd79-102">Portée et visibilité de la définition de l'activité</span><span class="sxs-lookup"><span data-stu-id="cfd79-102">Activity Definition Scoping and Visibility</span></span>
<span data-ttu-id="cfd79-103">La portée et la visibilité de la définition d'une activité, tout comme la portée et la visibilité d'un objet représentent la capacité d'autres objets d'accéder aux membres de l'activité.</span><span class="sxs-lookup"><span data-stu-id="cfd79-103">Activity definition scoping and visibility, just like scoping and visibility of an object, is the ability of other objects or activities to access members of the activity.</span></span> <span data-ttu-id="cfd79-104">La définition de l'activité est assurée par les implémentations suivantes :</span><span class="sxs-lookup"><span data-stu-id="cfd79-104">Activity definition is performed by the following implementations:</span></span>  
  
1.  <span data-ttu-id="cfd79-105">Détermination des membres (objets <xref:System.Activities.Argument>, <xref:System.Activities.Variable> et <xref:System.Activities.ActivityDelegate>, et activités enfants) qu'une activité expose aux utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="cfd79-105">Determining the members (<xref:System.Activities.Argument>, <xref:System.Activities.Variable>, and <xref:System.Activities.ActivityDelegate> objects, and child activities) an activity exposes to its users.</span></span>  
  
2.  <span data-ttu-id="cfd79-106">Implémentation de la logique d'exécution de l'activité</span><span class="sxs-lookup"><span data-stu-id="cfd79-106">Implementing the execution logic of the activity</span></span>  
  
 <span data-ttu-id="cfd79-107">L'implémentation peut impliquer des membres qui ne sont pas exposés aux consommateurs de l'activité, mais qui sont des détails de l'implémentation.</span><span class="sxs-lookup"><span data-stu-id="cfd79-107">The implementation may involve members that are not exposed to consumers of the activity, but are rather details of the implementation.</span></span>  <span data-ttu-id="cfd79-108">Semblalble à la définition de type, le modèle d'activité permet à un auteur de qualifier la visibilité d'un membre d'activité concernant la définition de l'activité définie.</span><span class="sxs-lookup"><span data-stu-id="cfd79-108">Similar to type definition, the activity model allows an author to qualify the visibility of an activity member regarding the definition of the activity being defined.</span></span>  <span data-ttu-id="cfd79-109">La visibilité définit les aspects de l'utilisation de membre, notamment la portée des données.</span><span class="sxs-lookup"><span data-stu-id="cfd79-109">This visibility governs aspects of member usage, such as data scoping.</span></span>  
  
## <a name="scope"></a><span data-ttu-id="cfd79-110">Portée</span><span class="sxs-lookup"><span data-stu-id="cfd79-110">Scope</span></span>  
 <span data-ttu-id="cfd79-111">Outre la portée des données, la visibilité du modèle d'activité peut limiter l'accès à d'autres aspects de l'activité, tels que la validation, le débogage, le suivi ou le traçage.</span><span class="sxs-lookup"><span data-stu-id="cfd79-111">In addition to data scoping, activity model visibility can restrict access to other aspects of the activity, such as validation, debugging, tracking, or tracing.</span></span> <span data-ttu-id="cfd79-112">Les propriétés d'exécution utilisent la visibilité et la portée pour contraindre les caractéristiques d'exécution à une portée spécifique de définition.</span><span class="sxs-lookup"><span data-stu-id="cfd79-112">Execution properties use visibility and scoping for constraining execution characteristics to a particular scope of definition.</span></span> <span data-ttu-id="cfd79-113">Les racines secondaires utilisent la visibilité et la portée pour contraindre l'état capturé par un <xref:System.Activities.Statements.CompensableActivity> à la portée de la définition dans laquelle les activités compensables sont utilisées.</span><span class="sxs-lookup"><span data-stu-id="cfd79-113">Secondary roots use visibility and scoping to constrain the state captured by a <xref:System.Activities.Statements.CompensableActivity> to the scope of definition in which the compensable activities are used.</span></span>  
  
## <a name="definition-and-usage"></a><span data-ttu-id="cfd79-114">Définition et utilisation</span><span class="sxs-lookup"><span data-stu-id="cfd79-114">Definition and usage</span></span>  
 <span data-ttu-id="cfd79-115">Un flux de travail est écrit en créant de nouvelles activités en héritant de classes de l’activité de base et à l’aide des activités à partir de la [bibliothèque d’activités intégrée](../../../docs/framework/windows-workflow-foundation/net-framework-4-5-built-in-activity-library.md).</span><span class="sxs-lookup"><span data-stu-id="cfd79-115">A workflow is written by authoring new activities by inheriting from base activity classes, and by using activities from the [Built-In Activity Library](../../../docs/framework/windows-workflow-foundation/net-framework-4-5-built-in-activity-library.md).</span></span> <span data-ttu-id="cfd79-116">Pour utiliser une activité, l'auteur de l'activité doit configurer la visibilité de chaque composant de sa définition.</span><span class="sxs-lookup"><span data-stu-id="cfd79-116">In order to use an activity, the activity author must configure the visibility of each component of its definition.</span></span>  
  
### <a name="activity-members"></a><span data-ttu-id="cfd79-117">Membres d'activité</span><span class="sxs-lookup"><span data-stu-id="cfd79-117">Activity Members</span></span>  
 <span data-ttu-id="cfd79-118">Le modèle d'activité définit les arguments, les variables, les délégués et les activités enfants que l'activité rend disponible aux consommateurs.</span><span class="sxs-lookup"><span data-stu-id="cfd79-118">The activity model defines the arguments, variables, delegates, and child activities that the activity makes available to consumers.</span></span> <span data-ttu-id="cfd79-119">Chacun de ces membres peut être déclaré `public` ou `private`.</span><span class="sxs-lookup"><span data-stu-id="cfd79-119">Each of these members can be declared as `public` or `private`.</span></span> <span data-ttu-id="cfd79-120">Les membres publics sont configurés par le consommateur de l'activité, alors que les membres `private` utilisent une implémentation corrigée par l'auteur de l'activité.</span><span class="sxs-lookup"><span data-stu-id="cfd79-120">Public members are configured by the consumer of the activity, whereas `private` members use an implementation fixed by the author of the activity.</span></span> <span data-ttu-id="cfd79-121">Les règles de visibilité applicables à la portée des données sont les suivantes :</span><span class="sxs-lookup"><span data-stu-id="cfd79-121">The visibility rules for data scoping are as follows:</span></span>  
  
1.  <span data-ttu-id="cfd79-122">Les membres publics et les membres publics d'activités enfants publiques peuvent référencer des variables publiques.</span><span class="sxs-lookup"><span data-stu-id="cfd79-122">Public members and the public members of public child activities can reference public variables.</span></span>  
  
2.  <span data-ttu-id="cfd79-123">Les membres privés et les membres publics d'activités enfants publiques peuvent référencer des arguments et des variables privées.</span><span class="sxs-lookup"><span data-stu-id="cfd79-123">Private members and the public members of public child activities can reference arguments and private variables.</span></span>  
  
 <span data-ttu-id="cfd79-124">Un membre pouvant être défini par le consommateur d'une activité ne doit jamais être rendu privé.</span><span class="sxs-lookup"><span data-stu-id="cfd79-124">A member that can be set by the consumer of an activity should never be made private.</span></span>  
  
### <a name="authoring-models"></a><span data-ttu-id="cfd79-125">Création de modèles</span><span class="sxs-lookup"><span data-stu-id="cfd79-125">Authoring Models</span></span>  
 <span data-ttu-id="cfd79-126">Les activités personnalisées sont définies à l'aide de <xref:System.Activities.NativeActivity>, <xref:System.Activities.Activity>, <xref:System.Activities.CodeActivity> ou <xref:System.Activities.AsyncCodeActivity>.</span><span class="sxs-lookup"><span data-stu-id="cfd79-126">Custom activities are defined by using <xref:System.Activities.NativeActivity>, <xref:System.Activities.Activity>, <xref:System.Activities.CodeActivity>, or <xref:System.Activities.AsyncCodeActivity>.</span></span> <span data-ttu-id="cfd79-127">Les activités dérivées de ces classes peuvent exposer des types de membres différents avec différentes visibilités.</span><span class="sxs-lookup"><span data-stu-id="cfd79-127">Activities that derive from these classes can expose different member types with different visibilities.</span></span>  
  
#### <a name="nativeactivity"></a><span data-ttu-id="cfd79-128">NativeActivity</span><span class="sxs-lookup"><span data-stu-id="cfd79-128">NativeActivity</span></span>  
 <span data-ttu-id="cfd79-129">Les activités dérivant de <xref:System.Activities.NativeActivity> ont un comportement qui est écrit dans le code impératif, et peuvent éventuellement être définies à l'aide d'activités existantes.</span><span class="sxs-lookup"><span data-stu-id="cfd79-129">Activities that derive from <xref:System.Activities.NativeActivity> have behavior that is written in imperative code, and can optionally be defined by using existing activities.</span></span> <span data-ttu-id="cfd79-130">La dérivation des activités de <xref:System.Activities.NativeActivity> accorde l'accès à l'ensemble des fonctionnalités exposées par le runtime.</span><span class="sxs-lookup"><span data-stu-id="cfd79-130">Deriving activities from <xref:System.Activities.NativeActivity> grants access to all of the features exposed by the runtime.</span></span> <span data-ttu-id="cfd79-131">Tout membre d'une telle activité peut être défini à l'aide de la visibilité publique ou privée, à l'exception des arguments, qui peuvent uniquement être déclarés `public`.</span><span class="sxs-lookup"><span data-stu-id="cfd79-131">Any member of such an activity can be defined by using either public or private visibility, except arguments, which can only be declared as `public`.</span></span>  
  
 <span data-ttu-id="cfd79-132">Les membres de classes dérivées de <xref:System.Activities.NativeActivity> sont déclarés au runtime à l'aide du struct <xref:System.Activities.NativeActivityMetadata> passé à la méthode <xref:System.Activities.NativeActivity.CacheMetadata%2A>.</span><span class="sxs-lookup"><span data-stu-id="cfd79-132">Members of classes derived from <xref:System.Activities.NativeActivity> are declared to the runtime using the <xref:System.Activities.NativeActivityMetadata> struct passed to the <xref:System.Activities.NativeActivity.CacheMetadata%2A> method.</span></span>  
  
#### <a name="activity"></a><span data-ttu-id="cfd79-133">Activité</span><span class="sxs-lookup"><span data-stu-id="cfd79-133">Activity</span></span>  
 <span data-ttu-id="cfd79-134">Les activités créées à l'aide de <xref:System.Activities.Activity> ont un comportement qui est conçu strictement via la composition d'autres activités.</span><span class="sxs-lookup"><span data-stu-id="cfd79-134">Activities created by using <xref:System.Activities.Activity> have behavior that is designed strictly through composing other activities.</span></span> <span data-ttu-id="cfd79-135">La classe <xref:System.Activities.Activity> a une implémentation de l'activité enfant, obtenue par le runtime à l'aide de <xref:System.Activities.Activity.Implementation%2A>.</span><span class="sxs-lookup"><span data-stu-id="cfd79-135">The <xref:System.Activities.Activity> class has one implementation child activity, obtained by the runtime using <xref:System.Activities.Activity.Implementation%2A>.</span></span> <span data-ttu-id="cfd79-136">Une activité dérivant de <xref:System.Activities.Activity> peut définir des arguments publics, des variables publiques, des ActivityDelegates et des activités importés.</span><span class="sxs-lookup"><span data-stu-id="cfd79-136">An activity deriving from <xref:System.Activities.Activity> can define public arguments, public variables, imported ActivityDelegates, and imported Activities.</span></span>  
  
 <span data-ttu-id="cfd79-137">Les ActivityDelegates et les activités importés sont déclarés en tant qu'enfants publics de l'activité, mais ne peuvent pas être planifiés directement par l'activité.</span><span class="sxs-lookup"><span data-stu-id="cfd79-137">Imported ActivityDelegates and Activities are declared as public children of the activity, but cannot be directly scheduled by the activity.</span></span> <span data-ttu-id="cfd79-138">Ces informations sont utilisées lors de la validation pour éviter d'exécuter des validations de parents dans des emplacements où l'activité ne sera jamais exécutée.</span><span class="sxs-lookup"><span data-stu-id="cfd79-138">This information is used during validation to avoid running parent-facing validations at locations where the activity will never execute.</span></span> <span data-ttu-id="cfd79-139">Les enfants importés, comme les enfants publics, peuvent être référencés et planifiés par l'implémentation de l'activité.</span><span class="sxs-lookup"><span data-stu-id="cfd79-139">Also, imported children, just like public children, can be referenced and scheduled by the activity’s implementation.</span></span> <span data-ttu-id="cfd79-140">Cela signifie qu'une activité qui importe une activité nommée Activity1 peut contenir un <xref:System.Activities.Statements.Sequence> dans son implémentation qui planifie Activity1.</span><span class="sxs-lookup"><span data-stu-id="cfd79-140">This means that an activity which imports an activity called Activity1 can contain a <xref:System.Activities.Statements.Sequence> in its implementation which schedules Activity1.</span></span>  
  
#### <a name="codeactivity-asynccodeactivity"></a><span data-ttu-id="cfd79-141">CodeActivity/AsyncCodeActivity</span><span class="sxs-lookup"><span data-stu-id="cfd79-141">CodeActivity/ AsyncCodeActivity</span></span>  
 <span data-ttu-id="cfd79-142">Cette classe de base est utilisée pour la création de comportement en code impératif.</span><span class="sxs-lookup"><span data-stu-id="cfd79-142">This base class is used for authoring behavior in imperative code.</span></span> <span data-ttu-id="cfd79-143">Les activités qui dérivent de cette classe ont uniquement accès aux arguments qu'elles exposent.</span><span class="sxs-lookup"><span data-stu-id="cfd79-143">Activities that derive from this class only have access to the arguments they expose.</span></span> <span data-ttu-id="cfd79-144">En d'autres termes, seuls les membres pouvant être exposés par ces activités sont des arguments publics.</span><span class="sxs-lookup"><span data-stu-id="cfd79-144">This means that the only members that these activities can expose are public arguments.</span></span> <span data-ttu-id="cfd79-145">Aucun autre membre ou visibilité ne s'applique à ces activités.</span><span class="sxs-lookup"><span data-stu-id="cfd79-145">No other members or visibilities apply to these activities.</span></span>  
  
#### <a name="summary-of-visibilities"></a><span data-ttu-id="cfd79-146">Résumé des visibilités</span><span class="sxs-lookup"><span data-stu-id="cfd79-146">Summary of visibilities</span></span>  
 <span data-ttu-id="cfd79-147">Le tableau suivant récapitule les informations de cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="cfd79-147">The following table summarizes the information earlier in this section.</span></span>  
  
|<span data-ttu-id="cfd79-148">Type de membre</span><span class="sxs-lookup"><span data-stu-id="cfd79-148">Member Type</span></span>|<span data-ttu-id="cfd79-149">NativeActivity</span><span class="sxs-lookup"><span data-stu-id="cfd79-149">NativeActivity</span></span>|<span data-ttu-id="cfd79-150">Activité</span><span class="sxs-lookup"><span data-stu-id="cfd79-150">Activity</span></span>|<span data-ttu-id="cfd79-151">CodeActivity/AsyncCodeActivity</span><span class="sxs-lookup"><span data-stu-id="cfd79-151">CodeActivity/ AsyncCodeActivity</span></span>|  
|-----------------|--------------------|--------------|--------------------------------------|  
|<span data-ttu-id="cfd79-152">Arguments</span><span class="sxs-lookup"><span data-stu-id="cfd79-152">Arguments</span></span>|<span data-ttu-id="cfd79-153">Public/ Private</span><span class="sxs-lookup"><span data-stu-id="cfd79-153">Public/ Private</span></span>|<span data-ttu-id="cfd79-154">Public</span><span class="sxs-lookup"><span data-stu-id="cfd79-154">Public</span></span>|<span data-ttu-id="cfd79-155">non applicable</span><span class="sxs-lookup"><span data-stu-id="cfd79-155">not applicable</span></span>|  
|<span data-ttu-id="cfd79-156">Variables</span><span class="sxs-lookup"><span data-stu-id="cfd79-156">Variables</span></span>|<span data-ttu-id="cfd79-157">Public/ Private</span><span class="sxs-lookup"><span data-stu-id="cfd79-157">Public/ Private</span></span>|<span data-ttu-id="cfd79-158">Public</span><span class="sxs-lookup"><span data-stu-id="cfd79-158">Public</span></span>|<span data-ttu-id="cfd79-159">non applicable</span><span class="sxs-lookup"><span data-stu-id="cfd79-159">not applicable</span></span>|  
|<span data-ttu-id="cfd79-160">Activités enfants</span><span class="sxs-lookup"><span data-stu-id="cfd79-160">Child Activities</span></span>|<span data-ttu-id="cfd79-161">Public/ Private</span><span class="sxs-lookup"><span data-stu-id="cfd79-161">Public/ Private</span></span>|<span data-ttu-id="cfd79-162">Public, un enfant privé corrigé défini dans l'implémentation.</span><span class="sxs-lookup"><span data-stu-id="cfd79-162">Public, one fixed private child defined in Implementation.</span></span>|<span data-ttu-id="cfd79-163">non applicable</span><span class="sxs-lookup"><span data-stu-id="cfd79-163">not applicable</span></span>|  
|<span data-ttu-id="cfd79-164">ActivityDelegates</span><span class="sxs-lookup"><span data-stu-id="cfd79-164">ActivityDelegates</span></span>|<span data-ttu-id="cfd79-165">Public/ Private</span><span class="sxs-lookup"><span data-stu-id="cfd79-165">Public/ Private</span></span>|<span data-ttu-id="cfd79-166">Public</span><span class="sxs-lookup"><span data-stu-id="cfd79-166">Public</span></span>|<span data-ttu-id="cfd79-167">non applicable</span><span class="sxs-lookup"><span data-stu-id="cfd79-167">not applicable</span></span>|  
  
 <span data-ttu-id="cfd79-168">En général, un membre ne pouvant pas être défini par le consomamteur d'une activité ne doit jamais être rendu public.</span><span class="sxs-lookup"><span data-stu-id="cfd79-168">In general, a member that cannot be set by the consumer of an activity should not be made public.</span></span>  
  
### <a name="execution-properties"></a><span data-ttu-id="cfd79-169">Propriétés d'exécution</span><span class="sxs-lookup"><span data-stu-id="cfd79-169">Execution Properties</span></span>  
 <span data-ttu-id="cfd79-170">Dans certains scénarios, il s'avère utile de définir la portée d'une propriété d'exécution spécifique aux enfants publics d'une activité.</span><span class="sxs-lookup"><span data-stu-id="cfd79-170">In some scenarios, it is useful to scope a particular execution property to the public children of an activity.</span></span> <span data-ttu-id="cfd79-171">La collection <xref:System.Activities.ExecutionProperties> offre cette possibilité avec la méthode <xref:System.Activities.ExecutionProperties.Add%2A>.</span><span class="sxs-lookup"><span data-stu-id="cfd79-171">The <xref:System.Activities.ExecutionProperties> collection provides this capability with the <xref:System.Activities.ExecutionProperties.Add%2A> method.</span></span> <span data-ttu-id="cfd79-172">Cette méthode a un paramètre Boolean indiquant si la portée d'une propriété spécifique est tous les enfants ou uniquement ceux qui sont publics.</span><span class="sxs-lookup"><span data-stu-id="cfd79-172">This method has a Boolean parameter indicating whether a particular property is scoped to all children, or just those that are public.</span></span> <span data-ttu-id="cfd79-173">Si ce paramètre a la valeur `true`, la propriété sera uniquement visible aux membres publics de leurs enfants publics.</span><span class="sxs-lookup"><span data-stu-id="cfd79-173">If this parameter is set to `true`, the property will only be visible to public members and the public members of their public children.</span></span>  
  
### <a name="secondary-roots"></a><span data-ttu-id="cfd79-174">Racines secondaires</span><span class="sxs-lookup"><span data-stu-id="cfd79-174">Secondary Roots</span></span>  
 <span data-ttu-id="cfd79-175">Une racine secondaire correspond au mécanisme interne de gestion de l'état des activités de compensation.</span><span class="sxs-lookup"><span data-stu-id="cfd79-175">A secondary root is the runtime’s internal mechanism for managing state for compensation activities.</span></span> <span data-ttu-id="cfd79-176">Lorsque l'exécution d'un <xref:System.Activities.Statements.CompensableActivity> est terminée, son état n'est pas nettoyé immédiatement.</span><span class="sxs-lookup"><span data-stu-id="cfd79-176">When a <xref:System.Activities.Statements.CompensableActivity> has finished running, its state is not cleaned up immediately.</span></span> <span data-ttu-id="cfd79-177">L'état est conservé par le runtime dans une racine secondaire jusqu'à ce que l'épisode de compensation soit terminé.</span><span class="sxs-lookup"><span data-stu-id="cfd79-177">Instead, the state is maintained by the runtime in a secondary root until the compensation episode has completed.</span></span> <span data-ttu-id="cfd79-178">Les environnements d'emplacement capturés avec la racine secondaire correspondent à la portée de la définition dans laquelle l'activité Compensable est utilisée.</span><span class="sxs-lookup"><span data-stu-id="cfd79-178">The location environments captured with the secondary root correspond to the scope of definition in which the Compensable activity is used.</span></span>
