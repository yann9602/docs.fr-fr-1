---
title: "Initialisation d'éléments objet ne figurant pas dans une arborescence d'objets"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-wpf
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords:
- logical tree [WPF]
- visual tree [WPF]
- elements [WPF], initializing
- initializing elements [WPF]
ms.assetid: 7b8dfc9b-46ac-4ce8-b7bb-035734d688b7
caps.latest.revision: "15"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: 1a2a4dd10b664dc349b0c413d7abac03280f8fb8
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/21/2017
---
# <a name="initialization-for-object-elements-not-in-an-object-tree"></a><span data-ttu-id="a9c6e-102">Initialisation d'éléments objet ne figurant pas dans une arborescence d'objets</span><span class="sxs-lookup"><span data-stu-id="a9c6e-102">Initialization for Object Elements Not in an Object Tree</span></span>
<span data-ttu-id="a9c6e-103">Certains aspects de l’initialisation [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] sont différés à des processus qui reposent généralement sur le fait que cet élément est connecté à l’arborescence logique ou à l’arborescence d’éléments visuels.</span><span class="sxs-lookup"><span data-stu-id="a9c6e-103">Some aspects of [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] initialization are deferred to processes that typically rely on that element being connected to either the logical tree or visual tree.</span></span> <span data-ttu-id="a9c6e-104">Cette rubrique décrit les étapes qui peuvent être nécessaires pour initialiser un élément qui n’est connecté à aucune de ces arborescences.</span><span class="sxs-lookup"><span data-stu-id="a9c6e-104">This topic describes the steps that may be necessary in order to initialize an element that is not connected to either tree.</span></span>  
  
 
  
## <a name="elements-and-the-logical-tree"></a><span data-ttu-id="a9c6e-105">Éléments et arborescence logique</span><span class="sxs-lookup"><span data-stu-id="a9c6e-105">Elements and the Logical Tree</span></span>  
 <span data-ttu-id="a9c6e-106">Quand vous créez une instance d’une classe [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] dans le code, vous devez savoir que plusieurs aspects de l’initialisation de l’objet pour une classe [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] ne font délibérément pas partie du code qui est exécuté lors de l’appel du constructeur de classe.</span><span class="sxs-lookup"><span data-stu-id="a9c6e-106">When you create an instance of a [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] class in code, you should be aware that several aspects of object initialization for a [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] class are deliberately not a part of the code that is executed when calling the class constructor.</span></span> <span data-ttu-id="a9c6e-107">En particulier pour une classe de contrôle, la majeure partie de la représentation visuelle de ce contrôle n’est pas définie par le constructeur.</span><span class="sxs-lookup"><span data-stu-id="a9c6e-107">Particularly for a control class, most of the visual representation of that control is not defined by the constructor.</span></span> <span data-ttu-id="a9c6e-108">Au lieu de cela, la représentation visuelle est définie par le modèle du contrôle.</span><span class="sxs-lookup"><span data-stu-id="a9c6e-108">Instead, the visual representation is defined by the control's template.</span></span> <span data-ttu-id="a9c6e-109">Le modèle peut provenir de diverses sources, mais le plus souvent il est obtenu à partir de styles de thème.</span><span class="sxs-lookup"><span data-stu-id="a9c6e-109">The template potentially comes from a variety of sources, but most often the template is obtained from theme styles.</span></span> <span data-ttu-id="a9c6e-110">Les modèles sont en fait à liaison tardive ; le modèle nécessaire n’est attaché au contrôle en question qu’une fois le contrôle prêt pour la disposition.</span><span class="sxs-lookup"><span data-stu-id="a9c6e-110">Templates are effectively late-binding; the necessary template is not attached to the control in question until the control is ready for layout.</span></span> <span data-ttu-id="a9c6e-111">Et le contrôle est prêt pour la disposition seulement une fois qu’il est attaché à une arborescence logique qui se connecte à une surface de rendu à la racine.</span><span class="sxs-lookup"><span data-stu-id="a9c6e-111">And the control is not ready for layout until it is attached to a logical tree that connects to a rendering surface at the root.</span></span> <span data-ttu-id="a9c6e-112">C’est cet élément de niveau racine qui démarre le rendu de tous ses éléments enfants tels que définis dans l’arborescence logique.</span><span class="sxs-lookup"><span data-stu-id="a9c6e-112">It is that root-level element that initiates the rendering of all of its child elements as defined in the logical tree.</span></span>  
  
 <span data-ttu-id="a9c6e-113">L’arborescence d’éléments visuels participe également à ce processus.</span><span class="sxs-lookup"><span data-stu-id="a9c6e-113">The visual tree also participates in this process.</span></span> <span data-ttu-id="a9c6e-114">De plus, les éléments qui font partie de l’arborescence d’éléments visuels par l’intermédiaire des modèles ne sont totalement instanciés que quand ils sont connectés.</span><span class="sxs-lookup"><span data-stu-id="a9c6e-114">Elements that are part of the visual tree through the templates are also not fully instantiated until connected.</span></span>  
  
 <span data-ttu-id="a9c6e-115">Les conséquences de ce comportement sont que certaines opérations qui reposent sur l’achèvement des caractéristiques visuelles d’un élément nécessitent des étapes supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="a9c6e-115">The consequences of this behavior are that certain operations that rely on the completed visual characteristics of an element require additional steps.</span></span> <span data-ttu-id="a9c6e-116">(par exemple si vous essayez d’obtenir les caractéristiques visuelles d’une classe qui a été construite mais pas encore attachée à une arborescence).</span><span class="sxs-lookup"><span data-stu-id="a9c6e-116">An example is if you are attempting to get the visual characteristics of a class that was constructed but not yet attached to a tree.</span></span> <span data-ttu-id="a9c6e-117">Par exemple, si vous souhaitez appeler <xref:System.Windows.Media.Imaging.RenderTargetBitmap.Render%2A> sur un <xref:System.Windows.Media.Imaging.RenderTargetBitmap> et l’élément visuel que vous passez est un élément non connecté à une arborescence, cet élément n’est pas terminé visuellement jusqu'à ce que vous devez effectuer les étapes d’initialisation supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="a9c6e-117">For instance, if you want to call <xref:System.Windows.Media.Imaging.RenderTargetBitmap.Render%2A> on a <xref:System.Windows.Media.Imaging.RenderTargetBitmap> and the visual you are passing is an element not connected to a tree, that element is not visually complete until additional initialization steps are completed.</span></span>  
  
### <a name="using-begininit-and-endinit-to-initialize-the-element"></a><span data-ttu-id="a9c6e-118">Utilisation de BeginInit et EndInit pour initialiser l’élément</span><span class="sxs-lookup"><span data-stu-id="a9c6e-118">Using BeginInit and EndInit to Initialize the Element</span></span>  
 <span data-ttu-id="a9c6e-119">Différentes classes dans [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] implémenter la <xref:System.ComponentModel.ISupportInitialize> interface.</span><span class="sxs-lookup"><span data-stu-id="a9c6e-119">Various classes in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] implement the <xref:System.ComponentModel.ISupportInitialize> interface.</span></span> <span data-ttu-id="a9c6e-120">Vous utilisez la <xref:System.ComponentModel.ISupportInitialize.BeginInit%2A> et <xref:System.ComponentModel.ISupportInitialize.EndInit%2A> les méthodes de l’interface pour désigner une région de votre code qui contient les étapes d’initialisation (telles que la définition de propriété valeurs affectant le rendu).</span><span class="sxs-lookup"><span data-stu-id="a9c6e-120">You use the <xref:System.ComponentModel.ISupportInitialize.BeginInit%2A> and <xref:System.ComponentModel.ISupportInitialize.EndInit%2A> methods of the interface to denote a region in your code that contains initialization steps (such as setting property values that affect rendering).</span></span> <span data-ttu-id="a9c6e-121">Après avoir <xref:System.ComponentModel.ISupportInitialize.EndInit%2A> est appelée dans la séquence, le système de disposition peut traiter l’élément et commencer à rechercher un style implicite.</span><span class="sxs-lookup"><span data-stu-id="a9c6e-121">After <xref:System.ComponentModel.ISupportInitialize.EndInit%2A> is called in the sequence, the layout system can process the element and start looking for an implicit style.</span></span>  
  
 <span data-ttu-id="a9c6e-122">Si l’élément de définition des propriétés sur un <xref:System.Windows.FrameworkElement> ou <xref:System.Windows.FrameworkContentElement> classe dérivée, vous pouvez appeler les versions de la classe de <xref:System.Windows.FrameworkElement.BeginInit%2A> et <xref:System.Windows.FrameworkElement.EndInit%2A> au lieu d’effectuer un cast en <xref:System.ComponentModel.ISupportInitialize>.</span><span class="sxs-lookup"><span data-stu-id="a9c6e-122">If the element you are setting properties on is a <xref:System.Windows.FrameworkElement> or <xref:System.Windows.FrameworkContentElement> derived class, then you can call the class versions of <xref:System.Windows.FrameworkElement.BeginInit%2A> and <xref:System.Windows.FrameworkElement.EndInit%2A> rather than casting to <xref:System.ComponentModel.ISupportInitialize>.</span></span>  
  
### <a name="sample-code"></a><span data-ttu-id="a9c6e-123">Exemple de code</span><span class="sxs-lookup"><span data-stu-id="a9c6e-123">Sample Code</span></span>  
 <span data-ttu-id="a9c6e-124">L’exemple suivant est l’exemple de code pour une application console qui utilise le rendu [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] et <xref:System.Windows.Markup.XamlReader.Load%28System.IO.Stream%29?displayProperty=nameWithType> de libre [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] fichier pour illustrer le positionnement correct de <xref:System.Windows.FrameworkElement.BeginInit%2A> et <xref:System.Windows.FrameworkElement.EndInit%2A> autour des autres [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)] appels qui ajuster les propriétés qui affectent le rendu.</span><span class="sxs-lookup"><span data-stu-id="a9c6e-124">The following example is sample code for a console application that uses rendering [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] and <xref:System.Windows.Markup.XamlReader.Load%28System.IO.Stream%29?displayProperty=nameWithType> of a loose [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] file to illustrate the proper placement of <xref:System.Windows.FrameworkElement.BeginInit%2A> and <xref:System.Windows.FrameworkElement.EndInit%2A> around other [!INCLUDE[TLA2#tla_api](../../../../includes/tla2sharptla-api-md.md)] calls that adjust properties that affect rendering.</span></span>  
  
 <span data-ttu-id="a9c6e-125">L’exemple illustre uniquement la fonction principale.</span><span class="sxs-lookup"><span data-stu-id="a9c6e-125">The example illustrates the main function only.</span></span> <span data-ttu-id="a9c6e-126">Les fonctions `Rasterize` et `Save` (non illustrées) sont des fonctions utilitaires qui assurent le traitement d’image et les E/S.</span><span class="sxs-lookup"><span data-stu-id="a9c6e-126">The functions `Rasterize` and `Save` (not shown) are utility functions that take care of image processing and IO.</span></span>  
  
 [!code-csharp[InitializeElements#Main](../../../../samples/snippets/csharp/VS_Snippets_Wpf/InitializeElements/CSharp/initializeelements.cs#main)]
 [!code-vb[InitializeElements#Main](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/InitializeElements/VisualBasic/initializeelements.vb#main)]  
  
## <a name="see-also"></a><span data-ttu-id="a9c6e-127">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="a9c6e-127">See Also</span></span>  
 [<span data-ttu-id="a9c6e-128">Arborescences dans WPF</span><span class="sxs-lookup"><span data-stu-id="a9c6e-128">Trees in WPF</span></span>](../../../../docs/framework/wpf/advanced/trees-in-wpf.md)  
 [<span data-ttu-id="a9c6e-129">Vue d’ensemble du rendu graphique de WPF</span><span class="sxs-lookup"><span data-stu-id="a9c6e-129">WPF Graphics Rendering Overview</span></span>](../../../../docs/framework/wpf/graphics-multimedia/wpf-graphics-rendering-overview.md)  
 [<span data-ttu-id="a9c6e-130">Vue d’ensemble du langage XAML (WPF)</span><span class="sxs-lookup"><span data-stu-id="a9c6e-130">XAML Overview (WPF)</span></span>](../../../../docs/framework/wpf/advanced/xaml-overview-wpf.md)
