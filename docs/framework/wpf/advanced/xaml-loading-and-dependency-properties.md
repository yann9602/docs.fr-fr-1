---
title: "Propriétés de dépendance et chargement XAML"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-wpf
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords:
- custom dependency properties [WPF]
- dependency properties [WPF], XAML loading and
- loading XML data [WPF]
ms.assetid: 6eea9f4e-45ce-413b-a266-f08238737bf2
caps.latest.revision: "8"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: 9771aa05d029603a018e041644ff3e2018e26ca4
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 12/22/2017
---
# <a name="xaml-loading-and-dependency-properties"></a><span data-ttu-id="eafd8-102">Propriétés de dépendance et chargement XAML</span><span class="sxs-lookup"><span data-stu-id="eafd8-102">XAML Loading and Dependency Properties</span></span>
<span data-ttu-id="eafd8-103">L’implémentation [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] actuelle de son processeur [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] connaît de manière inhérente la propriété de dépendance.</span><span class="sxs-lookup"><span data-stu-id="eafd8-103">The current [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] implementation of its [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] processor is inherently dependency property aware.</span></span> <span data-ttu-id="eafd8-104">Le processeur [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] utilise des méthodes de système de propriétés pour les propriétés de dépendance durant le chargement de [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] binaire et le traitement des attributs correspondant à des propriétés de dépendance.</span><span class="sxs-lookup"><span data-stu-id="eafd8-104">The [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] processor uses property system methods for dependency properties when loading binary [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] and processing attributes that are dependency properties.</span></span> <span data-ttu-id="eafd8-105">Cette fonctionnalité ignore efficacement les wrappers de propriété.</span><span class="sxs-lookup"><span data-stu-id="eafd8-105">This effectively bypasses the property wrappers.</span></span> <span data-ttu-id="eafd8-106">Lorsque vous implémentez les propriétés de dépendance personnalisées, vous devez prendre en compte pour ce comportement et doit éviter de placer tout autre code dans votre wrapper de propriété autre que les méthodes de système de propriétés <xref:System.Windows.DependencyObject.GetValue%2A> et <xref:System.Windows.DependencyObject.SetValue%2A>.</span><span class="sxs-lookup"><span data-stu-id="eafd8-106">When you implement custom dependency properties, you must account for this behavior and should avoid placing any other code in your property wrapper other than the property system methods <xref:System.Windows.DependencyObject.GetValue%2A> and <xref:System.Windows.DependencyObject.SetValue%2A>.</span></span>  
  
  
<a name="prerequisites"></a>   
## <a name="prerequisites"></a><span data-ttu-id="eafd8-107">Prérequis</span><span class="sxs-lookup"><span data-stu-id="eafd8-107">Prerequisites</span></span>  
 <span data-ttu-id="eafd8-108">Cette rubrique part du principe que vous savez ce que sont les propriétés de dépendance, comme consommateur et comme auteur, et que vous avez lu [Vue d’ensemble des propriétés de dépendance](../../../../docs/framework/wpf/advanced/dependency-properties-overview.md) et [Propriétés de dépendance personnalisées](../../../../docs/framework/wpf/advanced/custom-dependency-properties.md).</span><span class="sxs-lookup"><span data-stu-id="eafd8-108">This topic assumes that you understand dependency properties both as consumer and author and have read [Dependency Properties Overview](../../../../docs/framework/wpf/advanced/dependency-properties-overview.md) and [Custom Dependency Properties](../../../../docs/framework/wpf/advanced/custom-dependency-properties.md).</span></span> <span data-ttu-id="eafd8-109">Vous devez également avoir lu [Vue d’ensemble du langage XAML (WPF)](../../../../docs/framework/wpf/advanced/xaml-overview-wpf.md) et [Syntaxe XAML en détail](../../../../docs/framework/wpf/advanced/xaml-syntax-in-detail.md).</span><span class="sxs-lookup"><span data-stu-id="eafd8-109">You should also have read [XAML Overview (WPF)](../../../../docs/framework/wpf/advanced/xaml-overview-wpf.md) and [XAML Syntax In Detail](../../../../docs/framework/wpf/advanced/xaml-syntax-in-detail.md).</span></span>  
  
<a name="implementation"></a>   
## <a name="the-wpf-xaml-loader-implementation-and-performance"></a><span data-ttu-id="eafd8-110">Performance et implémentation du chargeur XAML WPF</span><span class="sxs-lookup"><span data-stu-id="eafd8-110">The WPF XAML Loader Implementation, and Performance</span></span>  
 <span data-ttu-id="eafd8-111">Pour des raisons d’implémentation, il est moins sollicite identifier une propriété comme une propriété de dépendance et d’accéder au système de la propriété <xref:System.Windows.DependencyObject.SetValue%2A> pour définir, plutôt que d’utiliser le wrapper de propriété et sa méthode setter.</span><span class="sxs-lookup"><span data-stu-id="eafd8-111">For implementation reasons, it is computationally less expensive to identify a property as a dependency property and access the property system <xref:System.Windows.DependencyObject.SetValue%2A> method to set it, rather than using the property wrapper and its setter.</span></span> <span data-ttu-id="eafd8-112">Cela est dû au fait qu’un processeur [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] doit déduire l’intégralité du modèle objet du code de stockage uniquement sur la base de la connaissance du type et des relations entre les membres indiqués par la structure du balisage et différentes chaînes.</span><span class="sxs-lookup"><span data-stu-id="eafd8-112">This is because a [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] processor must infer the entire object model of the backing code based only on knowing the type and member relationships that are indicated by the structure of the markup and various strings.</span></span>  
  
 <span data-ttu-id="eafd8-113">Le type est recherché par une combinaison des xmlns et attributs de l’assembly, mais l’identification des membres, la détermination de qui peuvent prendre en charge définie en tant qu’attribut, et de résoudre les types qui prennent en charge par les valeurs de propriété sont autrement une grande réflexion à l’aide de <xref:System.Reflection.PropertyInfo>.</span><span class="sxs-lookup"><span data-stu-id="eafd8-113">The type is looked up through a combination of xmlns and assembly attributes, but identifying the members, determining which could support being set as an attribute, and resolving what types the property values support would otherwise require extensive reflection using <xref:System.Reflection.PropertyInfo>.</span></span> <span data-ttu-id="eafd8-114">Étant donné que les propriétés de dépendance sur un type donné sont accessibles comme une table de stockage via le système de propriétés, les [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] implémentation de sa [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] processeur utilise cette table et déduit que toute propriété *ABC* peut être définie plus efficacement en appelant <xref:System.Windows.DependencyObject.SetValue%2A> sur le contenant <xref:System.Windows.DependencyObject> type dérivé, à l’aide de l’identificateur de propriété de dépendance *ABCProperty*.</span><span class="sxs-lookup"><span data-stu-id="eafd8-114">Because dependency properties on a given type are accessible as a storage table through the property system, the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] implementation of its [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] processor uses this table and infers that any given property *ABC* can be more efficiently set by calling <xref:System.Windows.DependencyObject.SetValue%2A> on the containing <xref:System.Windows.DependencyObject> derived type, using the dependency property identifier *ABCProperty*.</span></span>  
  
<a name="implications"></a>   
## <a name="implications-for-custom-dependency-properties"></a><span data-ttu-id="eafd8-115">Implications pour les propriétés de dépendance personnalisées</span><span class="sxs-lookup"><span data-stu-id="eafd8-115">Implications for Custom Dependency Properties</span></span>  
 <span data-ttu-id="eafd8-116">Du fait que l’implémentation [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] actuelle du comportement du processeur [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] pour le paramètre de propriété ignore l’intégralité des wrappers, vous ne devez placer aucune logique supplémentaire dans les définitions du wrapper de votre propriété de dépendance personnalisée.</span><span class="sxs-lookup"><span data-stu-id="eafd8-116">Because the current [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] implementation of the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] processor behavior for property setting bypasses the wrappers entirely, you should not put any additional logic into the set definitions of the wrapper for your custom dependency property.</span></span> <span data-ttu-id="eafd8-117">Si vous intégrez cette logique dans la définition du jeu, la logique n’est pas exécutée quand la propriété est définie en [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] plutôt que dans le code.</span><span class="sxs-lookup"><span data-stu-id="eafd8-117">If you put such logic in the set definition, then the logic will not be executed when the property is set in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] rather than in code.</span></span>  
  
 <span data-ttu-id="eafd8-118">De même, d’autres aspects de la [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] processeur qui obtiennent des valeurs de propriété à partir de [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] traitement également utilisez <xref:System.Windows.DependencyObject.GetValue%2A> au lieu d’utiliser le wrapper.</span><span class="sxs-lookup"><span data-stu-id="eafd8-118">Similarly, other aspects of the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] processor that obtain property values from [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] processing also use <xref:System.Windows.DependencyObject.GetValue%2A> rather than using the wrapper.</span></span> <span data-ttu-id="eafd8-119">Par conséquent, vous devez également éviter toute implémentation supplémentaire dans le `get` définition au-delà de la <xref:System.Windows.DependencyObject.GetValue%2A> appeler.</span><span class="sxs-lookup"><span data-stu-id="eafd8-119">Therefore, you should also avoid any additional implementation in the `get` definition beyond the <xref:System.Windows.DependencyObject.GetValue%2A> call.</span></span>  
  
 <span data-ttu-id="eafd8-120">L’exemple suivant illustre une définition de propriété de dépendance recommandée avec les wrappers, où l’identificateur de propriété est stocké comme champ `public` `static` `readonly`, et les définitions `get` et `set` ne contiennent aucun code au-delà des méthodes de système de propriétés nécessaires qui définissent le stockage de la propriété de dépendance.</span><span class="sxs-lookup"><span data-stu-id="eafd8-120">The following example is a recommended dependency property definition with wrappers, where the property identifier is stored as a `public` `static` `readonly` field, and the `get` and `set` definitions contain no code beyond the necessary property system methods that define the dependency property backing.</span></span>  
  
 [!code-csharp[WPFAquariumSln#AGWithWrapper](../../../../samples/snippets/csharp/VS_Snippets_Wpf/WPFAquariumSln/CSharp/WPFAquariumObjects/Class1.cs#agwithwrapper)]
 [!code-vb[WPFAquariumSln#AGWithWrapper](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/WPFAquariumSln/visualbasic/wpfaquariumobjects/class1.vb#agwithwrapper)]  
  
## <a name="see-also"></a><span data-ttu-id="eafd8-121">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="eafd8-121">See Also</span></span>  
 [<span data-ttu-id="eafd8-122">Vue d’ensemble des propriétés de dépendance</span><span class="sxs-lookup"><span data-stu-id="eafd8-122">Dependency Properties Overview</span></span>](../../../../docs/framework/wpf/advanced/dependency-properties-overview.md)  
 [<span data-ttu-id="eafd8-123">Vue d’ensemble du langage XAML (WPF)</span><span class="sxs-lookup"><span data-stu-id="eafd8-123">XAML Overview (WPF)</span></span>](../../../../docs/framework/wpf/advanced/xaml-overview-wpf.md)  
 [<span data-ttu-id="eafd8-124">Métadonnées de propriété de dépendance</span><span class="sxs-lookup"><span data-stu-id="eafd8-124">Dependency Property Metadata</span></span>](../../../../docs/framework/wpf/advanced/dependency-property-metadata.md)  
 [<span data-ttu-id="eafd8-125">Propriétés de dépendance de type collection</span><span class="sxs-lookup"><span data-stu-id="eafd8-125">Collection-Type Dependency Properties</span></span>](../../../../docs/framework/wpf/advanced/collection-type-dependency-properties.md)  
 [<span data-ttu-id="eafd8-126">Sécurité de propriété de dépendance</span><span class="sxs-lookup"><span data-stu-id="eafd8-126">Dependency Property Security</span></span>](../../../../docs/framework/wpf/advanced/dependency-property-security.md)  
 [<span data-ttu-id="eafd8-127">Modèles de constructeur sécurisé pour DependencyObjects</span><span class="sxs-lookup"><span data-stu-id="eafd8-127">Safe Constructor Patterns for DependencyObjects</span></span>](../../../../docs/framework/wpf/advanced/safe-constructor-patterns-for-dependencyobjects.md)
