---
title: "Mise en forme de texte avancée"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-wpf
ms.tgt_pltfrm: 
ms.topic: article
dev_langs:
- csharp
- vb
helpviewer_keywords:
- formatting [WPF]
- text [WPF]
- typography [WPF], text formatting
ms.assetid: f0a7986e-f5b2-485c-a27d-f8e922022212
caps.latest.revision: "16"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: 9bb2664b267301fdf1e3a67e385595a5d28212bc
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 12/22/2017
---
# <a name="advanced-text-formatting"></a><span data-ttu-id="08ad2-102">Mise en forme de texte avancée</span><span class="sxs-lookup"><span data-stu-id="08ad2-102">Advanced Text Formatting</span></span>
<span data-ttu-id="08ad2-103">Le [!INCLUDE[TLA#tla_wpf](../../../../includes/tlasharptla-wpf-md.md)] fournit un ensemble robuste de [!INCLUDE[TLA#tla_api#plural](../../../../includes/tlasharptla-apisharpplural-md.md)] pour inclure du texte dans votre application.</span><span class="sxs-lookup"><span data-stu-id="08ad2-103">The [!INCLUDE[TLA#tla_wpf](../../../../includes/tlasharptla-wpf-md.md)] provides a robust set of [!INCLUDE[TLA#tla_api#plural](../../../../includes/tlasharptla-apisharpplural-md.md)] for including text in your application.</span></span> <span data-ttu-id="08ad2-104">Mise en page et [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)] [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)], tel que <xref:System.Windows.Controls.TextBlock>, fournir les plus courants et général utiliser des éléments de présentation de texte.</span><span class="sxs-lookup"><span data-stu-id="08ad2-104">Layout and [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)][!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)], such as <xref:System.Windows.Controls.TextBlock>, provide the most common and general use elements for text presentation.</span></span> <span data-ttu-id="08ad2-105">Dessin [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)], tel que <xref:System.Windows.Media.GlyphRunDrawing> et <xref:System.Windows.Media.FormattedText>, fournir un moyen pour inclure le texte mis en forme dans des dessins.</span><span class="sxs-lookup"><span data-stu-id="08ad2-105">Drawing [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)], such as <xref:System.Windows.Media.GlyphRunDrawing> and <xref:System.Windows.Media.FormattedText>, provide a means for including formatted text in drawings.</span></span> <span data-ttu-id="08ad2-106">Au niveau le plus avancé, [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] fournit un moteur de contrôler tous les aspects de la présentation de texte, tels que la gestion du magasin de texte, la gestion de mise en forme de texte et gestion de l’objet incorporé de mise en forme du texte extensible.</span><span class="sxs-lookup"><span data-stu-id="08ad2-106">At the most advanced level, [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] provides an extensible text formatting engine to control every aspect of text presentation, such as text store management, text run formatting management, and embedded object management.</span></span>  
  
 <span data-ttu-id="08ad2-107">Cette rubrique fournit une introduction au [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] mise en forme du texte.</span><span class="sxs-lookup"><span data-stu-id="08ad2-107">This topic provides an introduction to [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] text formatting.</span></span> <span data-ttu-id="08ad2-108">Il se concentre sur l’implémentation cliente et l’utilisation de la [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] du moteur de mise en forme de texte.</span><span class="sxs-lookup"><span data-stu-id="08ad2-108">It focuses on client implementation and use of the [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] text formatting engine.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="08ad2-109">Vous trouverez tous les exemples de code dans ce document dans le [mise en forme de texte avancée, exemple](http://go.microsoft.com/fwlink/?LinkID=159965).</span><span class="sxs-lookup"><span data-stu-id="08ad2-109">All code examples within this document can be found in the [Advanced Text Formatting Sample](http://go.microsoft.com/fwlink/?LinkID=159965).</span></span>  
  

  
<a name="prereq"></a>   
## <a name="prerequisites"></a><span data-ttu-id="08ad2-110">Prérequis</span><span class="sxs-lookup"><span data-stu-id="08ad2-110">Prerequisites</span></span>  
 <span data-ttu-id="08ad2-111">Cette rubrique suppose que vous êtes familiarisé avec le niveau supérieur [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] utilisé pour la présentation du texte.</span><span class="sxs-lookup"><span data-stu-id="08ad2-111">This topic assumes that you are familiar with the higher level [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] used for text presentation.</span></span> <span data-ttu-id="08ad2-112">La plupart des scénarios utilisateur ne nécessitent pas de la mise en forme de texte avancée [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] décrites dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="08ad2-112">Most user scenarios will not require the advanced text formatting [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] discussed in this topic.</span></span> <span data-ttu-id="08ad2-113">Pour une introduction à l’autre texte [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)], consultez [Documents dans WPF](../../../../docs/framework/wpf/advanced/documents-in-wpf.md).</span><span class="sxs-lookup"><span data-stu-id="08ad2-113">For an introduction to the different text [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)], see [Documents in WPF](../../../../docs/framework/wpf/advanced/documents-in-wpf.md).</span></span>  
  
<a name="section1"></a>   
## <a name="advanced-text-formatting"></a><span data-ttu-id="08ad2-114">Mise en forme de texte avancée</span><span class="sxs-lookup"><span data-stu-id="08ad2-114">Advanced Text Formatting</span></span>  
 <span data-ttu-id="08ad2-115">La mise en page de texte et [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] contrôles [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] fournissent des propriétés de mise en forme qui vous permettent d’inclure facilement le texte mis en forme dans votre application.</span><span class="sxs-lookup"><span data-stu-id="08ad2-115">The text layout and [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] controls in [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] provide formatting properties that allow you to easily include formatted text in your application.</span></span> <span data-ttu-id="08ad2-116">Ces contrôles exposent un certain nombre de propriétés permettant de gérer la présentation du texte, ce qui inclut sa police, sa taille et sa couleur.</span><span class="sxs-lookup"><span data-stu-id="08ad2-116">These controls expose a number of properties to handle the presentation of text, which includes its typeface, size, and color.</span></span> <span data-ttu-id="08ad2-117">Normalement, ces contrôles peuvent gérer la majorité de la présentation du texte dans votre application.</span><span class="sxs-lookup"><span data-stu-id="08ad2-117">Under ordinary circumstances, these controls can handle the majority of text presentation in your application.</span></span> <span data-ttu-id="08ad2-118">Toutefois, certains scénarios avancés nécessitent le contrôle du stockage de texte, ainsi que sa présentation.</span><span class="sxs-lookup"><span data-stu-id="08ad2-118">However, some advanced scenarios require the control of text storage as well as text presentation.</span></span> [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)]<span data-ttu-id="08ad2-119"> fournit un moteur de mise en forme du texte extensible dans ce but.</span><span class="sxs-lookup"><span data-stu-id="08ad2-119"> provides an extensible text formatting engine for this purpose.</span></span>  
  
 <span data-ttu-id="08ad2-120">Le fonctionnalités de mise en forme de texte avancée trouvé dans [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] se composent d’un texte mise en forme du moteur, un magasin de texte, les exécutions de texte et de mise en forme de propriétés.</span><span class="sxs-lookup"><span data-stu-id="08ad2-120">The advanced text formatting features found in [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] consist of a text formatting engine, a text store, text runs, and formatting properties.</span></span> <span data-ttu-id="08ad2-121">Le moteur, la mise en forme de texte <xref:System.Windows.Media.TextFormatting.TextFormatter>, crée des lignes de texte à utiliser pour la présentation.</span><span class="sxs-lookup"><span data-stu-id="08ad2-121">The text formatting engine, <xref:System.Windows.Media.TextFormatting.TextFormatter>, creates lines of text to be used for presentation.</span></span> <span data-ttu-id="08ad2-122">Pour cela, l’initialisation du processus de mise en forme de ligne et en appelant le formateur de texte <xref:System.Windows.Media.TextFormatting.TextFormatter.FormatLine%2A>.</span><span class="sxs-lookup"><span data-stu-id="08ad2-122">This is achieved by initiating the line formatting process and calling the text formatter's <xref:System.Windows.Media.TextFormatting.TextFormatter.FormatLine%2A>.</span></span> <span data-ttu-id="08ad2-123">Le formateur de texte récupère les séquences de texte à partir de votre magasin de texte en appelant la banque de <xref:System.Windows.Media.TextFormatting.TextSource.GetTextRun%2A> (méthode).</span><span class="sxs-lookup"><span data-stu-id="08ad2-123">The text formatter retrieves text runs from your text store by calling the store's <xref:System.Windows.Media.TextFormatting.TextSource.GetTextRun%2A> method.</span></span> <span data-ttu-id="08ad2-124">Le <xref:System.Windows.Media.TextFormatting.TextRun> objets sont transformés en <xref:System.Windows.Media.TextFormatting.TextLine> les objets par le formateur de texte et transmis à votre application pour l’inspection ou l’affichage.</span><span class="sxs-lookup"><span data-stu-id="08ad2-124">The <xref:System.Windows.Media.TextFormatting.TextRun> objects are then formed into <xref:System.Windows.Media.TextFormatting.TextLine> objects by the text formatter and given to your application for inspection or display.</span></span>  
  
<a name="section2"></a>   
## <a name="using-the-text-formatter"></a><span data-ttu-id="08ad2-125">Utilisation du formateur de texte</span><span class="sxs-lookup"><span data-stu-id="08ad2-125">Using the Text Formatter</span></span>  
 <span data-ttu-id="08ad2-126"><xref:System.Windows.Media.TextFormatting.TextFormatter>est le [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] mise en forme du moteur et fournit des services de mise en forme et couper des lignes de texte.</span><span class="sxs-lookup"><span data-stu-id="08ad2-126"><xref:System.Windows.Media.TextFormatting.TextFormatter> is the [!INCLUDE[TLA2#tla_wpf](../../../../includes/tla2sharptla-wpf-md.md)] text formatting engine and provides services for formatting and breaking text lines.</span></span> <span data-ttu-id="08ad2-127">Le formateur de texte peut gérer différents formats de caractères alphabétiques et prend en charge la présentation du texte international.</span><span class="sxs-lookup"><span data-stu-id="08ad2-127">The text formatter can handle different text character formats and paragraph styles, and includes support for international text layout.</span></span>  
  
 <span data-ttu-id="08ad2-128">Contrairement à un texte traditionnelle [!INCLUDE[TLA#tla_api](../../../../includes/tlasharptla-api-md.md)], le <xref:System.Windows.Media.TextFormatting.TextFormatter> interagit avec un client de mise en page de texte via un ensemble de méthodes de rappel.</span><span class="sxs-lookup"><span data-stu-id="08ad2-128">Unlike a traditional text [!INCLUDE[TLA#tla_api](../../../../includes/tlasharptla-api-md.md)], the <xref:System.Windows.Media.TextFormatting.TextFormatter> interacts with a text layout client through a set of callback methods.</span></span> <span data-ttu-id="08ad2-129">Il nécessite le client fournisse ces méthodes dans une implémentation de la <xref:System.Windows.Media.TextFormatting.TextSource> classe.</span><span class="sxs-lookup"><span data-stu-id="08ad2-129">It requires the client to provide these methods in an implementation of the <xref:System.Windows.Media.TextFormatting.TextSource> class.</span></span> <span data-ttu-id="08ad2-130">Le diagramme suivant illustre l’interaction de mise en page de texte entre l’application cliente et <xref:System.Windows.Media.TextFormatting.TextFormatter>.</span><span class="sxs-lookup"><span data-stu-id="08ad2-130">The following diagram illustrates the text layout interaction between the client application and <xref:System.Windows.Media.TextFormatting.TextFormatter>.</span></span>  
  
 <span data-ttu-id="08ad2-131">![Diagramme du client de disposition du texte et TextFormatter](../../../../docs/framework/wpf/advanced/media/textformatter01.png "TextFormatter01")</span><span class="sxs-lookup"><span data-stu-id="08ad2-131">![Diagram of text layout client and TextFormatter](../../../../docs/framework/wpf/advanced/media/textformatter01.png "TextFormatter01")</span></span>  
<span data-ttu-id="08ad2-132">Interaction entre l’application et TextFormatter</span><span class="sxs-lookup"><span data-stu-id="08ad2-132">Interaction between application and TextFormatter</span></span>  
  
 <span data-ttu-id="08ad2-133">Le formateur de texte est utilisé pour récupérer les lignes de texte mis en forme à partir du magasin de texte, qui est une implémentation de <xref:System.Windows.Media.TextFormatting.TextSource>.</span><span class="sxs-lookup"><span data-stu-id="08ad2-133">The text formatter is used to retrieve formatted text lines from the text store, which is an implementation of <xref:System.Windows.Media.TextFormatting.TextSource>.</span></span> <span data-ttu-id="08ad2-134">Cela est effectué en créant une instance du module de formatage de texte à l’aide de la <xref:System.Windows.Media.TextFormatting.TextFormatter.Create%2A> (méthode).</span><span class="sxs-lookup"><span data-stu-id="08ad2-134">This is done by first creating an instance of the text formatter by using the <xref:System.Windows.Media.TextFormatting.TextFormatter.Create%2A> method.</span></span> <span data-ttu-id="08ad2-135">Cette méthode crée une instance du formateur de texte et définit la hauteur et la largeur de ligne maximales.</span><span class="sxs-lookup"><span data-stu-id="08ad2-135">This method creates an instance of the text formatter and sets the maximum line height and width values.</span></span> <span data-ttu-id="08ad2-136">Dès qu’une instance du module de formatage de texte est créée, le processus de création de ligne est lancé en appelant le <xref:System.Windows.Media.TextFormatting.TextFormatter.FormatLine%2A> (méthode).</span><span class="sxs-lookup"><span data-stu-id="08ad2-136">As soon as an instance of the text formatter is created, the line creation process is started by calling the <xref:System.Windows.Media.TextFormatting.TextFormatter.FormatLine%2A> method.</span></span> <span data-ttu-id="08ad2-137"><xref:System.Windows.Media.TextFormatting.TextFormatter>rappelle à la source de texte pour récupérer le texte et les paramètres de mise en forme pour les exécutions de texte qui forment une ligne.</span><span class="sxs-lookup"><span data-stu-id="08ad2-137"><xref:System.Windows.Media.TextFormatting.TextFormatter> calls back to the text source to retrieve the text and formatting parameters for the runs of text that form a line.</span></span>  
  
 <span data-ttu-id="08ad2-138">L’exemple suivant illustre le processus de mise en forme d’un magasin de texte.</span><span class="sxs-lookup"><span data-stu-id="08ad2-138">In the following example, the process of formatting a text store is shown.</span></span> <span data-ttu-id="08ad2-139">Le <xref:System.Windows.Media.TextFormatting.TextFormatter> objet est utilisé pour récupérer des lignes de texte à partir du magasin de texte et puis mettre en forme la ligne de texte pour la placer dans le <xref:System.Windows.Media.DrawingContext>.</span><span class="sxs-lookup"><span data-stu-id="08ad2-139">The <xref:System.Windows.Media.TextFormatting.TextFormatter> object is used to retrieve text lines from the text store and then format the text line for drawing into the <xref:System.Windows.Media.DrawingContext>.</span></span>  
  
 [!code-csharp[TextFormatterExample#100](../../../../samples/snippets/csharp/VS_Snippets_Wpf/TextFormatterExample/CSharp/Window1.xaml.cs#100)]
 [!code-vb[TextFormatterExample#100](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/TextFormatterExample/VisualBasic/Window1.xaml.vb#100)]  
  
<a name="section3"></a>   
## <a name="implementing-the-client-text-store"></a><span data-ttu-id="08ad2-140">Implémentation du magasin de texte client</span><span class="sxs-lookup"><span data-stu-id="08ad2-140">Implementing the Client Text Store</span></span>  
 <span data-ttu-id="08ad2-141">Quand vous étendez le moteur de mise en forme du texte, vous devez implémenter et gérer tous les aspects du magasin de texte.</span><span class="sxs-lookup"><span data-stu-id="08ad2-141">When you extend the text formatting engine, you are required to implement and manage all aspects of the text store.</span></span> <span data-ttu-id="08ad2-142">Cela n’est pas une tâche facile.</span><span class="sxs-lookup"><span data-stu-id="08ad2-142">This is not a trivial task.</span></span> <span data-ttu-id="08ad2-143">Le magasin de texte est chargé de suivre les propriétés de séquence de texte, les propriétés de paragraphe, les objets incorporés et tout autre contenu similaire.</span><span class="sxs-lookup"><span data-stu-id="08ad2-143">The text store is responsible for tracking text run properties, paragraph properties, embedded objects, and other similar content.</span></span> <span data-ttu-id="08ad2-144">Il fournit également le formateur de texte avec une personne <xref:System.Windows.Media.TextFormatting.TextRun> que le formateur de texte utilise pour créer les objets <xref:System.Windows.Media.TextFormatting.TextLine> objets.</span><span class="sxs-lookup"><span data-stu-id="08ad2-144">It also provides the text formatter with individual <xref:System.Windows.Media.TextFormatting.TextRun> objects which the text formatter uses to create <xref:System.Windows.Media.TextFormatting.TextLine> objects.</span></span>  
  
 <span data-ttu-id="08ad2-145">Pour gérer la virtualisation du magasin de texte, le magasin de texte doit être dérivé de <xref:System.Windows.Media.TextFormatting.TextSource>.</span><span class="sxs-lookup"><span data-stu-id="08ad2-145">To handle the virtualization of the text store, the text store must be derived from <xref:System.Windows.Media.TextFormatting.TextSource>.</span></span> <span data-ttu-id="08ad2-146"><xref:System.Windows.Media.TextFormatting.TextSource>définit la méthode que le formateur de texte utilise pour récupérer les séquences de texte à partir du magasin de texte.</span><span class="sxs-lookup"><span data-stu-id="08ad2-146"><xref:System.Windows.Media.TextFormatting.TextSource> defines the method the text formatter uses to retrieve text runs from the text store.</span></span> <span data-ttu-id="08ad2-147"><xref:System.Windows.Media.TextFormatting.TextSource.GetTextRun%2A>est la méthode utilisée par le formateur de texte pour extraire le texte s’exécute utilisée dans la ligne mise en forme.</span><span class="sxs-lookup"><span data-stu-id="08ad2-147"><xref:System.Windows.Media.TextFormatting.TextSource.GetTextRun%2A> is the method used by the text formatter to retrieve text runs used in line formatting.</span></span> <span data-ttu-id="08ad2-148">L’appel à <xref:System.Windows.Media.TextFormatting.TextSource.GetTextRun%2A> est effectué à plusieurs reprises par le formateur de texte jusqu'à ce qu’une des conditions suivantes se produit :</span><span class="sxs-lookup"><span data-stu-id="08ad2-148">The call to <xref:System.Windows.Media.TextFormatting.TextSource.GetTextRun%2A> is repeatedly made by the text formatter until one of the following conditions occurs:</span></span>  
  
-   <span data-ttu-id="08ad2-149">Un <xref:System.Windows.Media.TextFormatting.TextEndOfLine> ou une sous-classe sont retournés.</span><span class="sxs-lookup"><span data-stu-id="08ad2-149">A <xref:System.Windows.Media.TextFormatting.TextEndOfLine> or a subclass is returned.</span></span>  
  
-   <span data-ttu-id="08ad2-150">La largeur cumulée des séquences de texte dépasse la largeur de ligne maximale spécifiée dans l’appel pour créer le formateur de texte ou de l’appel au formateur de texte <xref:System.Windows.Media.TextFormatting.TextFormatter.FormatLine%2A> (méthode).</span><span class="sxs-lookup"><span data-stu-id="08ad2-150">The accumulated width of text runs exceeds the maximum line width specified in either the call to create the text formatter or the call to the text formatter's <xref:System.Windows.Media.TextFormatting.TextFormatter.FormatLine%2A> method.</span></span>  
  
-   <span data-ttu-id="08ad2-151">A [!INCLUDE[TLA#tla_unicode](../../../../includes/tlasharptla-unicode-md.md)] séquence de saut de ligne, telles que « CF », « LF » ou « CRLF », est retournée.</span><span class="sxs-lookup"><span data-stu-id="08ad2-151">A [!INCLUDE[TLA#tla_unicode](../../../../includes/tlasharptla-unicode-md.md)] newline sequence, such as "CF", "LF", or "CRLF", is returned.</span></span>  
  
<a name="section4"></a>   
## <a name="providing-text-runs"></a><span data-ttu-id="08ad2-152">Fourniture des séquences de texte</span><span class="sxs-lookup"><span data-stu-id="08ad2-152">Providing Text Runs</span></span>  
 <span data-ttu-id="08ad2-153">Le cœur du processus de mise en forme du texte est l’interaction entre le formateur de texte et le magasin de texte.</span><span class="sxs-lookup"><span data-stu-id="08ad2-153">The core of the text formatting process is the interaction between the text formatter and the text store.</span></span> <span data-ttu-id="08ad2-154">Votre implémentation de <xref:System.Windows.Media.TextFormatting.TextSource> fournit le formateur de texte avec le <xref:System.Windows.Media.TextFormatting.TextRun> objets et les propriétés permettant de mettre en forme le texte s’exécute.</span><span class="sxs-lookup"><span data-stu-id="08ad2-154">Your implementation of <xref:System.Windows.Media.TextFormatting.TextSource> provides the text formatter with the <xref:System.Windows.Media.TextFormatting.TextRun> objects and the properties with which to format the text runs.</span></span> <span data-ttu-id="08ad2-155">Cette interaction est contrôlée par le <xref:System.Windows.Media.TextFormatting.TextSource.GetTextRun%2A> (méthode), qui est appelée par le formateur de texte.</span><span class="sxs-lookup"><span data-stu-id="08ad2-155">This interaction is handled by the <xref:System.Windows.Media.TextFormatting.TextSource.GetTextRun%2A> method, which is called by the text formatter.</span></span>  
  
 <span data-ttu-id="08ad2-156">Le tableau suivant répertorie certaines des prédéfinis <xref:System.Windows.Media.TextFormatting.TextRun> objets.</span><span class="sxs-lookup"><span data-stu-id="08ad2-156">The following table shows some of the predefined <xref:System.Windows.Media.TextFormatting.TextRun> objects.</span></span>  
  
|<span data-ttu-id="08ad2-157">Type TextRun</span><span class="sxs-lookup"><span data-stu-id="08ad2-157">TextRun Type</span></span>|<span data-ttu-id="08ad2-158">Utilisation</span><span class="sxs-lookup"><span data-stu-id="08ad2-158">Usage</span></span>|  
|------------------|-----------|  
|<xref:System.Windows.Media.TextFormatting.TextCharacters>|<span data-ttu-id="08ad2-159">Séquence de texte spécialisée utilisée pour passer une représentation des glyphes de caractères au formateur de texte.</span><span class="sxs-lookup"><span data-stu-id="08ad2-159">The specialized text run used to pass a representation of character glyphs back to the text formatter.</span></span>|  
|<xref:System.Windows.Media.TextFormatting.TextEmbeddedObject>|<span data-ttu-id="08ad2-160">Séquence de texte spécialisée utilisée pour fournir du contenu dont la mesure, le test de positionnement et le dessin sont effectués globalement, par exemple un bouton ou une image dans le texte.</span><span class="sxs-lookup"><span data-stu-id="08ad2-160">The specialized text run used to provide content in which measuring, hit testing, and drawing is done in whole, such as a button or image within the text.</span></span>|  
|<xref:System.Windows.Media.TextFormatting.TextEndOfLine>|<span data-ttu-id="08ad2-161">Séquence de texte spécialisée utilisée pour marquer la fin d’une ligne.</span><span class="sxs-lookup"><span data-stu-id="08ad2-161">The specialized text run used to mark the end of a line.</span></span>|  
|<xref:System.Windows.Media.TextFormatting.TextEndOfParagraph>|<span data-ttu-id="08ad2-162">Séquence de texte spécialisée utilisée pour marquer la fin d’un paragraphe.</span><span class="sxs-lookup"><span data-stu-id="08ad2-162">The specialized text run used to mark the end of a paragraph.</span></span>|  
|<xref:System.Windows.Media.TextFormatting.TextEndOfSegment>|<span data-ttu-id="08ad2-163">La séquence de texte spécialisé utilisée pour marquer la fin d’un segment, par exemple à la fin de la portée affectée par une précédente <xref:System.Windows.Media.TextFormatting.TextModifier> exécuter.</span><span class="sxs-lookup"><span data-stu-id="08ad2-163">The specialized text run used to mark the end of a segment, such as to end the scope affected by a previous <xref:System.Windows.Media.TextFormatting.TextModifier> run.</span></span>|  
|<xref:System.Windows.Media.TextFormatting.TextHidden>|<span data-ttu-id="08ad2-164">Séquence de texte spécialisée utilisée pour marquer une plage de caractères masqués.</span><span class="sxs-lookup"><span data-stu-id="08ad2-164">The specialized text run used to mark a range of hidden characters.</span></span>|  
|<xref:System.Windows.Media.TextFormatting.TextModifier>|<span data-ttu-id="08ad2-165">Séquence de texte spécialisée utilisée pour modifier les propriétés des séquences de texte dans sa portée.</span><span class="sxs-lookup"><span data-stu-id="08ad2-165">The specialized text run used to modify properties of text runs in its scope.</span></span> <span data-ttu-id="08ad2-166">La portée s’étend à la correspondance suivante <xref:System.Windows.Media.TextFormatting.TextEndOfSegment> séquence de texte, ou dans l’autre <xref:System.Windows.Media.TextFormatting.TextEndOfParagraph>.</span><span class="sxs-lookup"><span data-stu-id="08ad2-166">The scope extends to the next matching <xref:System.Windows.Media.TextFormatting.TextEndOfSegment> text run, or the next <xref:System.Windows.Media.TextFormatting.TextEndOfParagraph>.</span></span>|  
  
 <span data-ttu-id="08ad2-167">Un des prédéfinis <xref:System.Windows.Media.TextFormatting.TextRun> objets peuvent être sous-classés.</span><span class="sxs-lookup"><span data-stu-id="08ad2-167">Any of the predefined <xref:System.Windows.Media.TextFormatting.TextRun> objects can be subclassed.</span></span> <span data-ttu-id="08ad2-168">Cela permet à votre source de texte de fournir au formateur de texte des séquences de texte qui incluent des données personnalisées.</span><span class="sxs-lookup"><span data-stu-id="08ad2-168">This allows your text source to provide the text formatter with text runs that include custom data.</span></span>  
  
 <span data-ttu-id="08ad2-169">L’exemple suivant montre un <xref:System.Windows.Media.TextFormatting.TextSource.GetTextRun%2A> (méthode).</span><span class="sxs-lookup"><span data-stu-id="08ad2-169">The following example demonstrates a <xref:System.Windows.Media.TextFormatting.TextSource.GetTextRun%2A> method.</span></span> <span data-ttu-id="08ad2-170">Ce magasin de texte retourne <xref:System.Windows.Media.TextFormatting.TextRun> objets pour le formateur de texte pour le traitement.</span><span class="sxs-lookup"><span data-stu-id="08ad2-170">This text store returns <xref:System.Windows.Media.TextFormatting.TextRun> objects to the text formatter for processing.</span></span>  
  
 [!code-csharp[TextFormatterExample#101](../../../../samples/snippets/csharp/VS_Snippets_Wpf/TextFormatterExample/CSharp/CustomTextSource.cs#101)]
 [!code-vb[TextFormatterExample#101](../../../../samples/snippets/visualbasic/VS_Snippets_Wpf/TextFormatterExample/VisualBasic/CustomTextSource.vb#101)]  
  
> [!NOTE]
>  <span data-ttu-id="08ad2-171">Dans cet exemple, le magasin de texte fournit les mêmes propriétés de texte à l’ensemble du texte.</span><span class="sxs-lookup"><span data-stu-id="08ad2-171">In this example, the text store provides the same text properties to all of the text.</span></span> <span data-ttu-id="08ad2-172">Les magasins de texte avancés doivent implémenter leur propre gestion de plage pour que les caractères individuels aient des propriétés distinctes.</span><span class="sxs-lookup"><span data-stu-id="08ad2-172">Advanced text stores would need to implement their own span management to allow individual characters to have different properties.</span></span>  
  
<a name="section5"></a>   
## <a name="specifying-formatting-properties"></a><span data-ttu-id="08ad2-173">Spécification des propriétés de mise en forme</span><span class="sxs-lookup"><span data-stu-id="08ad2-173">Specifying Formatting Properties</span></span>  
 <span data-ttu-id="08ad2-174"><xref:System.Windows.Media.TextFormatting.TextRun>objets sont mis en forme à l’aide des propriétés fournies par le magasin de texte.</span><span class="sxs-lookup"><span data-stu-id="08ad2-174"><xref:System.Windows.Media.TextFormatting.TextRun> objects are formatted by using properties provided by the text store.</span></span> <span data-ttu-id="08ad2-175">Ces propriétés sont de deux types, <xref:System.Windows.Media.TextFormatting.TextParagraphProperties> et <xref:System.Windows.Media.TextFormatting.TextRunProperties>.</span><span class="sxs-lookup"><span data-stu-id="08ad2-175">These properties come in two types, <xref:System.Windows.Media.TextFormatting.TextParagraphProperties> and <xref:System.Windows.Media.TextFormatting.TextRunProperties>.</span></span> <span data-ttu-id="08ad2-176"><xref:System.Windows.Media.TextFormatting.TextParagraphProperties>gérer les propriétés de paragraphe, par exemple <xref:System.Windows.TextAlignment> et <xref:System.Windows.FlowDirection>.</span><span class="sxs-lookup"><span data-stu-id="08ad2-176"><xref:System.Windows.Media.TextFormatting.TextParagraphProperties> handle paragraph inclusive properties such as <xref:System.Windows.TextAlignment> and <xref:System.Windows.FlowDirection>.</span></span> <span data-ttu-id="08ad2-177"><xref:System.Windows.Media.TextFormatting.TextRunProperties>sont des propriétés qui peuvent être différentes pour chaque exécution d’un paragraphe, tels que le pinceau de premier plan, de texte <xref:System.Windows.Media.Typeface>et la taille de police.</span><span class="sxs-lookup"><span data-stu-id="08ad2-177"><xref:System.Windows.Media.TextFormatting.TextRunProperties> are properties that can be different for each text run within a paragraph, such as foreground brush, <xref:System.Windows.Media.Typeface>, and font size.</span></span> <span data-ttu-id="08ad2-178">Pour implémenter le paragraphe personnalisé et exécuter des types de propriété de texte personnalisé, votre application doit créer des classes qui dérivent <xref:System.Windows.Media.TextFormatting.TextParagraphProperties> et <xref:System.Windows.Media.TextFormatting.TextRunProperties> respectivement.</span><span class="sxs-lookup"><span data-stu-id="08ad2-178">To implement custom paragraph and custom text run property types, your application must create classes that derive from <xref:System.Windows.Media.TextFormatting.TextParagraphProperties> and <xref:System.Windows.Media.TextFormatting.TextRunProperties> respectively.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="08ad2-179">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="08ad2-179">See Also</span></span>  
 [<span data-ttu-id="08ad2-180">Typographie dans WPF</span><span class="sxs-lookup"><span data-stu-id="08ad2-180">Typography in WPF</span></span>](../../../../docs/framework/wpf/advanced/typography-in-wpf.md)  
 [<span data-ttu-id="08ad2-181">Documents dans WPF</span><span class="sxs-lookup"><span data-stu-id="08ad2-181">Documents in WPF</span></span>](../../../../docs/framework/wpf/advanced/documents-in-wpf.md)
