---
title: "Résolution et publication de nom de pair"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: f0370e08-9fa6-4ee5-ab78-9a58a20a7da2
caps.latest.revision: "5"
author: mcleblanc
ms.author: markl
manager: markl
ms.openlocfilehash: 581d06930240022ae8792c02674d26491f44fa06
ms.sourcegitcommit: bd1ef61f4bb794b25383d3d72e71041a5ced172e
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/18/2017
---
# <a name="peer-name-publication-and-resolution"></a><span data-ttu-id="f9994-102">Résolution et publication de nom de pair</span><span class="sxs-lookup"><span data-stu-id="f9994-102">Peer Name Publication and Resolution</span></span>
## <a name="publishing-a-peer-name"></a><span data-ttu-id="f9994-103">Publication d’un nom de pair</span><span class="sxs-lookup"><span data-stu-id="f9994-103">Publishing a Peer Name</span></span>  
 <span data-ttu-id="f9994-104">Pour publier un nouvel ID PNRP, un pair effectue les opérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="f9994-104">To publish a new PNRP ID, a peer performs the following:</span></span>  
  
-   <span data-ttu-id="f9994-105">Il envoie des messages de publication PNRP à ses voisins du cache (les pairs dont les ID PNRP sont inscrits au niveau le plus bas du cache) pour amorcer leur cache.</span><span class="sxs-lookup"><span data-stu-id="f9994-105">Sends PNRP publication messages to its cache neighbors (the peers that have registered PNRP IDs in the lowest level of the cache) to seed their caches.</span></span>  
  
-   <span data-ttu-id="f9994-106">Il choisit de manière aléatoire des nœuds dans le cloud qui ne sont pas ses voisins et leur envoie des requêtes de résolution de nom PNRP pour son propre ID P2P.</span><span class="sxs-lookup"><span data-stu-id="f9994-106">Chooses random nodes in the cloud that are not its neighbors and sends them PNRP name resolution requests for its own P2P ID.</span></span> <span data-ttu-id="f9994-107">Le processus de détermination du point de terminaison qui en résulte amorce les caches de nœuds du cloud choisis aléatoirement avec l’ID PNRP du pair de publication.</span><span class="sxs-lookup"><span data-stu-id="f9994-107">The resulting endpoint determination process seeds the caches of random nodes in the cloud with the PNRP ID of the publishing peer.</span></span>  
  
-  
  
 <span data-ttu-id="f9994-108">Les nœuds PNRP version 2 ne publient pas les ID PNRP s’ils résolvent uniquement d’autres ID P2P.</span><span class="sxs-lookup"><span data-stu-id="f9994-108">PNRP version 2 nodes do not publish PNRP IDs if they are only resolving other P2P IDs.</span></span> <span data-ttu-id="f9994-109">La valeur de Registre HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\PeerNet\PNRP\IPV6-Global\SearchOnly=1 (type REG_DWORD) spécifie que les pairs utilisent uniquement PNRP pour la résolution de noms et jamais pour la publication de noms.</span><span class="sxs-lookup"><span data-stu-id="f9994-109">The HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\PeerNet\PNRP\IPV6-Global\SearchOnly=1 registry value (REG_DWORD type) specifies that peers only use PNRP for name resolution, never for name publication.</span></span> <span data-ttu-id="f9994-110">Cette valeur de Registre peut également être configurée via la stratégie de groupe.</span><span class="sxs-lookup"><span data-stu-id="f9994-110">This registry value can also be configured through Group Policy.</span></span>  
  
## <a name="resolving-a-peer-name"></a><span data-ttu-id="f9994-111">Résolution d’un nom de pair</span><span class="sxs-lookup"><span data-stu-id="f9994-111">Resolving a Peer Name</span></span>  
 <span data-ttu-id="f9994-112">Le processus de localisation d’autres pairs sur un réseau PNRP ou dans le cloud comprend deux phases :</span><span class="sxs-lookup"><span data-stu-id="f9994-112">Locating other peers in a PNRP network or cloud is a process comprised of two phases:</span></span>  
  
1.  <span data-ttu-id="f9994-113">Détermination du point de terminaison</span><span class="sxs-lookup"><span data-stu-id="f9994-113">Endpoint Determination</span></span>  
  
2.  <span data-ttu-id="f9994-114">Résolution de l’ID PNRP</span><span class="sxs-lookup"><span data-stu-id="f9994-114">PNRP ID Resolution</span></span>  
  
 <span data-ttu-id="f9994-115">Durant la phase de détermination du point de terminaison, un pair qui tenterait de résoudre l’ID PNRP d’un service sur un autre ordinateur va déterminer l’adresse IPv6 de ce pair distant.</span><span class="sxs-lookup"><span data-stu-id="f9994-115">In the endpoint determination phase, a peer that is attempting to resolve the PNRP ID of a service on another computer determines the IPv6 address of that remote peer.</span></span>  <span data-ttu-id="f9994-116">Le pair distant est celui qui a publié l’ID PNRP de l’ordinateur ou du service, ou qui est associé à cet ID.</span><span class="sxs-lookup"><span data-stu-id="f9994-116">The remote peer is the one that published, or is associated with, the PNRP ID of the computer or service.</span></span>  
  
 <span data-ttu-id="f9994-117">Après avoir vérifié que le point de terminaison distant a été inscrit dans le cloud PNRP, le pair qui a effectué une demande durant la phase de résolution de l’ID PNRP envoie une demande au point de terminaison pour connaître l’ID PNRP du service souhaité.</span><span class="sxs-lookup"><span data-stu-id="f9994-117">After confirming that the remote endpoint has been registered into the PNRP cloud, the requesting peer in the PNRP ID resolution phase sends a request to that peer endpoint for the PNRP ID of the desired service.</span></span> <span data-ttu-id="f9994-118">Le point de terminaison envoie une réponse confirmant l’ID PNRP du service, un commentaire, et jusqu’à 4 Ko d’informations supplémentaires, que le pair à l’origine de la demande peut utiliser pour de futures communications.</span><span class="sxs-lookup"><span data-stu-id="f9994-118">The endpoint sends a reply confirming the PNRP ID of the service, a comment, and up to 4 kilobytes of additional information that the requesting peer can use for future communication.</span></span> <span data-ttu-id="f9994-119">Par exemple, si le point de terminaison souhaité est un serveur de jeu, les données d’enregistrement de nom de pair supplémentaires peuvent contenir des informations sur le jeu, le niveau du jeu et le nombre actuel de joueurs.</span><span class="sxs-lookup"><span data-stu-id="f9994-119">For example, if the desired endpoint is a gaming server, the additional peer name record data can contain information about the game, the level of play, and the current number of players.</span></span>  
  
 <span data-ttu-id="f9994-120">Dans la phase de détermination du point de terminaison, PNRP utilise un processus itératif pour localiser le nœud qui a publié l’ID PNRP. Durant ce processus, le nœud qui effectue la résolution est chargé de contacter les nœuds qui sont successivement les plus proches de l’ID PNRP cible.</span><span class="sxs-lookup"><span data-stu-id="f9994-120">In the endpoint determination phase, PNRP uses an iterative process for locating the node that published the PNRP ID, in which the node performing the resolution is responsible for contacting nodes that are successively closer to the target PNRP ID.</span></span>  
  
 <span data-ttu-id="f9994-121">Pour effectuer la résolution de noms dans PNRP, le pair recherche dans les entrées de son propre cache une entrée correspondant à l’ID PNRP cible.</span><span class="sxs-lookup"><span data-stu-id="f9994-121">To perform name resolution in PNRP, the peer examines the entries in its own cache for an entry that matches the target PNRP ID.</span></span> <span data-ttu-id="f9994-122">S’il en trouve une, le pair envoie un message de demande PNRP au pair et attend une réponse.</span><span class="sxs-lookup"><span data-stu-id="f9994-122">If found, the peer sends a PNRP Request message to the peer and waits for a response.</span></span> <span data-ttu-id="f9994-123">Si aucune entrée d’ID PNRP n’est trouvée, le pair envoie un message de demande PNRP au pair qui correspond à l’entrée dont l’ID PNRP est la plus proche de l’ID PNRP cible.</span><span class="sxs-lookup"><span data-stu-id="f9994-123">If an entry for the PNRP ID is not found, the peer sends a PNRP Request message to the peer that corresponds to the entry that has a PNRP ID that most closely matches the target PNRP ID.</span></span> <span data-ttu-id="f9994-124">Le nœud qui reçoit le message de demande PNRP examine son propre cache et effectue les opérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="f9994-124">The node that receives the PNRP Request message examines its own cache and does the following:</span></span>  
  
-   <span data-ttu-id="f9994-125">Si l’ID PNRP est trouvé, le pair de point de terminaison qui a reçu la demande répond directement au pair qui a effectué la demande.</span><span class="sxs-lookup"><span data-stu-id="f9994-125">If the PNRP ID is found, the requested endpoint peer replies directly to the requesting peer.</span></span>  
  
-   <span data-ttu-id="f9994-126">Si l’ID PNRP n’est pas trouvé, et qu’un ID PNRP du cache est proche de l’ID PNRP cible, le pair qui a reçu la demande envoie au pair demandeur une réponse contenant l’adresse IPv6 du pair dont l’ID PNRP est le plus proche de l’ID PNRP cible.</span><span class="sxs-lookup"><span data-stu-id="f9994-126">If the PNRP ID is not found and a PNRP ID in the cache is closer to the target PNRP ID, the requested peer sends a response to the requesting peer containing the IPv6 address of the peer that represents the entry with a PNRP ID that more closely matches the target PNRP ID.</span></span> <span data-ttu-id="f9994-127">À l’aide de l’adresse IP fournie dans la réponse, le nœud demandeur envoie un autre message PNRP à l’adresse IPv6 pour demander une réponse ou l’autorisation d’examiner son cache.</span><span class="sxs-lookup"><span data-stu-id="f9994-127">Using the IP address in the response, the requesting node sends another PNRP Request message to the IPv6 address to respond or examine its cache.</span></span>  
  
-   <span data-ttu-id="f9994-128">Si l’ID PNRP n’est pas trouvé, et si aucun des ID PNRP du cache n’est proche du ID PNRP cible, le pair qui reçoit la demande envoie au pair demandeur une réponse indiquant cette condition.</span><span class="sxs-lookup"><span data-stu-id="f9994-128">If the PNRP ID is not found and there is no PNRP ID in its cache that is closer to the target PNRP ID, the requested peer sends the requesting peer a response that indicates this condition.</span></span> <span data-ttu-id="f9994-129">Le pair demandeur choisit alors l’ID PNRP le plus proche.</span><span class="sxs-lookup"><span data-stu-id="f9994-129">The requesting peer then chooses the next-closest PNRP ID.</span></span>  
  
-  
  
 <span data-ttu-id="f9994-130">Le pair demandeur continue ce processus avec des itérations successives dans le but de localiser le nœud qui a inscrit l’ID PNRP.</span><span class="sxs-lookup"><span data-stu-id="f9994-130">The requesting peer continues this process with successive iterations, eventually locating the node that registered the PNRP ID.</span></span>  
  
 <span data-ttu-id="f9994-131">Dans l’espace de noms <xref:System.Net.PeerToPeer>, il existe une relation plusieurs-à-plusieurs entre les enregistrements <xref:System.Net.PeerToPeer.PeerName> qui contiennent les points de terminaison, et les clouds PNRP ou les mailles avec lesquels ils communiquent.</span><span class="sxs-lookup"><span data-stu-id="f9994-131">Within the <xref:System.Net.PeerToPeer> namespace, there is a many-to-many relationship between the <xref:System.Net.PeerToPeer.PeerName> records that contain endpoints and PNRP clouds or meshes in which they communicate.</span></span> <span data-ttu-id="f9994-132">Lorsqu’il y a des entrées obsolètes ou en double, ou plusieurs nœuds portant le même nom de pair, les nœuds PNRP peuvent obtenir des informations actuelles à l’aide de la classe <xref:System.Net.PeerToPeer.PeerNameResolver>.</span><span class="sxs-lookup"><span data-stu-id="f9994-132">When there are duplicate or stale entries, or multiple nodes with the same peer name, PNRP nodes can obtain current information using the <xref:System.Net.PeerToPeer.PeerNameResolver> class.</span></span> <span data-ttu-id="f9994-133">Les méthodes <xref:System.Net.PeerToPeer.PeerNameResolver> utilisent un seul nom de pair pour simplifier les enregistrements de noms de pairs : de un à plusieurs pairs et d’un pair à plusieurs clouds.</span><span class="sxs-lookup"><span data-stu-id="f9994-133">The <xref:System.Net.PeerToPeer.PeerNameResolver> methods use a single peer name to simplify the perspective to one peer-to-many peer name records and the same one peer to many clouds.</span></span> <span data-ttu-id="f9994-134">Ceci est similaire à une requête effectuée à l’aide d’une jointure de table relationnelle.</span><span class="sxs-lookup"><span data-stu-id="f9994-134">This is similar to a query performed using a relational-table join.</span></span> <span data-ttu-id="f9994-135">Lorsque vous avez terminé, l’objet Resolver retourne un <xref:System.Net.PeerToPeer.PeerNameRecordCollection> pour le nom de pair spécifié.</span><span class="sxs-lookup"><span data-stu-id="f9994-135">Upon successful completion, the Resolver object returns a <xref:System.Net.PeerToPeer.PeerNameRecordCollection> for the specified peer name.</span></span>  <span data-ttu-id="f9994-136">Par exemple, un nom de pair peut apparaître dans tous les enregistrements de noms de pairs de la collection, qui sont classés par cloud.</span><span class="sxs-lookup"><span data-stu-id="f9994-136">For example, a peer name would occur in all the peer name records in the collection, ordered by cloud.</span></span> <span data-ttu-id="f9994-137">Il s’agit là des instances du nom de pair dont les données prises en charge peuvent être demandées par une application PNRP.</span><span class="sxs-lookup"><span data-stu-id="f9994-137">These are the instances of the peer name whose supporting data may be requested by a PNRP-based application.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="f9994-138">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="f9994-138">See Also</span></span>  
 <xref:System.Net.PeerToPeer>
