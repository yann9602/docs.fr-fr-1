---
title: Caches PNRP
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 270068d9-1b6b-4eb9-9e14-e02326bb88df
caps.latest.revision: "4"
author: mcleblanc
ms.author: markl
manager: markl
ms.openlocfilehash: 919a789b1ae3e5900fe8bd79f5c8b127d81bb2e0
ms.sourcegitcommit: bd1ef61f4bb794b25383d3d72e71041a5ced172e
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/18/2017
---
# <a name="pnrp-caches"></a><span data-ttu-id="b4db9-102">Caches PNRP</span><span class="sxs-lookup"><span data-stu-id="b4db9-102">PNRP Caches</span></span>
<span data-ttu-id="b4db9-103">Les caches PNRP sont des collections locales de points de terminaison sélectionnés par algorithme et conservés dans un pair.</span><span class="sxs-lookup"><span data-stu-id="b4db9-103">Peer Name Resolution Protocol (PNRP) caches are local collections of algorithmically selected peer endpoints maintained on the peer.</span></span>  
  
## <a name="pnrp-cache-initialization"></a><span data-ttu-id="b4db9-104">Initialisation du cache PNRP</span><span class="sxs-lookup"><span data-stu-id="b4db9-104">PNRP Cache Initialization</span></span>  
 <span data-ttu-id="b4db9-105">Pour initialiser le cache PNRP ou la collection d’enregistrements de noms de pairs, au démarrage d’un nœud pair, utilisez l’une des méthodes suivantes :</span><span class="sxs-lookup"><span data-stu-id="b4db9-105">To initialize the PNRP cache, or Peer Name Record Collection, when a peer node starts up, a node can use the following methods:</span></span>  
  
-   <span data-ttu-id="b4db9-106">Les entrées du cache permanent qui étaient présentes lorsque le nœud a été arrêté sont chargées à partir du disque dur de stockage.</span><span class="sxs-lookup"><span data-stu-id="b4db9-106">Persistent cache entries that were present when the node was shut down are loaded from hard disk storage.</span></span>  
  
-   <span data-ttu-id="b4db9-107">Si une application utilise l’infrastructure de collaboration P2P, les informations de collaboration sont disponibles dans le gestionnaire de contacts de ce nœud.</span><span class="sxs-lookup"><span data-stu-id="b4db9-107">If an application uses the P2P collaboration infrastructure, collaboration information is available in the Contact Manager for that node.</span></span>  
  
## <a name="scaling-peer-name-resolution-with-a-multi-level-cache"></a><span data-ttu-id="b4db9-108">Mise à l’échelle de la résolution de noms de pairs avec un cache à plusieurs niveaux</span><span class="sxs-lookup"><span data-stu-id="b4db9-108">Scaling Peer Name Resolution with a Multi-Level Cache</span></span>  
 <span data-ttu-id="b4db9-109">Pour minimiser la taille des caches PNRP, les nœuds pairs utilisent un cache à plusieurs niveaux, dans lequel chaque niveau contient un nombre maximal d’entrées.</span><span class="sxs-lookup"><span data-stu-id="b4db9-109">To keep the sizes of the PNRP caches small, peer nodes use a multi-level cache, in which each level contains a maximum number of entries.</span></span> <span data-ttu-id="b4db9-110">Chaque niveau du cache représente un dixième de l’espace de nombre des ID PNRP (2<sup>256</sup>).</span><span class="sxs-lookup"><span data-stu-id="b4db9-110">Each level in the cache represents a one tenth smaller portion of the PNRP ID number space (2<sup>256</sup>).</span></span> <span data-ttu-id="b4db9-111">Le niveau le plus bas du cache contient un ID PNRP inscrit localement et d’autres ID PNRP qui sont numériquement proches de lui.</span><span class="sxs-lookup"><span data-stu-id="b4db9-111">The lowest level in the cache contains a locally registered PNRP ID and other PNRP IDs that are numerically close to it.</span></span> <span data-ttu-id="b4db9-112">Étant donné qu’un niveau de cache comprend un maximum de 20 entrées, un niveau inférieur est créé.</span><span class="sxs-lookup"><span data-stu-id="b4db9-112">As a level of the cache is filled with a maximum of 20 entries, a new lower level is created.</span></span> <span data-ttu-id="b4db9-113">Le nombre maximal de niveaux du cache est en base 10 (nombre total d’ID PNRP dans le cloud).</span><span class="sxs-lookup"><span data-stu-id="b4db9-113">The maximum number of levels in the cache is on the order of log10(Total number of PNRP IDs in the cloud).</span></span> <span data-ttu-id="b4db9-114">Par exemple, pour un cloud global comprenant 100 millions d’ID PNRP, le cache comprend seulement 8 niveaux (=log10(100 000 000)) et un nombre similaire de tronçons pour résoudre un ID PNRP lors de la résolution de noms.</span><span class="sxs-lookup"><span data-stu-id="b4db9-114">For example, for a global cloud with 100 million PNRP IDs, there are no more than 8 (=log10(100,000,000)) levels in the cache and a similar number of hops to resolve a PNRP ID during name resolution.</span></span> <span data-ttu-id="b4db9-115">Ce mécanisme permet l’utilisation d’une table de hachage distribuée pour laquelle un ID PNRP arbitraire peut être résolu en transférant des requêtes PNRP au pair le plus proche, jusqu’à ce que le pair avec l’adresse pair certifiée correspondante soit trouvé.</span><span class="sxs-lookup"><span data-stu-id="b4db9-115">This mechanism allows for a distributed hash table for which an arbitrary PNRP ID can be resolved by forwarding PNRP Request messages to the next-closest peer until the peer with the corresponding CPA is found.</span></span>  
  
 <span data-ttu-id="b4db9-116">Pour vérifier que la résolution peut s’effectuer, chaque fois qu’un nœud ajoute une entrée au niveau le plus bas de son cache, il transmet une copie de l’entrée à tous les nœuds du dernier niveau du cache.</span><span class="sxs-lookup"><span data-stu-id="b4db9-116">To ensure that resolution can complete, each time a node adds an entry to the lowest level of its cache, it floods a copy of the entry to all the nodes within the last level of the cache.</span></span>  
  
 <span data-ttu-id="b4db9-117">Les entrées du cache sont actualisées au fur et à mesure.</span><span class="sxs-lookup"><span data-stu-id="b4db9-117">The cache entries are refreshed over time.</span></span> <span data-ttu-id="b4db9-118">Les entrées du cache qui sont périmées sont supprimées du cache.</span><span class="sxs-lookup"><span data-stu-id="b4db9-118">Cache entries that are stale are removed from the cache.</span></span> <span data-ttu-id="b4db9-119">De cette façon, la table de hachage distribuée comprenant les ID PNRP est basée sur des points de terminaison actifs, contrairement au DNS dont les enregistrements d’adresses et le protocole ne fournissent aucune garantie que le nœud associé à l’adresse est actif sur le réseau.</span><span class="sxs-lookup"><span data-stu-id="b4db9-119">The result is that the distributed hash table of PNRP IDs is based on active endpoints, unlike DNS in which address records and the DNS protocol provide no guarantee that the node associated with the address is actively on the network.</span></span>  
  
## <a name="other-pnrp-caches"></a><span data-ttu-id="b4db9-120">Autres caches PNRP</span><span class="sxs-lookup"><span data-stu-id="b4db9-120">Other PNRP Caches</span></span>  
 <span data-ttu-id="b4db9-121">Le cache local est un autre exemple de magasin de données persistantes.</span><span class="sxs-lookup"><span data-stu-id="b4db9-121">Another persistent data store is the local cache.</span></span>  <span data-ttu-id="b4db9-122">Outre les objets nécessaires à l’activité PNRP, il peut inclure des enregistrements associés à un cloud PNRP ou à une session de collaboration publiés de manière sécurisée et synchronisés entre tous les membres du cloud.</span><span class="sxs-lookup"><span data-stu-id="b4db9-122">In addition to the other objects needed for PNRP activity, it may include the records associated with a PNRP cloud or collaboration session that is securely published and synchronized between all the members of the cloud.</span></span> <span data-ttu-id="b4db9-123">Ce magasin répliqué représente la vue des données du groupe, qui doit être la même pour tous les membres du groupe.</span><span class="sxs-lookup"><span data-stu-id="b4db9-123">This replicated store represents the view of the group data, which should be the same for all group members.</span></span> <span data-ttu-id="b4db9-124">Techniquement, ces objets ne sont pas vraiment des enregistrements, mais plutôt des données d’application, de présence et d’objets destinées à un cache local.</span><span class="sxs-lookup"><span data-stu-id="b4db9-124">Technically, these objects are not records per se, but rather application, presence, and object data destined for a local cache.</span></span> <span data-ttu-id="b4db9-125">L’utilisation du cloud PNRP permet de garantir que les objets seront propagés vers tous les nœuds de la session de collaboration ou du cloud PNRP.</span><span class="sxs-lookup"><span data-stu-id="b4db9-125">Use of the PNRP cloud ensures that objects are propagated to all nodes in the collaboration session or PNRP cloud.</span></span>  <span data-ttu-id="b4db9-126">La réplication des enregistrements entre les membres du cloud utilise le protocole SSL pour le chiffrement et l’intégrité des données.</span><span class="sxs-lookup"><span data-stu-id="b4db9-126">Record replication between cloud members uses SSL to provide encryption and data integrity.</span></span>  
  
 <span data-ttu-id="b4db9-127">Lorsqu’un pair rejoint un cloud, il ne reçoit pas automatiquement les données du cache local de l’hôte pair auquel il est attaché. Il doit s’abonner à l’hôte pair pour recevoir les mises à jour des données d’application, de présence et d’objet.</span><span class="sxs-lookup"><span data-stu-id="b4db9-127">When a peer joins a cloud, they do not automatically receive local cache data from the host peer to which they attach; they have to subscribe to the host peer to receive updates in application, presence, and object data.</span></span> <span data-ttu-id="b4db9-128">Après la première synchronisation, les pairs resynchronisent régulièrement leurs magasins répliqués pour garantir que tous les membres du groupe disposent de la même vue.</span><span class="sxs-lookup"><span data-stu-id="b4db9-128">After the initial synchronization, peers periodically resynchronize their replicated stores to ensure that all group members consistently have the same view.</span></span>  <span data-ttu-id="b4db9-129">La session de collaboration ou les applications qu’elle contient peuvent servir la même fonction.</span><span class="sxs-lookup"><span data-stu-id="b4db9-129">The collaboration session or applications within the collaboration session may also perform the same function.</span></span>  
  
 <span data-ttu-id="b4db9-130">Après le démarrage d’une session de collaboration dans le cloud, les applications peuvent inscrire des pairs et commencer à publier leurs informations à l’aide de la stratégie de sécurité définie par l’étendue du cloud.</span><span class="sxs-lookup"><span data-stu-id="b4db9-130">After a collaboration session has begun for a cloud, applications can register peers and begin publishing their information using the security defined by the cloud scope.</span></span> <span data-ttu-id="b4db9-131">Lorsqu’un pair rejoint un cloud, les mécanismes de sécurité du cloud sont appliqués au pair, et celui-ci se voit attribuer une étendue dans laquelle participer.</span><span class="sxs-lookup"><span data-stu-id="b4db9-131">When a peer joins a cloud, the security mechanisms for the cloud are applied to the peer, giving it a scope in which to participate.</span></span>  <span data-ttu-id="b4db9-132">Ses enregistrements peuvent ensuite être publiés en toute sécurité dans l’étendue du cloud.</span><span class="sxs-lookup"><span data-stu-id="b4db9-132">Its records can then be published securely within the scope of the cloud.</span></span> <span data-ttu-id="b4db9-133">Notez que l’étendue du cloud peut ne pas être la même que celle de l’application de collaboration.</span><span class="sxs-lookup"><span data-stu-id="b4db9-133">Note that cloud scope may not be the same as collaboration application scope.</span></span>  
  
 <span data-ttu-id="b4db9-134">Les pairs peuvent s’inscrire pour recevoir des objets provenant d’autres pairs.</span><span class="sxs-lookup"><span data-stu-id="b4db9-134">Peers can register interest in receiving objects from other peers.</span></span> <span data-ttu-id="b4db9-135">Lorsqu’un objet est mis à jour, l’application de collaboration en est informée et le nouvel objet est passé à tous les abonnés de l’application.</span><span class="sxs-lookup"><span data-stu-id="b4db9-135">When an object is updated, the collaboration application is notified and the new object is passed to all subscribers of the application.</span></span> <span data-ttu-id="b4db9-136">Par exemple, un pair d’une application de discussion de groupe peut s’inscrire pour recevoir les informations de l’application. Il va alors recevoir tous les enregistrements de discussions sous forme de données d’application,</span><span class="sxs-lookup"><span data-stu-id="b4db9-136">For example, a peer in a group chat application can register interest in receiving application information, which will send it all chat records as application data.</span></span>  <span data-ttu-id="b4db9-137">ce qui lui permettra de surveiller l’activité de discussion dans le cloud.</span><span class="sxs-lookup"><span data-stu-id="b4db9-137">This allows it to monitor chat activity within the cloud.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="b4db9-138">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="b4db9-138">See Also</span></span>  
 <xref:System.Net.PeerToPeer>
