---
title: "Matérialisation d'objet (services de données WCF)"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework-oob
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- WCF Data Services, client library
- WCF Data Services, querying
ms.assetid: f0dbf7b0-0292-4e31-9ae4-b98288336dc1
caps.latest.revision: "4"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: a8f20023e158b388ddd71e518ebcaa48c214252c
ms.sourcegitcommit: ce279f2d7fe2220e6ea0a25a8a7a5370ddf8d9f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 12/02/2017
---
# <a name="object-materialization-wcf-data-services"></a><span data-ttu-id="aa662-102">Matérialisation d'objet (services de données WCF)</span><span class="sxs-lookup"><span data-stu-id="aa662-102">Object Materialization (WCF Data Services)</span></span>
<span data-ttu-id="aa662-103">Lorsque vous utilisez la **ajouter une référence de Service** boîte de dialogue pour consommer un [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] de flux dans une application cliente .NET Framework, les classes de données équivalentes sont générées pour chaque type d’entité dans le modèle de données exposé par le flux.</span><span class="sxs-lookup"><span data-stu-id="aa662-103">When you use the **Add Service Reference** dialog to consume an [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] feed in a .NET Framework-based client application, equivalent data classes are generated for each entity type in the data model exposed by the feed.</span></span> <span data-ttu-id="aa662-104">Pour plus d’informations, consultez [génération de la bibliothèque de Client de Service de données](../../../../docs/framework/data/wcf/generating-the-data-service-client-library-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="aa662-104">For more information, see [Generating the Data Service Client Library](../../../../docs/framework/data/wcf/generating-the-data-service-client-library-wcf-data-services.md).</span></span> <span data-ttu-id="aa662-105">Les données d'entité retournées par une requête sont matérialisées dans une instance de l'une de ces classes de service de données client générées.</span><span class="sxs-lookup"><span data-stu-id="aa662-105">Entity data that is returned by a query is materialized into an instance of one of these generated client data service classes.</span></span> <span data-ttu-id="aa662-106">Pour plus d’informations sur les options de fusion et résolution d’identité pour les objets suivis, consultez [gérer le contexte de Service de données](../../../../docs/framework/data/wcf/managing-the-data-service-context-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="aa662-106">For information about merge options and identity resolution for tracked objects, see [Managing the Data Service Context](../../../../docs/framework/data/wcf/managing-the-data-service-context-wcf-data-services.md).</span></span>  
  
 [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)]<span data-ttu-id="aa662-107"> vous permet également de définir vos propres classes de service de données client plutôt que d'utiliser les classes de données générées par outil.</span><span class="sxs-lookup"><span data-stu-id="aa662-107"> also enables you to define your own client data service classes rather than using the tool-generated data classes.</span></span> <span data-ttu-id="aa662-108">Cela vous permet d'utiliser vos propres classes de données, également appelées classes de données POCO (plain-old CLR object).</span><span class="sxs-lookup"><span data-stu-id="aa662-108">This enables you to use your own data classes, also known as "plain-old CLR object" (POCO) data classes.</span></span> <span data-ttu-id="aa662-109">Lorsque vous utilisez ces types de classes de données personnalisées, vous devez attribuer à la classe de données avec l’option <xref:System.Data.Services.Common.DataServiceKeyAttribute> ou <xref:System.Data.Services.Common.DataServiceEntityAttribute> et assurez-vous que les noms de type sur les noms de type de correspondance de client dans le modèle de données du service de données.</span><span class="sxs-lookup"><span data-stu-id="aa662-109">When using these types of custom data classes, you should attribute the data class with either <xref:System.Data.Services.Common.DataServiceKeyAttribute> or <xref:System.Data.Services.Common.DataServiceEntityAttribute> and ensure that type names on the client match type names in the data model of the data service.</span></span>  
  
 <span data-ttu-id="aa662-110">Une fois que la bibliothèque reçoit le message de réponse de requête, elle matérialise les données retournées à partir de la [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] flux dans les instances de données client, les classes de service sont du type de la requête.</span><span class="sxs-lookup"><span data-stu-id="aa662-110">After the library receives the query response message, it materializes the returned data from the [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] feed into instances of client data service classes that are of the type of the query.</span></span> <span data-ttu-id="aa662-111">Le processus général pour matérialiser ces objets est le suivant :</span><span class="sxs-lookup"><span data-stu-id="aa662-111">The general process for materializing these objects is as follows:</span></span>  
  
1.  <span data-ttu-id="aa662-112">La bibliothèque cliente lit le type sérialisé de l'élément `entry` dans le flux du message de réponse et tente de créer une nouvelle instance du type correct, de l'une des manières suivantes :</span><span class="sxs-lookup"><span data-stu-id="aa662-112">The client library reads the serialized type from the `entry` element in the response message feed and attempts to create a new instance of the correct type, in one of the following ways:</span></span>  
  
    -   <span data-ttu-id="aa662-113">Lorsque le type déclaré dans le flux a le même nom que le type <xref:System.Data.Services.Client.DataServiceQuery%601>, une nouvelle instance de ce type est créée à l'aide du constructeur vide.</span><span class="sxs-lookup"><span data-stu-id="aa662-113">When the type declared in the feed has the same name as the type of the <xref:System.Data.Services.Client.DataServiceQuery%601>, a new instance of this type is created by using the empty constructor.</span></span>  
  
    -   <span data-ttu-id="aa662-114">Lorsque le type déclaré dans le flux a le même nom qu'un type dérivé du type <xref:System.Data.Services.Client.DataServiceQuery%601>, une nouvelle instance de ce type dérivé est créée à l'aide du constructeur vide.</span><span class="sxs-lookup"><span data-stu-id="aa662-114">When the type declared in the feed has the same name as a type that is derived from the type of the <xref:System.Data.Services.Client.DataServiceQuery%601>, a new instance of this derived type is created by using the empty constructor.</span></span>  
  
    -   <span data-ttu-id="aa662-115">Lorsque le type déclaré dans le flux ne correspond pas au type <xref:System.Data.Services.Client.DataServiceQuery%601> ou à tout type dérivé, une nouvelle instance du type demandé est créée à l'aide du constructeur vide.</span><span class="sxs-lookup"><span data-stu-id="aa662-115">When the type declared in the feed cannot be matched to the type of the <xref:System.Data.Services.Client.DataServiceQuery%601> or any derived types, a new instance of the queried type is created by using the empty constructor.</span></span>  
  
    -   <span data-ttu-id="aa662-116">Lorsque la propriété <xref:System.Data.Services.Client.DataServiceContext.ResolveType%2A> est définie, le délégué fourni est appelé pour remplacer le mappage du type basé sur le nom par défaut et une nouvelle instance du type retourné par <xref:System.Func%602> est créée à la place.</span><span class="sxs-lookup"><span data-stu-id="aa662-116">When the <xref:System.Data.Services.Client.DataServiceContext.ResolveType%2A> property is set, the supplied delegate is called to override the default name-based type mapping and a new instance of the type returned by the <xref:System.Func%602> is created instead.</span></span> <span data-ttu-id="aa662-117">Si ce délégué retourne une valeur Null, une nouvelle instance du type demandé est créée à la place.</span><span class="sxs-lookup"><span data-stu-id="aa662-117">If this delegate returns a null value, a new instance of the queried type is created instead.</span></span> <span data-ttu-id="aa662-118">Il se peut que vous deviez remplacer le mappage du nom du type basé sur le nom par défaut qui prend en charge les scénarios d'héritage.</span><span class="sxs-lookup"><span data-stu-id="aa662-118">It may be required to override the default name-based type name mapping to support inheritance scenarios.</span></span>  
  
2.  <span data-ttu-id="aa662-119">La bibliothèque cliente lit la valeur URI de l'élément `id` de `entry`, qui est la valeur d'identité de l'entité.</span><span class="sxs-lookup"><span data-stu-id="aa662-119">The client library reads the URI value from the `id` element of the `entry`, which is the identity value of the entity.</span></span> <span data-ttu-id="aa662-120">À moins qu'une valeur <xref:System.Data.Services.Client.DataServiceContext.MergeOption%2A> de <xref:System.Data.Services.Client.MergeOption.NoTracking> soit utilisée, la valeur d'identité est utilisée pour suivre l'objet dans <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="aa662-120">Unless a <xref:System.Data.Services.Client.DataServiceContext.MergeOption%2A> value of <xref:System.Data.Services.Client.MergeOption.NoTracking> is used, the identity value is used to track the object in the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="aa662-121">La valeur d'identité est également utilisée pour garantir que seule une instance d'entité est créée, même lorsqu'une entité est retournée plusieurs fois dans la réponse à la requête.</span><span class="sxs-lookup"><span data-stu-id="aa662-121">The identity value is also used to guarantee that only a single entity instance is created, even when an entity is returned multiple times in the query response.</span></span>  
  
3.  <span data-ttu-id="aa662-122">La bibliothèque cliente lit les propriétés de l'entrée de flux et définit les propriétés correspondantes sur l'objet créé.</span><span class="sxs-lookup"><span data-stu-id="aa662-122">The client library reads properties from the feed entry and set the corresponding properties on the newly created object.</span></span> <span data-ttu-id="aa662-123">Lorsqu'un objet qui a la même valeur d'identité existe déjà dans <xref:System.Data.Services.Client.DataServiceContext>, les propriétés sont définies selon le paramètre <xref:System.Data.Services.Client.MergeOption> de <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="aa662-123">When an object that has the same identity value already occurs in the <xref:System.Data.Services.Client.DataServiceContext>, the properties are set based on the <xref:System.Data.Services.Client.MergeOption> setting of the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="aa662-124">La réponse peut contenir des valeurs de propriété qui n'ont pas de propriété correspondante dans le type de client.</span><span class="sxs-lookup"><span data-stu-id="aa662-124">The response might contain property values for which a corresponding property does not occur in the client type.</span></span> <span data-ttu-id="aa662-125">Dans ce cas, l'action dépend de la valeur de la propriété <xref:System.Data.Services.Client.DataServiceContext.IgnoreMissingProperties%2A> de <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="aa662-125">When this occurs, the action depends on the value of the <xref:System.Data.Services.Client.DataServiceContext.IgnoreMissingProperties%2A> property of the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="aa662-126">Lorsque cette propriété est définie sur `true`, la propriété manquante est ignorée.</span><span class="sxs-lookup"><span data-stu-id="aa662-126">When this property is set to `true`, the missing property is ignored.</span></span> <span data-ttu-id="aa662-127">Sinon, une erreur est générée.</span><span class="sxs-lookup"><span data-stu-id="aa662-127">Otherwise, an error is raised.</span></span> <span data-ttu-id="aa662-128">Les propriétés sont définies comme suit :</span><span class="sxs-lookup"><span data-stu-id="aa662-128">Properties are set as follows:</span></span>  
  
    -   <span data-ttu-id="aa662-129">Les propriétés scalaires sont définies sur la valeur correspondante dans l'entrée dans le message de réponse.</span><span class="sxs-lookup"><span data-stu-id="aa662-129">Scalar properties are set to the corresponding value in the entry in the response message.</span></span>  
  
    -   <span data-ttu-id="aa662-130">Les propriétés complexes sont définies sur une nouvelle instance de type complexe, définie avec les propriétés du type complexe de la réponse.</span><span class="sxs-lookup"><span data-stu-id="aa662-130">Complex properties are set to a new complex type instance, which are set with the properties of the complex type from the response.</span></span>  
  
    -   <span data-ttu-id="aa662-131">Les propriétés de navigation qui retournent une collection d'entités associées sont définies sur une instance nouvelle ou existante de <xref:System.Collections.Generic.ICollection%601>, où `T` est le type d'entité associée.</span><span class="sxs-lookup"><span data-stu-id="aa662-131">Navigation properties that return a collection of related entities are set to a new or existing instance of <xref:System.Collections.Generic.ICollection%601>, where `T` is the type of the related entity.</span></span> <span data-ttu-id="aa662-132">Cette collection est vide à moins que les objets connexes aient été chargés dans <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="aa662-132">This collection is empty unless the related objects have been loaded into the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="aa662-133">Pour plus d’informations, consultez [chargement différé contenu](../../../../docs/framework/data/wcf/loading-deferred-content-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="aa662-133">For more information, see [Loading Deferred Content](../../../../docs/framework/data/wcf/loading-deferred-content-wcf-data-services.md).</span></span>  
  
        > [!NOTE]
        >  <span data-ttu-id="aa662-134">Lorsque les classes de données clientes générées prennent en charge la liaison de données, les propriétés de navigation retournent des instances de la classe <xref:System.Data.Services.Client.DataServiceCollection%601> à la place.</span><span class="sxs-lookup"><span data-stu-id="aa662-134">When the generated client data classes support data binding, navigation properties return instances of the <xref:System.Data.Services.Client.DataServiceCollection%601> class instead.</span></span> <span data-ttu-id="aa662-135">Pour plus d’informations, consultez [liaison de données aux contrôles](../../../../docs/framework/data/wcf/binding-data-to-controls-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="aa662-135">For more information, see [Binding Data to Controls](../../../../docs/framework/data/wcf/binding-data-to-controls-wcf-data-services.md).</span></span>  
  
4.  <span data-ttu-id="aa662-136">L'événement <xref:System.Data.Services.Client.DataServiceContext.ReadingEntity> est déclenché.</span><span class="sxs-lookup"><span data-stu-id="aa662-136">The <xref:System.Data.Services.Client.DataServiceContext.ReadingEntity> event is raised.</span></span>  
  
5.  <span data-ttu-id="aa662-137">La bibliothèque cliente joint l'objet à <xref:System.Data.Services.Client.DataServiceContext>.</span><span class="sxs-lookup"><span data-stu-id="aa662-137">The client library attaches the object to the <xref:System.Data.Services.Client.DataServiceContext>.</span></span> <span data-ttu-id="aa662-138">L'objet n'est pas joint quand <xref:System.Data.Services.Client.MergeOption> est <xref:System.Data.Services.Client.MergeOption.NoTracking>.</span><span class="sxs-lookup"><span data-stu-id="aa662-138">The object is not attached when the <xref:System.Data.Services.Client.MergeOption> is <xref:System.Data.Services.Client.MergeOption.NoTracking>.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="aa662-139">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="aa662-139">See Also</span></span>  
 [<span data-ttu-id="aa662-140">Interrogation du service de données</span><span class="sxs-lookup"><span data-stu-id="aa662-140">Querying the Data Service</span></span>](../../../../docs/framework/data/wcf/querying-the-data-service-wcf-data-services.md)  
 [<span data-ttu-id="aa662-141">Projections de requête</span><span class="sxs-lookup"><span data-stu-id="aa662-141">Query Projections</span></span>](../../../../docs/framework/data/wcf/query-projections-wcf-data-services.md)
