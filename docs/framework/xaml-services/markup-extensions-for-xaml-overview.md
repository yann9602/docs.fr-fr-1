---
title: "Vue d’ensemble des extensions de balisage pour XAML"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-wpf
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- markup extensions [XAML Services], custom
- XAML [XAML Services], markup extensions
ms.assetid: 261b2b11-2dc0-462f-8c66-55b8c9c6e436
caps.latest.revision: "14"
author: wadepickett
ms.author: wpickett
manager: wpickett
ms.openlocfilehash: faa74e982fb114d041468c53dde2f978bb3faa35
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/21/2017
---
# <a name="markup-extensions-for-xaml-overview"></a><span data-ttu-id="97e88-102">Vue d’ensemble des extensions de balisage pour XAML</span><span class="sxs-lookup"><span data-stu-id="97e88-102">Markup Extensions for XAML Overview</span></span>
<span data-ttu-id="97e88-103">Les extensions de balisage constituent une technique XAML permettant d'obtenir une valeur qui n'est ni une primitive ni un type XAML spécifique.</span><span class="sxs-lookup"><span data-stu-id="97e88-103">Markup extensions are a XAML technique for obtaining a value that is neither a primitive nor a specific XAML type.</span></span> <span data-ttu-id="97e88-104">Pour l'utilisation d'attributs, les extensions de balisage utilisent la séquence de caractères connue d'une accolade ouvrante `{` pour entrer la portée d'extension de balisage et d'une accolade fermante `}` pour quitter.</span><span class="sxs-lookup"><span data-stu-id="97e88-104">For attribute usage, markup extensions use the known character sequence of an opening curly brace `{` to enter the markup extension scope, and a closing curly brace `}` to exit.</span></span> <span data-ttu-id="97e88-105">Lors de l'utilisation des services XAML .NET Framework, vous pouvez utiliser certaines des extensions de balisage prédéfinies du langage XAML à partir de l'assembly System.Xaml.</span><span class="sxs-lookup"><span data-stu-id="97e88-105">When using .NET Framework XAML Services, you can use some of the predefined XAML language markup extensions from the System.Xaml assembly.</span></span> <span data-ttu-id="97e88-106">Vous pouvez également créer une sous-classe à partir de la classe <xref:System.Windows.Markup.MarkupExtension> , définie dans System.Xaml, et définir vos propres extensions de balisage.</span><span class="sxs-lookup"><span data-stu-id="97e88-106">You can also subclass from the <xref:System.Windows.Markup.MarkupExtension> class, defined in System.Xaml, and define your own markup extensions.</span></span> <span data-ttu-id="97e88-107">Vous pouvez également utiliser des extensions de balisage définies par une infrastructure particulière, si vous référencez déjà cette infrastructure.</span><span class="sxs-lookup"><span data-stu-id="97e88-107">Or you can use markup extensions defined by a particular framework if you are already referencing that framework .</span></span>  
  
 <span data-ttu-id="97e88-108">Lorsqu'une utilisation d'extension de balisage fait l'objet d'un accès, le writer d'objet XAML peut fournir des services à une classe <xref:System.Windows.Markup.MarkupExtension> personnalisée via un point de connexion de service dans la substitution <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="97e88-108">When a markup extension usage is accessed, the XAML object writer can provide services to a custom <xref:System.Windows.Markup.MarkupExtension> class through a service connection point in the <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A?displayProperty=nameWithType> override.</span></span> <span data-ttu-id="97e88-109">Les services peuvent être utilisés pour obtenir le contexte concernant l'utilisation, les fonctions spécifiques du writer d'objet, le contexte de schéma XAML, etc.</span><span class="sxs-lookup"><span data-stu-id="97e88-109">The services can be used to obtain context about the usage, specific capabilities of the object writer, XAML schema context, and so on.</span></span>  
  
<a name="XAML_Defined_Markup_Extensions"></a>   
## <a name="xaml-defined-markup-extensions"></a><span data-ttu-id="97e88-110">Extensions de balisage définies en XAML</span><span class="sxs-lookup"><span data-stu-id="97e88-110">XAML-Defined Markup Extensions</span></span>  
 <span data-ttu-id="97e88-111">Plusieurs extensions de balisage sont implémentées par les services XAML .NET Framework pour la prise en charge du langage XAML.</span><span class="sxs-lookup"><span data-stu-id="97e88-111">Several markup extensions are implemented by .NET Framework XAML Services for XAML language support.</span></span> <span data-ttu-id="97e88-112">Ces extensions de balisage font partie de la spécification de XAML en tant que langage.</span><span class="sxs-lookup"><span data-stu-id="97e88-112">These markup extensions correspond to parts of the specification of XAML as a language.</span></span> <span data-ttu-id="97e88-113">Elles sont généralement identifiables par le préfixe `x:` dans la syntaxe, comme observé dans l'utilisation courante.</span><span class="sxs-lookup"><span data-stu-id="97e88-113">These are typically identifiable by the `x:` prefix in the syntax as seen in common usage.</span></span> <span data-ttu-id="97e88-114">Les implémentations des services XAML .NET Framework pour ces éléments de langage XAML dérivent toutes de la classe de base  <xref:System.Windows.Markup.MarkupExtension> .</span><span class="sxs-lookup"><span data-stu-id="97e88-114">The .NET Framework XAML Services implementations for these XAML language elements all derive from the  <xref:System.Windows.Markup.MarkupExtension> base class .</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="97e88-115">Le préfixe `x:` est utilisé pour le mappage d'espace de noms XAML standard de l'espace de noms du langage XAML, dans l'élément racine d'une production XAML.</span><span class="sxs-lookup"><span data-stu-id="97e88-115">The `x:` prefix is used for the typical XAML namespace mapping of the XAML language namespace, in the root element of a XAML production.</span></span> <span data-ttu-id="97e88-116">Par exemple, les modèles de projet et de page [!INCLUDE[vs_current_short](../../../includes/vs-current-short-md.md)] de différentes infrastructures spécifiques initialisent un fichier XAML à l'aide de ce mappage `x:` .</span><span class="sxs-lookup"><span data-stu-id="97e88-116">For example, the [!INCLUDE[vs_current_short](../../../includes/vs-current-short-md.md)] project and page templates for various specific frameworks initiate a XAML file using this `x:` mapping.</span></span> <span data-ttu-id="97e88-117">Vous pouvez choisir un autre jeton de préfixe pour votre propre mappage d'espace de noms XAML. Toutefois, dans cette documentation, le mappage `x:` par défaut est considéré comme un moyen d'identification des entités qui représentent une partie définie de l'espace de noms XAML du langage XAML, par opposition à l'espace de noms XAML par défaut d'une infrastructure spécifique ou à d'autres espaces de noms CLR ou XML arbitraires.</span><span class="sxs-lookup"><span data-stu-id="97e88-117">You could choose a different prefix token in your own XAML namespace mapping, but this documentation will assume the default `x:` mapping as a means of identifying those entities that are a defined part of the XAML language XAML namespace, as opposed to a specific framework's default XAML namespace or other arbitrary CLR or XML namespaces.</span></span>  
  
### <a name="xtype"></a><span data-ttu-id="97e88-118">x:Type</span><span class="sxs-lookup"><span data-stu-id="97e88-118">x:Type</span></span>  
 <span data-ttu-id="97e88-119">`x:Type` fournit l'objet <xref:System.Type> pour le type nommé.</span><span class="sxs-lookup"><span data-stu-id="97e88-119">`x:Type` supplies the <xref:System.Type> object for the named type.</span></span> <span data-ttu-id="97e88-120">Cette fonctionnalité est le plus souvent utilisée dans des mécanismes de différé qui utilisent le type CLR sous-jacent et la dérivation de type comme identificateur ou moniker de regroupement.</span><span class="sxs-lookup"><span data-stu-id="97e88-120">This functionality is used most frequently in deferral mechanisms that use underlying CLR type and type derivation as a grouping moniker or identifier.</span></span> <span data-ttu-id="97e88-121">Les styles et modèles WPF, ainsi que leur utilisation des propriétés `TargetType` , en sont un exemple spécifique.</span><span class="sxs-lookup"><span data-stu-id="97e88-121">WPF styles and templates, and their usage of `TargetType` properties, are a specific example.</span></span> <span data-ttu-id="97e88-122">Pour plus d'informations, consultez [x:Type Markup Extension](../../../docs/framework/xaml-services/x-type-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="97e88-122">For more information, see [x:Type Markup Extension](../../../docs/framework/xaml-services/x-type-markup-extension.md).</span></span>  
  
### <a name="xstatic"></a><span data-ttu-id="97e88-123">x:Static</span><span class="sxs-lookup"><span data-stu-id="97e88-123">x:Static</span></span>  
 <span data-ttu-id="97e88-124">`x:Static` produit des valeurs statiques à partir des entités de code de type de valeur qui ne désignent pas directement le type de la valeur d'une propriété, mais qui peuvent être évaluées en ce type.</span><span class="sxs-lookup"><span data-stu-id="97e88-124">`x:Static` produces static values from value-type code entities that are not directly the type of a property's value, but can be evaluated to that type.</span></span> <span data-ttu-id="97e88-125">Ce mécanisme s'avère utile pour la spécification de valeurs qui existent déjà en tant que constantes connues dans une définition de type.</span><span class="sxs-lookup"><span data-stu-id="97e88-125">This is useful for specifying values that already exist as well-known constants in a type definition.</span></span> <span data-ttu-id="97e88-126">Pour plus d'informations, consultez [x:Static Markup Extension](../../../docs/framework/xaml-services/x-static-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="97e88-126">For more information, see [x:Static Markup Extension](../../../docs/framework/xaml-services/x-static-markup-extension.md).</span></span>  
  
### <a name="xnull"></a><span data-ttu-id="97e88-127">x:Null</span><span class="sxs-lookup"><span data-stu-id="97e88-127">x:Null</span></span>  
 <span data-ttu-id="97e88-128">`x:Null` spécifie `null` en tant que valeur d'un membre XAML.</span><span class="sxs-lookup"><span data-stu-id="97e88-128">`x:Null` specifies `null` as a value for a XAML member.</span></span> <span data-ttu-id="97e88-129">Selon la conception de types spécifiques ou les concepts d'infrastructure à plus grande échelle, `null` n'est pas toujours la valeur par défaut d'une propriété ni la valeur implicite d'un attribut de chaîne vide.</span><span class="sxs-lookup"><span data-stu-id="97e88-129">Depending on the design of specific types or on larger framework concepts, `null` is not always a default value for a property, or the implied value of an empty string attribute.</span></span> <span data-ttu-id="97e88-130">Pour plus d'informations, consultez [x:Null Markup Extension](../../../docs/framework/xaml-services/x-null-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="97e88-130">For more information, see [x:Null Markup Extension](../../../docs/framework/xaml-services/x-null-markup-extension.md).</span></span>  
  
### <a name="xarray"></a><span data-ttu-id="97e88-131">x:Array</span><span class="sxs-lookup"><span data-stu-id="97e88-131">x:Array</span></span>  
 <span data-ttu-id="97e88-132">`x:Array` prend en charge la création de tableaux généraux dans la syntaxe XAML dans le cas où la prise en charge des collections assurée par les éléments de base et les modèles de contrôle n'est délibérément pas utilisée.</span><span class="sxs-lookup"><span data-stu-id="97e88-132">`x:Array` supports creation of general arrays in XAML syntax in cases where the collection support that is provided by base elements and control models is deliberately not used.</span></span> <span data-ttu-id="97e88-133">Pour plus d'informations, consultez [x:Array Markup Extension](../../../docs/framework/xaml-services/x-array-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="97e88-133">For more information, see [x:Array Markup Extension](../../../docs/framework/xaml-services/x-array-markup-extension.md).</span></span> <span data-ttu-id="97e88-134">Dans le cas de XAML 2009 en particulier, les tableaux sont accessibles en tant que primitives de langage et en tant qu'extension.</span><span class="sxs-lookup"><span data-stu-id="97e88-134">In XAML 2009 specifically, arrays are accessed as language primitives instead of as an extension.</span></span> <span data-ttu-id="97e88-135">Pour plus d'informations, consultez [XAML 2009 Language Features](../../../docs/framework/xaml-services/xaml-2009-language-features.md).</span><span class="sxs-lookup"><span data-stu-id="97e88-135">For more information, see [XAML 2009 Language Features](../../../docs/framework/xaml-services/xaml-2009-language-features.md).</span></span>  
  
### <a name="xreference"></a><span data-ttu-id="97e88-136">x:Reference</span><span class="sxs-lookup"><span data-stu-id="97e88-136">x:Reference</span></span>  
 <span data-ttu-id="97e88-137">`x:Reference` fait partie de XAML 2009, qui est une extension de l'ensemble de langages (2006) d'origine.</span><span class="sxs-lookup"><span data-stu-id="97e88-137">`x:Reference` is part of XAML 2009, an extension of the original (2006) language set.</span></span> <span data-ttu-id="97e88-138">`x:Reference` représente une référence à un autre objet existant dans un graphique d'objets.</span><span class="sxs-lookup"><span data-stu-id="97e88-138">`x:Reference` represents a reference to another existing object in an object graph.</span></span> <span data-ttu-id="97e88-139">Cet objet est identifié par son `x:Name`.</span><span class="sxs-lookup"><span data-stu-id="97e88-139">That object is identified by its `x:Name`.</span></span> <span data-ttu-id="97e88-140">Pour plus d'informations, consultez [x:Reference Markup Extension](../../../docs/framework/xaml-services/x-reference-markup-extension.md).</span><span class="sxs-lookup"><span data-stu-id="97e88-140">For more information, see [x:Reference Markup Extension](../../../docs/framework/xaml-services/x-reference-markup-extension.md).</span></span>  
  
### <a name="other-x-constructs"></a><span data-ttu-id="97e88-141">Autres constructions x:</span><span class="sxs-lookup"><span data-stu-id="97e88-141">Other x: Constructs</span></span>  
 <span data-ttu-id="97e88-142">Il existe d'autres constructions `x:` permettant de prendre en charge des fonctionnalités de langage XAML, mais elles ne sont pas implémentées en tant qu'extensions de balisage.</span><span class="sxs-lookup"><span data-stu-id="97e88-142">Other `x:` constructs to support XAML language features exist, but these are not implemented as markup extensions.</span></span> <span data-ttu-id="97e88-143">Pour plus d'informations, consultez [XAML Namespace (x:) Language Features](../../../docs/framework/xaml-services/xaml-namespace-x-language-features.md).</span><span class="sxs-lookup"><span data-stu-id="97e88-143">For more information, see [XAML Namespace (x:) Language Features](../../../docs/framework/xaml-services/xaml-namespace-x-language-features.md).</span></span>  
  
<a name="the_markupextension_base_class"></a>   
## <a name="the-markupextension-base-class"></a><span data-ttu-id="97e88-144">Classe de base MarkupExtension</span><span class="sxs-lookup"><span data-stu-id="97e88-144">The MarkupExtension Base Class</span></span>  
 <span data-ttu-id="97e88-145">Pour définir une extension de balisage personnalisée qui peut interagir avec les implémentations par défaut de lecteurs XAML et de writers XAML dans System.Xaml, vous dérivez une classe de la classe <xref:System.Windows.Markup.MarkupExtension> abstraite.</span><span class="sxs-lookup"><span data-stu-id="97e88-145">To define a custom markup extension that can interact with the default implementations of XAML readers and XAML writers in System.Xaml, you derive a class from the abstract <xref:System.Windows.Markup.MarkupExtension> class.</span></span> <span data-ttu-id="97e88-146">Cette classe dispose d'une méthode à substituer, qui est <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A>.</span><span class="sxs-lookup"><span data-stu-id="97e88-146">That class has one method to override, which is <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A>.</span></span> <span data-ttu-id="97e88-147">Vous devrez peut-être également définir des constructeurs supplémentaires pour prendre en charge des arguments pour l'utilisation d'une extension de balisage, ainsi que les propriétés définissables correspondantes.</span><span class="sxs-lookup"><span data-stu-id="97e88-147">You might also need to define additional constructors to support arguments to the markup extension usage, and matching settable properties.</span></span>  
  
 <span data-ttu-id="97e88-148">Via <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A>, une extension de balisage personnalisée a accès à un contexte de service qui signale l'environnement dans lequel l'extension de balisage est réellement appelée par un processeur XAML.</span><span class="sxs-lookup"><span data-stu-id="97e88-148">Through <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A>, a custom markup extension has access to a service context that reports the environment where the markup extension is actually invoked by a XAML processor.</span></span> <span data-ttu-id="97e88-149">Dans le chemin de chargement, il s'agit généralement d'un <xref:System.Xaml.XamlObjectWriter>.</span><span class="sxs-lookup"><span data-stu-id="97e88-149">In the load path this is typically a <xref:System.Xaml.XamlObjectWriter>.</span></span> <span data-ttu-id="97e88-150">Dans le chemin d'enregistrement, il s'agit généralement d'un <xref:System.Xaml.XamlXmlWriter>.</span><span class="sxs-lookup"><span data-stu-id="97e88-150">In the save path this is typically a <xref:System.Xaml.XamlXmlWriter>.</span></span> <span data-ttu-id="97e88-151">Chaque élément signale le contexte de service comme une classe de contexte du fournisseur de services XAML interne qui implémente un modèle de fournisseur de services.</span><span class="sxs-lookup"><span data-stu-id="97e88-151">Each report the service context as an internal XAML service provider context class that implements a service provider pattern.</span></span> <span data-ttu-id="97e88-152">Pour plus d’informations sur les services disponibles et sur les éléments qu’ils représentent, consultez [Type Converters and Markup Extensions for XAML](../../../docs/framework/xaml-services/type-converters-and-markup-extensions-for-xaml.md).</span><span class="sxs-lookup"><span data-stu-id="97e88-152">For more information about the available services and what they represent, see [Type Converters and Markup Extensions for XAML](../../../docs/framework/xaml-services/type-converters-and-markup-extensions-for-xaml.md).</span></span>  
  
 <span data-ttu-id="97e88-153">Votre classe d'extension de balisage doit utiliser un niveau d'accès public ; les processeurs XAML doivent toujours être en mesure d'instancier la classe de prise en charge de l'extension de balisage pour utiliser ses services.</span><span class="sxs-lookup"><span data-stu-id="97e88-153">Your markup extension class must use a public access level; XAML processors must always be able to instantiate the markup extension's support class in order to use its services.</span></span>  
  
<a name="naming_the_support_type"></a>   
## <a name="defining-the-support-type-for-a-custom-markup-extension"></a><span data-ttu-id="97e88-154">Définition du type de prise en charge pour une extension de balisage personnalisée</span><span class="sxs-lookup"><span data-stu-id="97e88-154">Defining the Support Type for a Custom Markup Extension</span></span>  
 <span data-ttu-id="97e88-155">Lorsque vous utilisez des services XAML .NET Framework ou des infrastructures qui reposent sur ces services, vous avez deux possibilités pour nommer le type de prise en charge d'extension de balisage.</span><span class="sxs-lookup"><span data-stu-id="97e88-155">When you use .NET Framework XAML Services or frameworks that build on .NET Framework XAML Services, you have two choices for how to name the markup extension support type.</span></span> <span data-ttu-id="97e88-156">Le nom de type se rapporte à la façon dont les writers d'objet XAML tentent d'accéder à un type de prise en charge d'extension de balisage et de l'appeler lorsqu'ils rencontrent une utilisation d'extension de balisage en XAML.</span><span class="sxs-lookup"><span data-stu-id="97e88-156">The type name is relevant to how XAML object writers attempt to access and invoke a markup extension support type when they encounter a markup extension usage in XAML.</span></span> <span data-ttu-id="97e88-157">Utilisez l'une des stratégies d'affectation de noms suivantes :</span><span class="sxs-lookup"><span data-stu-id="97e88-157">Use one of the following naming strategies:</span></span>  
  
-   <span data-ttu-id="97e88-158">Spécifiez le nom de type afin qu'il corresponde exactement au jeton d'utilisation du balisage XAML.</span><span class="sxs-lookup"><span data-stu-id="97e88-158">Name the type name to be an exact match to the XAML markup usage token.</span></span> <span data-ttu-id="97e88-159">Par exemple, pour prendre en charge l'utilisation d'une extension `{Collate ...}` , nommez le type de prise en charge `Collate`.</span><span class="sxs-lookup"><span data-stu-id="97e88-159">For example, to support a `{Collate ...}` extension usage, name the support type `Collate`.</span></span>  
  
-   <span data-ttu-id="97e88-160">Spécifiez le nom du type de façon à ce qu'il corresponde au jeton de la chaîne d'utilisation, suivi du suffixe `Extension`.</span><span class="sxs-lookup"><span data-stu-id="97e88-160">Name the type name to be the usage string token plus the suffix `Extension`.</span></span> <span data-ttu-id="97e88-161">Par exemple, pour prendre en charge l'utilisation d'une extension `{Collate ...}` , nommez le type de prise en charge `CollateExtension`.</span><span class="sxs-lookup"><span data-stu-id="97e88-161">For example, to support a `{Collate ...}` extension usage, name the support type `CollateExtension`.</span></span>  
  
 <span data-ttu-id="97e88-162">L'ordre de recherche consiste à rechercher d'abord le nom de classe avec le suffixe `Extension`, puis le nom de classe sans le suffixe `Extension` .</span><span class="sxs-lookup"><span data-stu-id="97e88-162">The order of lookup is to look for the `Extension`-suffixed class name first and then look for the class name without the `Extension` suffix.</span></span>  
  
 <span data-ttu-id="97e88-163">Du point de vue de l'utilisation du balisage, le suffixe `Extension` peut tout à fait être inclus dans le cadre de l'utilisation.</span><span class="sxs-lookup"><span data-stu-id="97e88-163">From the markup usage perspective, including the `Extension` suffix as part of the usage is valid.</span></span> <span data-ttu-id="97e88-164">Toutefois, le système de comporte comme si `Extension` faisait réellement partie du nom de la classe et les writers d'objet XAML ne parviennent pas à résoudre une classe de prise en charge d'extension de balisage pour cette utilisation si cette classe ne comporte pas le suffixe `Extension` .</span><span class="sxs-lookup"><span data-stu-id="97e88-164">However, this behaves as if `Extension` is truly part of the class name, and XAML object writers would fail to resolve a markup extension support class for that usage if the support class did not have the `Extension` suffix.</span></span>  
  
### <a name="the-default-constructor"></a><span data-ttu-id="97e88-165">Constructeur par défaut</span><span class="sxs-lookup"><span data-stu-id="97e88-165">The Default Constructor</span></span>  
 <span data-ttu-id="97e88-166">Pour tous les types de prise en charge d'extensions de balisage, vous devez exposer un constructeur public par défaut.</span><span class="sxs-lookup"><span data-stu-id="97e88-166">For all markup extension support types, you should expose a public default constructor.</span></span> <span data-ttu-id="97e88-167">Un constructeur par défaut est requis pour tous les cas où un writer d'objet XAML instancie l'extension de balisage à partir d'une utilisation d'élément objet.</span><span class="sxs-lookup"><span data-stu-id="97e88-167">A default constructor is required for any case where a XAML object writer instantiates the markup extension from an object element usage.</span></span> <span data-ttu-id="97e88-168">La prise en charge de l'utilisation d'éléments objet correspond à une attente légitime concernant une extension de balisage, en particulier pour la sérialisation.</span><span class="sxs-lookup"><span data-stu-id="97e88-168">Supporting object element usage is a fair expectation for a markup extension, particularly for serialization.</span></span> <span data-ttu-id="97e88-169">Toutefois, vous pouvez implémenter une extension de balisage sans constructeur public si vous souhaitez seulement prendre en charge des utilisations d'attributs de l'extension de balisage.</span><span class="sxs-lookup"><span data-stu-id="97e88-169">However, you can implement a markup extension without a public constructor if you only intend to support attribute usages of the markup extension.</span></span>  
  
 <span data-ttu-id="97e88-170">Si votre utilisation d'extension de balisage ne dispose d'aucun argument, le constructeur par défaut doit prendre l'utilisation en charge.</span><span class="sxs-lookup"><span data-stu-id="97e88-170">If your markup extension usage has no arguments, the default constructor is required to support usage.</span></span>  
  
<a name="constructor_patterns_and_positional_arguments_for_a_custom_markup_extension"></a>   
## <a name="constructor-patterns-and-positional-arguments-for-a-custom-markup-extension"></a><span data-ttu-id="97e88-171">Modèles de constructeur et arguments de position pour une extension de balisage personnalisée</span><span class="sxs-lookup"><span data-stu-id="97e88-171">Constructor Patterns and Positional Arguments for a Custom Markup Extension</span></span>  
 <span data-ttu-id="97e88-172">Pour une extension de balisage avec utilisation d'argument prévue, les constructeurs publics doivent correspondre aux modes de l'utilisation prévue.</span><span class="sxs-lookup"><span data-stu-id="97e88-172">For a markup extension with intended argument usage, the public constructors must correspond to the modes of the intended usage.</span></span> <span data-ttu-id="97e88-173">En d'autres termes, si votre extension de balisage est conçue pour exiger un argument de position en tant qu'utilisation valide, vous devez prendre en charge un constructeur public avec un paramètre d'entrée qui prend comme valeur l'argument de position.</span><span class="sxs-lookup"><span data-stu-id="97e88-173">In other words, if your markup extension is designed to require one positional argument as a valid usage, you should support a public constructor with one input parameter that takes the positional argument.</span></span>  
  
 <span data-ttu-id="97e88-174">Par exemple, supposons que l'extension de balisage `Collate` vise à ne prendre en charge qu'un mode dans lequel il existe un argument de position qui représente son mode, spécifié en tant que constante d'énumération `CollationMode` .</span><span class="sxs-lookup"><span data-stu-id="97e88-174">For example, suppose the `Collate` markup extension is intended to support only a mode where there is one positional argument that represents its mode, specified as a `CollationMode` enumeration constant.</span></span> <span data-ttu-id="97e88-175">Dans ce cas, un constructeur doit exister sous la forme suivante :</span><span class="sxs-lookup"><span data-stu-id="97e88-175">In this case, there should be a constructor with the following form:</span></span>  
  
```  
public Collate(CollationMode collationMode) {...}  
```  
  
 <span data-ttu-id="97e88-176">À un niveau de base, les arguments passés à une extension de balisage sont une chaîne car ils sont transférés à partir des valeurs d'attributs du balisage.</span><span class="sxs-lookup"><span data-stu-id="97e88-176">At a basic level, the arguments passed to a markup extension are a string because they are being forwarded from the markup's attribute values.</span></span> <span data-ttu-id="97e88-177">Vous pouvez convertir tous vos arguments en chaînes et utiliser l'entrée à ce niveau.</span><span class="sxs-lookup"><span data-stu-id="97e88-177">You can make all of your arguments strings and work with input at that level.</span></span> <span data-ttu-id="97e88-178">Toutefois, vous avez accès à un traitement qui se produit avant que les arguments d'extension de balisage ne soient passés à la classe de prise en charge.</span><span class="sxs-lookup"><span data-stu-id="97e88-178">However, you do have access to certain processing that occurs before the markup extension arguments are passed to the support class.</span></span>  
  
 <span data-ttu-id="97e88-179">Le traitement fonctionne de manière conceptuelle comme si l'extension de balisage était un objet à créer, puis ses valeurs de membre sont définies.</span><span class="sxs-lookup"><span data-stu-id="97e88-179">The processing works conceptually as if the markup extension is an object to be created, and then its member values are set.</span></span> <span data-ttu-id="97e88-180">Chaque propriété spécifiée à définir est évaluée de la même manière qu'un membre spécifié peut être défini sur un objet créé lorsque le code XAML est analysé.</span><span class="sxs-lookup"><span data-stu-id="97e88-180">Each specified property to set is evaluated similar to how a specified member can be set on a created object when XAML is parsed.</span></span> <span data-ttu-id="97e88-181">Il existe deux différences majeures :</span><span class="sxs-lookup"><span data-stu-id="97e88-181">There are two important differences:</span></span>  
  
-   <span data-ttu-id="97e88-182">Comme noté précédemment, un type de prise en charge d'extension de balisage n'a pas besoin d'un constructeur par défaut pour être instancié en XAML.</span><span class="sxs-lookup"><span data-stu-id="97e88-182">As noted previously, a markup extension support type does not need to have a default constructor in order to be instantiated in XAML.</span></span> <span data-ttu-id="97e88-183">Sa construction d'objet est différée jusqu'à ce que ses éventuels arguments dans la syntaxe de texte soient mis sous forme de jeton et évalués comme arguments de position ou nommés ; le constructeur approprié est appelé à ce moment-là.</span><span class="sxs-lookup"><span data-stu-id="97e88-183">Its object construction is deferred until its possible arguments in the text syntax are tokenized and evaluated as either positional or named arguments, and the appropriate constructor is called at that time.</span></span>  
  
-   <span data-ttu-id="97e88-184">Les utilisations d'extensions de balisage peuvent être imbriquées.</span><span class="sxs-lookup"><span data-stu-id="97e88-184">Markup extensions usages can be nested.</span></span> <span data-ttu-id="97e88-185">L'extension de balisage la plus profonde est évaluée en premier.</span><span class="sxs-lookup"><span data-stu-id="97e88-185">The innermost markup extension is evaluated first.</span></span> <span data-ttu-id="97e88-186">Vous pouvez donc supposer une utilisation de ce type et déclarer l'un des paramètres de construction comme étant un type qui exige un convertisseur de valeurs (tel qu'une extension de balisage) à générer.</span><span class="sxs-lookup"><span data-stu-id="97e88-186">Therefore, you can assume such a usage and declare one of the construction parameters to be a type that requires a value converter (such as a markup extension) to produce.</span></span>  
  
 <span data-ttu-id="97e88-187">Un cas de dépendance d'un traitement de ce type se trouve dans l'exemple précédent.</span><span class="sxs-lookup"><span data-stu-id="97e88-187">A reliance on such processing was shown in the previous example.</span></span> <span data-ttu-id="97e88-188">Le writer d'objet XAML des services XAML .NET Framework convertit les noms de constantes d'énumération en valeurs énumérées à un niveau natif.</span><span class="sxs-lookup"><span data-stu-id="97e88-188">The .NET Framework XAML Services XAML object writer processes enumeration constant names into enumerated values at a native level.</span></span>  
  
 <span data-ttu-id="97e88-189">Le traitement d'une syntaxe de texte d'un paramètre de position d'extension de balisage peut également reposer sur un convertisseur de type associé au type dans l'argument de construction.</span><span class="sxs-lookup"><span data-stu-id="97e88-189">Processing text syntax of a markup extension positional parameter can also rely on a type converter that is associated with the type that is in the construction argument.</span></span>  
  
 <span data-ttu-id="97e88-190">Les arguments sont appelés « arguments de position » car l'ordre dans lequel les jetons de l'utilisation sont rencontrés correspond à l'ordre de position du paramètre de constructeur auquel ils sont assignés.</span><span class="sxs-lookup"><span data-stu-id="97e88-190">The arguments are called positional arguments because the order in which the tokens in the usage is encountered corresponds to the positional order of the constructor parameter to which they are assigned.</span></span> <span data-ttu-id="97e88-191">Par exemple, considérez la signature de constructeur suivante :</span><span class="sxs-lookup"><span data-stu-id="97e88-191">For example, consider the following constructor signature:</span></span>  
  
```  
public Collate(CollationMode collationMode, object collateThis) {...}  
```  
  
 <span data-ttu-id="97e88-192">Un processeur XAML attend deux arguments de position pour cette extension de balisage.</span><span class="sxs-lookup"><span data-stu-id="97e88-192">A XAML processor expects two positional arguments for this markup extension.</span></span> <span data-ttu-id="97e88-193">S'il y avait une utilisation de `{Collate AlphaUp,{x:Reference circularFile}}`, le jeton `AlphaUp` est envoyé au premier paramètre et évalué en tant qu'énumération `CollationMode` nommée constante.</span><span class="sxs-lookup"><span data-stu-id="97e88-193">If there was a usage `{Collate AlphaUp,{x:Reference circularFile}}`, the `AlphaUp` token is sent to the first parameter and evaluated as a `CollationMode` enumeration named constant.</span></span> <span data-ttu-id="97e88-194">Le résultat de la `x:Reference` interne est envoyé au deuxième paramètre et évalué en tant qu'objet.</span><span class="sxs-lookup"><span data-stu-id="97e88-194">The result of the inner `x:Reference` is sent to the second parameter and evaluated as an object.</span></span>  
  
 <span data-ttu-id="97e88-195">Dans les règles spécifiées XAML concernant la syntaxe et le traitement des extensions de balisage, la virgule est le délimiteur qui sépare différents arguments, que ces arguments soient des arguments de position ou des arguments nommés.</span><span class="sxs-lookup"><span data-stu-id="97e88-195">In the XAML specified rules for markup extension syntax and processing, the comma is the delimiter between arguments, whether those arguments are positional arguments or named arguments.</span></span>  
  
### <a name="duplicate-arity-of-positional-arguments"></a><span data-ttu-id="97e88-196">Arité double des arguments de position</span><span class="sxs-lookup"><span data-stu-id="97e88-196">Duplicate Arity of Positional Arguments</span></span>  
 <span data-ttu-id="97e88-197">Si un writer d'objet XAML détecte l'utilisation d'une extension de balisage avec des arguments de position et que plusieurs arguments de constructeur acceptent ce nombre d'arguments (arité double), il ne s'agit pas nécessairement d'une erreur.</span><span class="sxs-lookup"><span data-stu-id="97e88-197">If a XAML object writer encounters a markup extension usage with positional arguments, and there are multiple constructor arguments that take that number of arguments (a duplicate arity), that is not necessarily an error.</span></span> <span data-ttu-id="97e88-198">Le comportement dépend d'un paramètre de contexte de schéma XAML personnalisable, <xref:System.Xaml.XamlSchemaContextSettings.SupportMarkupExtensionsWithDuplicateArity%2A>.</span><span class="sxs-lookup"><span data-stu-id="97e88-198">The behavior depends on a customizable XAML schema context setting, <xref:System.Xaml.XamlSchemaContextSettings.SupportMarkupExtensionsWithDuplicateArity%2A>.</span></span> <span data-ttu-id="97e88-199">Si <xref:System.Xaml.XamlSchemaContextSettings.SupportMarkupExtensionsWithDuplicateArity%2A> a la valeur `true`, un writer d'objet XAML ne doit pas lever d'exception uniquement pour des raisons d'arité double.</span><span class="sxs-lookup"><span data-stu-id="97e88-199">If <xref:System.Xaml.XamlSchemaContextSettings.SupportMarkupExtensionsWithDuplicateArity%2A> is `true`, a XAML object writer should not throw an exception only for reasons of duplicate arity.</span></span> <span data-ttu-id="97e88-200">Le comportement au-delà de ce point n'est pas strictement défini.</span><span class="sxs-lookup"><span data-stu-id="97e88-200">Behavior beyond that point is not strictly defined.</span></span> <span data-ttu-id="97e88-201">L'hypothèse de conception de base part du principe que le contexte de schéma comporte des informations de type disponibles pour les paramètres spécifiques et peut tenter d'effectuer des casts explicites correspondant aux candidats dupliqués pour déterminer la signature qui peut offrir la meilleure correspondance.</span><span class="sxs-lookup"><span data-stu-id="97e88-201">The basic design assumption is that the schema context has type information available for the specific parameters and can attempt explicit casts that match the duplicate candidates to see which signature might be the best match.</span></span> <span data-ttu-id="97e88-202">Une exception peut tout de même être levée si aucune des signatures ne réussit les tests imposés par ce contexte de schéma particulier s'exécutant sur un writer d'objet XAML.</span><span class="sxs-lookup"><span data-stu-id="97e88-202">An exception might still be thrown if no signatures can pass the tests that are imposed by that particular schema context that is running on a XAML object writer.</span></span>  
  
 <span data-ttu-id="97e88-203">Par défaut, <xref:System.Xaml.XamlSchemaContextSettings.SupportMarkupExtensionsWithDuplicateArity%2A> a la valeur `false` dans le <xref:System.Xaml.XamlSchemaContext> CLR pour les services XAML .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="97e88-203">By default, <xref:System.Xaml.XamlSchemaContextSettings.SupportMarkupExtensionsWithDuplicateArity%2A> is `false` in the CLR-based <xref:System.Xaml.XamlSchemaContext> for .NET Framework XAML Services.</span></span> <span data-ttu-id="97e88-204">Par conséquent, le <xref:System.Xaml.XamlObjectWriter> par défaut lève des exceptions s'il détecte l'utilisation d'une extension de balisage pour laquelle il existe une arité double dans les constructeurs du type de stockage.</span><span class="sxs-lookup"><span data-stu-id="97e88-204">Thus, the default <xref:System.Xaml.XamlObjectWriter> throws exceptions if it encounters a markup extension usage where there is duplicate arity in the backing type's constructors.</span></span>  
  
<a name="named_arguments_for_a_custom_markup_extension"></a>   
## <a name="named-arguments-for-a-custom-markup-extension"></a><span data-ttu-id="97e88-205">Arguments nommés pour une extension de balisage personnalisée</span><span class="sxs-lookup"><span data-stu-id="97e88-205">Named Arguments for a Custom Markup Extension</span></span>  
 <span data-ttu-id="97e88-206">Les extensions de balisage telles que spécifiées par XAML peuvent également utiliser une forme d'arguments nommés pour l'utilisation.</span><span class="sxs-lookup"><span data-stu-id="97e88-206">Markup extensions as specified by XAML can also use a named arguments form for usage.</span></span> <span data-ttu-id="97e88-207">Au premier niveau de la segmentation du texte en unités lexicales, la syntaxe de texte se divise en plusieurs arguments.</span><span class="sxs-lookup"><span data-stu-id="97e88-207">At the first level of tokenization, the text syntax is divided into arguments.</span></span> <span data-ttu-id="97e88-208">La présence d'un signe égal (=) dans l'un des arguments identifie celui-ci comme étant un argument nommé.</span><span class="sxs-lookup"><span data-stu-id="97e88-208">The presence of an equals sign (=) within any argument identifies an argument as a named argument.</span></span> <span data-ttu-id="97e88-209">Un argument de ce type est également mis sous forme de jeton dans une paire nom/valeur.</span><span class="sxs-lookup"><span data-stu-id="97e88-209">Such an argument is also tokenized into a name/value pair.</span></span> <span data-ttu-id="97e88-210">Dans ce cas, le nom nomme une propriété définissable publique du type de prise en charge de l'extension de balisage.</span><span class="sxs-lookup"><span data-stu-id="97e88-210">The name in this case names a public settable property of the markup extension's support type.</span></span> <span data-ttu-id="97e88-211">Si vous avez l'intention de prendre en charge l'utilisation d'arguments nommés, vous devez fournir ces propriétés définissables publiques.</span><span class="sxs-lookup"><span data-stu-id="97e88-211">If you intend to support named argument usage, you should provide these public settable properties.</span></span> <span data-ttu-id="97e88-212">Les propriétés peuvent être des propriétés héritées, à condition qu'elles restent publiques.</span><span class="sxs-lookup"><span data-stu-id="97e88-212">The properties can be inherited properties as long as they remain public.</span></span>  
  
<a name="accessing_service_provider_context_from_a_markup_extension_implementation"></a>   
## <a name="accessing-service-provider-context-from-a-markup-extension-implementation"></a><span data-ttu-id="97e88-213">Accès au contexte de fournisseur de services à partir d'une implémentation de l'extension du balisage</span><span class="sxs-lookup"><span data-stu-id="97e88-213">Accessing Service Provider Context from a Markup Extension Implementation</span></span>  
 <span data-ttu-id="97e88-214">Les services disponibles sont les mêmes pour tous les convertisseurs de valeurs.</span><span class="sxs-lookup"><span data-stu-id="97e88-214">The services available are the same for any value converter.</span></span> <span data-ttu-id="97e88-215">La seule différence réside dans le mode de réception du contexte de service par chaque convertisseur de valeurs.</span><span class="sxs-lookup"><span data-stu-id="97e88-215">The difference is in how each value converter receives the service context.</span></span> <span data-ttu-id="97e88-216">L’accès aux services et les services disponibles sont documentés dans la rubrique [Type Converters and Markup Extensions for XAML](../../../docs/framework/xaml-services/type-converters-and-markup-extensions-for-xaml.md).</span><span class="sxs-lookup"><span data-stu-id="97e88-216">Accessing services and the services available are documented in the topic [Type Converters and Markup Extensions for XAML](../../../docs/framework/xaml-services/type-converters-and-markup-extensions-for-xaml.md).</span></span>  
  
<a name="property_element_usage_of_a_markup_extension"></a>   
## <a name="property-element-usage-of-a-markup-extension"></a><span data-ttu-id="97e88-217">Utilisation des éléments de propriété d'une extension de balisage</span><span class="sxs-lookup"><span data-stu-id="97e88-217">Property Element Usage of a Markup Extension</span></span>  
 <span data-ttu-id="97e88-218">Les scénarios d'utilisation d'une extension de balisage consistent souvent à employer cette extension dans le cadre de l'utilisation d'attributs.</span><span class="sxs-lookup"><span data-stu-id="97e88-218">The scenarios for markup extension usages are often designed around using the markup extension in attribute usage.</span></span> <span data-ttu-id="97e88-219">Toutefois, il est également possible de définir la classe de stockage pour prend en charge l'utilisation des éléments de propriété.</span><span class="sxs-lookup"><span data-stu-id="97e88-219">However, it is also potentially possible to define the backing class to support property element usage.</span></span>  
  
 <span data-ttu-id="97e88-220">Pour prendre en charge l'utilisation des éléments de propriété de votre extension de balisage, définissez un constructeur public par défaut.</span><span class="sxs-lookup"><span data-stu-id="97e88-220">To support property element usage of your markup extension, define a public default constructor.</span></span> <span data-ttu-id="97e88-221">Il doit s'agir d'un constructeur d'instance, et non pas d'un constructeur statique.</span><span class="sxs-lookup"><span data-stu-id="97e88-221">This should be an instance constructor not a static constructor.</span></span> <span data-ttu-id="97e88-222">Ce constructeur est nécessaire car un processeur XAML doit généralement appeler le constructeur par défaut sur tout élément objet qu'il traite à partir du balisage, et cela inclut les classes d'extension de balisage sous forme d'éléments objet.</span><span class="sxs-lookup"><span data-stu-id="97e88-222">This is required because a XAML processor must generally invoke the default constructor on any object element it processes from markup, and this includes markup extension classes as object elements.</span></span> <span data-ttu-id="97e88-223">Pour les scénarios avancés, vous pouvez définir des chemins de construction autres que ceux par défaut pour les classes.</span><span class="sxs-lookup"><span data-stu-id="97e88-223">For advanced scenarios, you can define non-default construction paths for classes.</span></span> <span data-ttu-id="97e88-224">(Pour plus d’informations, consultez [Directive x : FactoryMethod](../../../docs/framework/xaml-services/x-factorymethod-directive.md).) Toutefois, vous ne devez pas utiliser ces modèles à des fins d’extensions de balisage, car cela complique considérablement la détection du modèle d’utilisation, à la fois pour les concepteurs et pour les utilisateurs du balisage brut.</span><span class="sxs-lookup"><span data-stu-id="97e88-224">(For more information, see [x:FactoryMethod Directive](../../../docs/framework/xaml-services/x-factorymethod-directive.md).) However, you should not use these patterns for markup extension purposes because this makes discovery of the usage pattern much more difficult, both for designers and for users of raw markup.</span></span>  
  
<a name="attributing_for_a_custom_markup_extension"></a>   
## <a name="attributing-for-a-custom-markup-extension"></a><span data-ttu-id="97e88-225">Association d'attributs à une extension de balisage personnalisée</span><span class="sxs-lookup"><span data-stu-id="97e88-225">Attributing for a Custom Markup Extension</span></span>  
 <span data-ttu-id="97e88-226">Pour prendre en charge des environnements de conception et certains scénarios de writer d'objet XAML, vous devez associer plusieurs attributs CLR à votre type de prise en charge d'extension de balisage.</span><span class="sxs-lookup"><span data-stu-id="97e88-226">To support both design environments and certain XAML object writer scenarios, you should attribute a markup extension support type with several CLR attributes.</span></span> <span data-ttu-id="97e88-227">Ces attributs signalent l'utilisation prévue pour une extension de balisage.</span><span class="sxs-lookup"><span data-stu-id="97e88-227">These attributes report the intended markup extension usage.</span></span>  
  
 <span data-ttu-id="97e88-228"><xref:System.Windows.Markup.MarkupExtensionReturnTypeAttribute> signale les informations <xref:System.Type> pour le type d'objet que <xref:System.Windows.Markup.ArrayExtension.ProvideValue%2A> retourne.</span><span class="sxs-lookup"><span data-stu-id="97e88-228"><xref:System.Windows.Markup.MarkupExtensionReturnTypeAttribute> reports the <xref:System.Type> information for the object type that <xref:System.Windows.Markup.ArrayExtension.ProvideValue%2A> returns.</span></span> <span data-ttu-id="97e88-229">Par sa simple signature <xref:System.Windows.Markup.ArrayExtension.ProvideValue%2A> retourne <xref:System.Object>.</span><span class="sxs-lookup"><span data-stu-id="97e88-229">By its pure signature, <xref:System.Windows.Markup.ArrayExtension.ProvideValue%2A> returns <xref:System.Object>.</span></span> <span data-ttu-id="97e88-230">Toutefois, divers consommateurs peuvent souhaiter obtenir des informations de type de retour plus précises.</span><span class="sxs-lookup"><span data-stu-id="97e88-230">But various consumers might want more precise return type information.</span></span> <span data-ttu-id="97e88-231">Cela inclut :</span><span class="sxs-lookup"><span data-stu-id="97e88-231">This includes:</span></span>  
  
-   <span data-ttu-id="97e88-232">des concepteurs et IDE qui peuvent être en mesure de fournir une prise en charge tenant compte du type pour les utilisations d'extensions de balisage ;</span><span class="sxs-lookup"><span data-stu-id="97e88-232">Designers and IDEs, who might be able to provide type-aware support for markup extension usages.</span></span>  
  
-   <span data-ttu-id="97e88-233">des implémentations avancées de gestionnaires `SetMarkupExtension` sur les classes cibles, qui peuvent faire appel à la réflexion pour déterminer le type de retour d'une extension de balisage au lieu de se brancher sur des implémentations <xref:System.Windows.Markup.MarkupExtension> connues spécifiques via leur nom.</span><span class="sxs-lookup"><span data-stu-id="97e88-233">Advanced implementations of `SetMarkupExtension` handlers on target classes, which might rely on reflection to determine a markup extension's return type instead of branching on specific known <xref:System.Windows.Markup.MarkupExtension> implementations by name.</span></span>  
  
<a name="serialization_of_markup_extension_usages"></a>   
## <a name="serialization-of-markup-extension-usages"></a><span data-ttu-id="97e88-234">Sérialisation d'utilisations d'extensions de balisage</span><span class="sxs-lookup"><span data-stu-id="97e88-234">Serialization of Markup Extension Usages</span></span>  
 <span data-ttu-id="97e88-235">Lorsqu'un writer d'objet XAML traite une utilisation d'extension de balisage et appelle <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A>, son contexte, ayant déjà été une utilisation d'extension de balisage, persiste dans le flux de nœud XAML, et non dans le graphique d'objets.</span><span class="sxs-lookup"><span data-stu-id="97e88-235">When a XAML object writer processes a markup extension usage and calls <xref:System.Windows.Markup.MarkupExtension.ProvideValue%2A>, the context for it previously being a markup extension usage persists in the XAML node stream but not in the object graph.</span></span> <span data-ttu-id="97e88-236">Dans le graphique d'objets, seule la valeur est conservée.</span><span class="sxs-lookup"><span data-stu-id="97e88-236">In the object graph, only the value is preserved.</span></span> <span data-ttu-id="97e88-237">Si vous disposez de scénarios de conception ou d'autres raisons de rendre persistante l'utilisation d'extension de balisage d'origine dans la sortie sérialisée, vous devez concevoir votre propre infrastructure permettant d'assurer le suivi des utilisations d'extensions de balisage à partir du flux de nœud XAML du chemin de chargement.</span><span class="sxs-lookup"><span data-stu-id="97e88-237">If you have design scenarios or other reasons for persisting the original markup extension usage into the serialized output, you must design your own infrastructure for tracking the markup extension usages from the load path XAML node stream.</span></span> <span data-ttu-id="97e88-238">Vous pouvez implémenter un comportement visant à recréer les éléments du flux de nœud à partir du chemin de chargement et à les lire sur des writers XAML pour la sérialisation dans le chemin d'enregistrement, substituant ainsi la valeur dans la position appropriée du flux de nœud.</span><span class="sxs-lookup"><span data-stu-id="97e88-238">You can implement behavior to recreate the elements of the node stream from the load path and play them back to XAML writers for serialization in the save path, substituting for the value in the appropriate position of the node stream.</span></span>  
  
<a name="markup_extensions_in_the_xaml_node_stream"></a>   
## <a name="markup-extensions-in-the-xaml-node-stream"></a><span data-ttu-id="97e88-239">Extensions de balisage dans le flux de nœud XAML</span><span class="sxs-lookup"><span data-stu-id="97e88-239">Markup Extensions in the XAML Node Stream</span></span>  
 <span data-ttu-id="97e88-240">Si vous travaillez avec un flux de nœud XAML dans le chemin de chargement, l'utilisation d'une extension de balisage est représentée dans le flux de nœud sous la forme d'un objet.</span><span class="sxs-lookup"><span data-stu-id="97e88-240">If you are working with a XAML node stream on the load path, a markup extension usage appears in the node stream as an object.</span></span>  
  
 <span data-ttu-id="97e88-241">Si l'utilisation d'une extension de balisage fait appel à des arguments de position, elle est représentée sous la forme d'un objet de début avec une valeur d'initialisation.</span><span class="sxs-lookup"><span data-stu-id="97e88-241">If the markup extension usage uses positional arguments, it is represented as a start object with an initialization value.</span></span> <span data-ttu-id="97e88-242">Selon une représentation textuelle approximative, le flux de nœud a l'apparence suivante :</span><span class="sxs-lookup"><span data-stu-id="97e88-242">As a rough text representation, the node stream resembles the following:</span></span>  
  
 <span data-ttu-id="97e88-243">`StartObject` (<xref:System.Xaml.XamlType> est le type de définition de l'extension de balisage, et non pas son type de retour)</span><span class="sxs-lookup"><span data-stu-id="97e88-243">`StartObject` (<xref:System.Xaml.XamlType> is the markup extension's definition type, not its return type)</span></span>  
  
 <span data-ttu-id="97e88-244">`StartMember` (le nom de <xref:System.Xaml.XamlMember> est `_InitializationText`)</span><span class="sxs-lookup"><span data-stu-id="97e88-244">`StartMember` (name of the <xref:System.Xaml.XamlMember> is `_InitializationText`)</span></span>  
  
 <span data-ttu-id="97e88-245">`Value` (la valeur correspond aux arguments de position spécifiés sous forme de chaîne, y compris les délimiteurs intermédiaires)</span><span class="sxs-lookup"><span data-stu-id="97e88-245">`Value` (value is the positional arguments as a string including the intervening delimiters)</span></span>  
  
 `EndMember`  
  
 `EndObject`  
  
 <span data-ttu-id="97e88-246">L'utilisation d'une extension de balisage avec des arguments nommés est représentée sous la forme d'un objet dont les membres ont les noms appropriés, chacun étant défini avec des valeurs de chaîne de texte.</span><span class="sxs-lookup"><span data-stu-id="97e88-246">A markup extension usage with named arguments is represented as an object with members of the relevant names, each set with text string values.</span></span>  
  
 <span data-ttu-id="97e88-247">L'appel réel de l'implémentation de `ProvideValue` d'une extension de balisage requiert le contexte de schéma XAML, car cette opération nécessite un mappage de type et la création d'une instance de type de prise en charge d'extension de balisage.</span><span class="sxs-lookup"><span data-stu-id="97e88-247">Actually invoking the `ProvideValue` implementation of a markup extension requires the XAML schema context because that requires type-mapping and creating a markup extension support type instance.</span></span> <span data-ttu-id="97e88-248">C'est une des raisons pour lesquelles les utilisations d'extensions de balisage sont conservées de cette façon dans les flux de nœud des services XAML .NET Framework par défaut ; il est fréquent que la partie lecteur d'un chemin de chargement ne dispose pas du contexte de schéma XAML nécessaire.</span><span class="sxs-lookup"><span data-stu-id="97e88-248">This is one reason why markup extension usages are preserved this way in the default .NET Framework XAML Services node streams -  the reader part of a load path often does not have the necessary XAML schema context available.</span></span>  
  
 <span data-ttu-id="97e88-249">Si vous travaillez avec un flux de nœud XAML dans le chemin d'enregistrement, la représentation du graphique d'objets ne contient généralement aucun élément pouvant vous indiquer que l'objet à sérialiser a été initialement fourni par une utilisation d'extension de balisage et un résultat `ProvideValue` .</span><span class="sxs-lookup"><span data-stu-id="97e88-249">If you are working with a XAML node stream on the save path, there generally is nothing present in an object graph representation that can inform you that the object to serialize was originally provided by a markup extension usage and a `ProvideValue` result.</span></span> <span data-ttu-id="97e88-250">Les scénarios qui doivent rendre persistantes les utilisations des extensions de balisage pour les allers-retours tout en capturant d'autres modifications dans le graphique d'objets requièrent la conception de techniques spécifiques pour conserver les informations d'utilisation des extensions de balisage de l'entrée XAML d'origine.</span><span class="sxs-lookup"><span data-stu-id="97e88-250">Scenarios that need to persist markup extension usages for round-tripping while also capturing other changes in the object graph must devise their own techniques for preserving the knowledge of a markup extension usage from the original XAML input.</span></span> <span data-ttu-id="97e88-251">Par exemple, pour restaurer les utilisations d'extensions de balisage, vous devrez peut-être travailler avec le flux de nœud dans le chemin d'enregistrement ou effectuer un certain type de fusion entre le code XAML d'origine et le code XAML faisant l'objet d'allers-retours.</span><span class="sxs-lookup"><span data-stu-id="97e88-251">For example, to restore the markup extension usages, you may need to work with the node stream on the save path in order to restore markup extension usages, or perform some type of merge between the original XAML and the round-tripped XAML.</span></span> <span data-ttu-id="97e88-252">Certaines infrastructures d'implémentation en XAML telles que WPF utilisent des types intermédiaires (expressions) pour faciliter la représentation des cas où les utilisations d'extensions de balisage ont fourni les valeurs.</span><span class="sxs-lookup"><span data-stu-id="97e88-252">Some XAML-implementing frameworks such as WPF use intermediate types (expressions) to help represent cases where markup extension usages provided the values.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="97e88-253">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="97e88-253">See Also</span></span>  
 <xref:System.Windows.Markup.MarkupExtension>  
 [<span data-ttu-id="97e88-254">Convertisseurs de types et extensions de balisage pour XAML</span><span class="sxs-lookup"><span data-stu-id="97e88-254">Type Converters and Markup Extensions for XAML</span></span>](../../../docs/framework/xaml-services/type-converters-and-markup-extensions-for-xaml.md)  
 [<span data-ttu-id="97e88-255">Extensions de balisage et XAML WPF</span><span class="sxs-lookup"><span data-stu-id="97e88-255">Markup Extensions and WPF XAML</span></span>](../../../docs/framework/wpf/advanced/markup-extensions-and-wpf-xaml.md)
