---
title: "Meilleures pratiques : contrôle de version des contrats de données"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- data contracts
- service contracts
- best practices [WCF], data contract versioning
- Windows Communication Foundation, data contracts
ms.assetid: bf0ab338-4d36-4e12-8002-8ebfdeb346cb
caps.latest.revision: "24"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: 78373d482aaaa0121a6c2708f543188d9cc9464d
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 12/22/2017
---
# <a name="best-practices-data-contract-versioning"></a><span data-ttu-id="dd0ae-102">Meilleures pratiques : contrôle de version des contrats de données</span><span class="sxs-lookup"><span data-stu-id="dd0ae-102">Best Practices: Data Contract Versioning</span></span>
<span data-ttu-id="dd0ae-103">Cette rubrique répertorie les méthodes conseillées pour créer des contrats de données qui peuvent évoluer facilement avec le temps.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-103">This topic lists the best practices for creating data contracts that can evolve easily over time.</span></span> [!INCLUDE[crabout](../../../includes/crabout-md.md)]<span data-ttu-id="dd0ae-104">contrats de données, consultez les rubriques de [à l’aide de contrats de données](../../../docs/framework/wcf/feature-details/using-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="dd0ae-104"> data contracts, see the topics in [Using Data Contracts](../../../docs/framework/wcf/feature-details/using-data-contracts.md).</span></span>  
  
## <a name="note-on-schema-validation"></a><span data-ttu-id="dd0ae-105">Note sur la validation de schéma</span><span class="sxs-lookup"><span data-stu-id="dd0ae-105">Note on Schema Validation</span></span>  
 <span data-ttu-id="dd0ae-106">Lorsqu'il est question du contrôle de version des contrats de données, il est important de noter que le schéma de contrat de données exporté par [!INCLUDE[indigo1](../../../includes/indigo1-md.md)] n'offre pas d'autre prise en charge du contrôle de version que de marquer les éléments par défaut comme facultatifs.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-106">In discussing data contract versioning, it is important to note that the data contract schema exported by [!INCLUDE[indigo1](../../../includes/indigo1-md.md)] does not have any versioning support, other than the fact that elements are marked as optional by default.</span></span>  
  
 <span data-ttu-id="dd0ae-107">Cela signifie que même le scénario le plus courant de contrôle de version, tel que l'ajout d'un nouveau membre de données, ne peut pas être implémenté d'une manière transparente par rapport à un schéma donné.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-107">This means that even the most common versioning scenario, such as adding a new data member, cannot be implemented in a way that is seamless with regard to a given schema.</span></span> <span data-ttu-id="dd0ae-108">Les versions plus récentes d'un contrat de données (avec un nouveau membre de données, par exemple) ne valident pas l'utilisation de l'ancien schéma.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-108">The newer versions of a data contract (with a new data member, for example) do not validate using the old schema.</span></span>  
  
 <span data-ttu-id="dd0ae-109">Toutefois, de nombreux scénarios existent où la stricte conformité de schéma n'est pas nécessaire.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-109">However, there are many scenarios in which strict schema compliance is not required.</span></span> <span data-ttu-id="dd0ae-110">De nombreuses plateformes de services Web, notamment les services Web XML et [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] créés à l'aide d'ASP.NET, n'exécutent pas de validation de schéma par défaut et par conséquent acceptent des éléments supplémentaires non décrits par le schéma.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-110">Many Web services platforms, including [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] and XML Web services created using ASP.NET, do not perform schema validation by default and therefore tolerate extra elements that are not described by the schema.</span></span> <span data-ttu-id="dd0ae-111">L'utilisation de ces plateformes simplifie l'implémentation d'un grand nombre de scénarios de contrôle de version.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-111">When working with such platforms, many versioning scenarios are easier to implement.</span></span>  
  
 <span data-ttu-id="dd0ae-112">Par conséquent, il existe deux jeux d'instructions relatives au contrôle de version des contrats de données : un jeu pour les scénarios où la validation stricte de schéma est importante, et un autre jeu pour les scénarios où elle ne l'est pas.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-112">Thus, there are two sets of data contract versioning guidelines: one set for scenarios where strict schema validity is important, and another set for scenarios when it is not.</span></span>  
  
## <a name="versioning-when-schema-validation-is-required"></a><span data-ttu-id="dd0ae-113">Contrôle de version lorsque la validation de schéma est requise</span><span class="sxs-lookup"><span data-stu-id="dd0ae-113">Versioning When Schema Validation Is Required</span></span>  
 <span data-ttu-id="dd0ae-114">Si la validité stricte de schéma est requise dans toutes les directions (du nouveau vers l'ancien et de l'ancien vers le nouveau), les contrats de données doivent être considérés comme immuables.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-114">If strict schema validity is required in all directions (new-to-old and old-to-new), data contracts should be considered immutable.</span></span> <span data-ttu-id="dd0ae-115">Si le contrôle de version est requis, un nouveau contrat de données doit être créé, avec un nom ou un espace de noms différent, et la version du contrat de service qui utilise le type de données doit être gérée en conséquence.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-115">If versioning is required, a new data contract should be created, with a different name or namespace, and the service contract using the data type should be versioned accordingly.</span></span>  
  
 <span data-ttu-id="dd0ae-116">Par exemple, un contrat de service pour le traitement de bon de commande nommé `PoProcessing` avec une opération `PostPurchaseOrder` accepte un paramètre conforme à un contrat de données `PurchaseOrder`.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-116">For example, a purchase order processing service contract named `PoProcessing` with a `PostPurchaseOrder` operation takes a parameter that conforms to a `PurchaseOrder` data contract.</span></span> <span data-ttu-id="dd0ae-117">Si le contrat `PurchaseOrder` doit changer, vous devez créer un contrat de données, c'est-à-dire `PurchaseOrder2`, qui inclut les modifications.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-117">If the `PurchaseOrder` contract has to change, you must create a new data contract, that is, `PurchaseOrder2`, which includes the changes.</span></span> <span data-ttu-id="dd0ae-118">Vous devez gérer ensuite le contrôle de version au niveau du contrat de service.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-118">You must then handle the versioning at the service contract level.</span></span> <span data-ttu-id="dd0ae-119">Par exemple, en créant une opération `PostPurchaseOrder2` qui accepte le paramètre `PurchaseOrder2` ou en créant un contrat de service `PoProcessing2` où l'opération `PostPurchaseOrder` accepte un contrat de données `PurchaseOrder2`.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-119">For example, by creating a `PostPurchaseOrder2` operation that takes the `PurchaseOrder2` parameter, or by creating a `PoProcessing2` service contract where the `PostPurchaseOrder` operation takes a `PurchaseOrder2` data contract.</span></span>  
  
 <span data-ttu-id="dd0ae-120">Notez que les modifications dans les contrats de données référencés par d'autres contrats de données s'étendent aussi à la couche de modèle de service.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-120">Note that changes in data contracts that are referenced by other data contracts also extend to the service model layer.</span></span> <span data-ttu-id="dd0ae-121">Par exemple, dans le scénario précédent, le contrat de données `PurchaseOrder` n'a pas besoin d'être modifié.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-121">For example, in the previous scenario the `PurchaseOrder` data contract does not need to change.</span></span> <span data-ttu-id="dd0ae-122">Cependant, il contient un membre de données d'un contrat de données `Customer`, qui contenait de son côté un membre de données du contrat de données `Address`, qui doit être modifié.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-122">However, it contains a data member of a `Customer` data contract, which in turn contained a data member of the `Address` data contract, which does need to be changed.</span></span> <span data-ttu-id="dd0ae-123">Dans ce cas, vous devez créer un contrat de données `Address2` contenant les modifications requises, un contrat de données `Customer2` qui contient le membre de données `Address2`, et un contrat de données `PurchaseOrder2` qui contient un membre de données `Customer2`.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-123">In that case, you would need to create an `Address2` data contract with the required changes, a `Customer2` data contract that contains the `Address2` data member, and a `PurchaseOrder2` data contract that contains a `Customer2` data member.</span></span> <span data-ttu-id="dd0ae-124">Comme dans le cas précédent, la version du contrat de service doit aussi être prise en charge.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-124">As in the previous case, the service contract would have to be versioned as well.</span></span>  
  
 <span data-ttu-id="dd0ae-125">Même si les noms dans ces exemples sont changés (en ajoutant un "2"), il est recommandé de modifier les espaces de noms plutôt que les noms en ajoutant de nouveaux espaces de noms avec un numéro de version ou une date.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-125">Although in these examples names are changed (by appending a "2"), the recommendation is to change namespaces instead of names by appending new namespaces with a version number or a date.</span></span> <span data-ttu-id="dd0ae-126">Par exemple, le contrat de données `http://schemas.contoso.com/2005/05/21/PurchaseOrder` se transformerait en contrat de données `http://schemas.contoso.com/2005/10/14/PurchaseOrder`</span><span class="sxs-lookup"><span data-stu-id="dd0ae-126">For example, the `http://schemas.contoso.com/2005/05/21/PurchaseOrder` data contract would change to the `http://schemas.contoso.com/2005/10/14/PurchaseOrder` data contract.</span></span>  
  
 [!INCLUDE[crdefault](../../../includes/crdefault-md.md)]<span data-ttu-id="dd0ae-127">Meilleures pratiques : [le contrôle de version de Service](../../../docs/framework/wcf/service-versioning.md).</span><span class="sxs-lookup"><span data-stu-id="dd0ae-127"> Best Practices: [Service Versioning](../../../docs/framework/wcf/service-versioning.md).</span></span>  
  
 <span data-ttu-id="dd0ae-128">Parfois, il est nécessaire de garantir la conformité stricte de schéma pour les messages envoyés par votre application, sans pouvoir compter sur la conformité stricte des messages entrants.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-128">Occasionally, you must guarantee strict schema compliance for messages sent by your application, but cannot rely on the incoming messages to be strictly schema-compliant.</span></span> <span data-ttu-id="dd0ae-129">Dans ce cas, il est possible qu'un message entrant contienne des données étrangères.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-129">In this case, there is a danger that an incoming message might contain extraneous data.</span></span> <span data-ttu-id="dd0ae-130">Les valeurs étrangères sont stockées et retournées par [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] et entraînent donc l'envoi de messages dont l'étendue du schéma n'est pas valide.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-130">The extraneous values are stored and returned by [!INCLUDE[indigo2](../../../includes/indigo2-md.md)] and thus results in schema-invalid messages being sent.</span></span> <span data-ttu-id="dd0ae-131">Pour éviter ce problème, la fonctionnalité d'aller-retour doit être désactivée.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-131">To avoid this problem, the round-tripping feature should be turned off.</span></span> <span data-ttu-id="dd0ae-132">Il existe deux manières de procéder.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-132">There are two ways to do this.</span></span>  
  
-   <span data-ttu-id="dd0ae-133">N'implémentez l'interface <xref:System.Runtime.Serialization.IExtensibleDataObject> sur aucun de vos types.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-133">Do not implement the <xref:System.Runtime.Serialization.IExtensibleDataObject> interface on any of your types.</span></span>  
  
-   <span data-ttu-id="dd0ae-134">Appliquez un attribut <xref:System.ServiceModel.ServiceBehaviorAttribute> à votre contrat de service en affectant à la propriété <xref:System.ServiceModel.ServiceBehaviorAttribute.IgnoreExtensionDataObject%2A> la valeur `true`.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-134">Apply a <xref:System.ServiceModel.ServiceBehaviorAttribute> attribute to your service contract with the <xref:System.ServiceModel.ServiceBehaviorAttribute.IgnoreExtensionDataObject%2A> property set to `true`.</span></span>  
  
 [!INCLUDE[crabout](../../../includes/crabout-md.md)]<span data-ttu-id="dd0ae-135">aller-retour, consultez [les contrats de données de compatibilité ascendante](../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="dd0ae-135"> round-tripping, see [Forward-Compatible Data Contracts](../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md).</span></span>  
  
## <a name="versioning-when-schema-validation-is-not-required"></a><span data-ttu-id="dd0ae-136">Contrôle de version lorsque la validation de schéma n’est pas requise</span><span class="sxs-lookup"><span data-stu-id="dd0ae-136">Versioning When Schema Validation Is Not Required</span></span>  
 <span data-ttu-id="dd0ae-137">La conformité stricte de schéma est rarement requise.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-137">Strict schema compliance is rarely required.</span></span> <span data-ttu-id="dd0ae-138">De nombreuses plateformes tolèrent des éléments supplémentaires non décrits par un schéma.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-138">Many platforms tolerate extra elements not described by a schema.</span></span> <span data-ttu-id="dd0ae-139">Tant que cela est tolérée, l’ensemble complet des fonctionnalités décrites dans [contrôle de version de contrat de données](../../../docs/framework/wcf/feature-details/data-contract-versioning.md) et [les contrats de données de compatibilité ascendante](../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md) peut être utilisé.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-139">As long as this is tolerated, the full set of features described in [Data Contract Versioning](../../../docs/framework/wcf/feature-details/data-contract-versioning.md) and [Forward-Compatible Data Contracts](../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md) can be used.</span></span> <span data-ttu-id="dd0ae-140">Les instructions suivantes sont recommandées.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-140">The following guidelines are recommended.</span></span>  
  
 <span data-ttu-id="dd0ae-141">Certaines instructions doivent être suivies à la lettre pour envoyer de nouvelles versions d'un type alors qu'un type antérieur est attendu ou envoyer un type antérieur alors qu'une nouvelle version est attendue.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-141">Some of the guidelines must be followed exactly in order to send new versions of a type where an older one is expected or send an old one where the new one is expected.</span></span> <span data-ttu-id="dd0ae-142">Certaines instructions ne sont pas obligatoires, mais sont répertoriées dans ce contexte parce qu'elles peuvent être concernées à terme par l'évolution du contrôle de version de schéma.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-142">Other guidelines are not strictly required, but are listed here because they may be affected by the future of schema versioning.</span></span>  
  
1.  <span data-ttu-id="dd0ae-143">Ne tentez pas de gérer les versions des contrats de données selon l'héritage de types.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-143">Do not attempt to version data contracts by type inheritance.</span></span> <span data-ttu-id="dd0ae-144">Pour créer des versions ultérieures, modifiez le contrat de données sur un type existant ou créez un nouveau type non apparenté.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-144">To create later versions, either change the data contract on an existing type or create a new unrelated type.</span></span>  
  
2.  <span data-ttu-id="dd0ae-145">L'utilisation de l'héritage avec les contrats de données est autorisée, à condition que l'héritage ne soit pas utilisé comme un mécanisme de contrôle des versions et que certaines règles soient observées.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-145">The use of inheritance together with data contracts is allowed, provided that inheritance is not used as a versioning mechanism and that certain rules are followed.</span></span> <span data-ttu-id="dd0ae-146">Si un type dérive d'un certain type de base, ne le faites pas dériver d'un autre type de base dans une version future (sauf s'il a le même contrat de données).</span><span class="sxs-lookup"><span data-stu-id="dd0ae-146">If a type derives from a certain base type, do not make it derive from a different base type in a future version (unless it has the same data contract).</span></span> <span data-ttu-id="dd0ae-147">Il y a une exception à cela : vous pouvez insérer un type dans la hiérarchie entre un type de contrat de données et son type de base, mais uniquement s'il ne contient pas de membre de données avec les mêmes noms que d'autres membres dans n'importe quelle version possible des autres types dans la hiérarchie.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-147">There is one exception to this: you can insert a type into the hierarchy between a data contract type and its base type, but only if it does not contain data members with the same names as other members in any possible versions of the other types in the hierarchy.</span></span> <span data-ttu-id="dd0ae-148">En général, l'utilisation de membres de données avec les mêmes noms à différents niveaux de la même hiérarchie d'héritage peut causer des problèmes de contrôle de version et doit être évité.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-148">In general, using data members with the same names at different levels of the same inheritance hierarchy can lead to serious versioning problems and should be avoided.</span></span>  
  
3.  <span data-ttu-id="dd0ae-149">Pour la première version d'un contrat de données, implémentez toujours <xref:System.Runtime.Serialization.IExtensibleDataObject> pour permettre l'aller-retour.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-149">Starting with the first version of a data contract, always implement <xref:System.Runtime.Serialization.IExtensibleDataObject> to enable round-tripping.</span></span> [!INCLUDE[crdefault](../../../includes/crdefault-md.md)]<span data-ttu-id="dd0ae-150">[Des contrats de données à compatibilité ascendante](../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="dd0ae-150"> [Forward-Compatible Data Contracts](../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md).</span></span> <span data-ttu-id="dd0ae-151">Si vous avez publié une ou plusieurs versions d’un type sans implémenter cette interface, implémentez-la dans la version suivante du type.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-151">If you have released one or more versions of a type without implementing this interface, implement it in the next version of the type.</span></span>  
  
4.  <span data-ttu-id="dd0ae-152">Dans les versions ultérieures, ne modifiez pas le nom ou l'espace de noms de contrat de données.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-152">In later versions, do not change the data contract name or namespace.</span></span> <span data-ttu-id="dd0ae-153">Si vous modifiez le nom ou l'espace de noms du type qui sous tend le contrat de données, veillez à conserver le nom et l'espace de noms de contrat de données en utilisant les mécanismes appropriés, tels que la propriété <xref:System.Runtime.Serialization.DataContractAttribute.Name%2A> du <xref:System.Runtime.Serialization.DataContractAttribute>.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-153">If changing the name or namespace of the type underlying the data contract, be sure to preserve the data contract name and namespace by using the appropriate mechanisms, such as the <xref:System.Runtime.Serialization.DataContractAttribute.Name%2A> property of the <xref:System.Runtime.Serialization.DataContractAttribute>.</span></span> [!INCLUDE[crabout](../../../includes/crabout-md.md)]<span data-ttu-id="dd0ae-154">attribution de noms, consultez [les noms de contrat de données](../../../docs/framework/wcf/feature-details/data-contract-names.md).</span><span class="sxs-lookup"><span data-stu-id="dd0ae-154"> naming, see [Data Contract Names](../../../docs/framework/wcf/feature-details/data-contract-names.md).</span></span>  
  
5.  <span data-ttu-id="dd0ae-155">Dans les versions ultérieures, ne modifiez pas les noms de membres de données.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-155">In later versions, do not change the names of any data members.</span></span> <span data-ttu-id="dd0ae-156">Si vous modifiez le nom du champ, de la propriété ou de l'événement qui sous-tend le membre de données, utilisez la propriété `Name` du <xref:System.Runtime.Serialization.DataMemberAttribute> pour conserver le nom du membre de données existant.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-156">If changing the name of the field, property, or event underlying the data member, use the `Name` property of the <xref:System.Runtime.Serialization.DataMemberAttribute> to preserve the existing data member name.</span></span>  
  
6.  <span data-ttu-id="dd0ae-157">Dans les versions ultérieures, ne modifiez pas le type d'un champ, d'une propriété ou d'un événement qui sous-tend un membre de données de telle sorte que le contrat de données résultant pour ce membre de données s'en trouve modifié.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-157">In later versions, do not change the type of any field, property, or event underlying a data member such that the resulting data contract for that data member changes.</span></span> <span data-ttu-id="dd0ae-158">N'oubliez pas que les types d'interface sont équivalents à <xref:System.Object> lorsqu'il s'agit de déterminer le contrat de données attendu.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-158">Keep in mind that interface types are equivalent to <xref:System.Object> for the purposes of determining the expected data contract.</span></span>  
  
7.  <span data-ttu-id="dd0ae-159">Dans les versions ultérieures, ne modifiez pas l'ordre des membres de données existants en ajustant la propriété <xref:System.Runtime.Serialization.DataMemberAttribute.Order%2A> de l'attribut <xref:System.Runtime.Serialization.DataMemberAttribute>.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-159">In later versions, do not change the order of the existing data members by adjusting the <xref:System.Runtime.Serialization.DataMemberAttribute.Order%2A> property of the <xref:System.Runtime.Serialization.DataMemberAttribute> attribute.</span></span>  
  
8.  <span data-ttu-id="dd0ae-160">Dans les versions ultérieures, il est possible d'ajouter des membres de données.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-160">In later versions, new data members can be added.</span></span> <span data-ttu-id="dd0ae-161">Ceux-ci doivent toujours observer les règles suivantes :</span><span class="sxs-lookup"><span data-stu-id="dd0ae-161">They should always follow these rules:</span></span>  
  
    1.  <span data-ttu-id="dd0ae-162">La propriété <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> doit toujours conserver sa valeur par défaut de `false`.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-162">The <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> property should always be left at its default value of `false`.</span></span>  
  
    2.  <span data-ttu-id="dd0ae-163">Si le membre ne peut pas avoir de valeur par défaut `null` ou zéro, une méthode de rappel doit être fournie à l'aide de <xref:System.Runtime.Serialization.OnDeserializingAttribute> pour fournir une valeur par défaut acceptable au cas où le membre ne serait pas présent dans le flux de données entrant.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-163">If a default value of `null` or zero for the member is unacceptable, a callback method should be provided using the <xref:System.Runtime.Serialization.OnDeserializingAttribute> to provide a reasonable default in case the member is not present in the incoming stream.</span></span> [!INCLUDE[crabout](../../../includes/crabout-md.md)]<span data-ttu-id="dd0ae-164">le rappel, consultez [des rappels de sérialisation avec tolérance de Version](../../../docs/framework/wcf/feature-details/version-tolerant-serialization-callbacks.md).</span><span class="sxs-lookup"><span data-stu-id="dd0ae-164"> the callback, see [Version-Tolerant Serialization Callbacks](../../../docs/framework/wcf/feature-details/version-tolerant-serialization-callbacks.md).</span></span>  
  
    3.  <span data-ttu-id="dd0ae-165">La propriété `Order` sur le `DataMemberAttribute` doit être utilisée pour garantir que les membres de données ajoutés récemment apparaissent à la suite des membres de données existants.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-165">The `Order` property on the `DataMemberAttribute` should be used to make sure that all of the newly added data members appear after the existing data members.</span></span> <span data-ttu-id="dd0ae-166">Pour cela, la méthode recommandée consiste à ne pas définir la propriété `Order` des membres de données dans la première version du contrat de données.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-166">The recommended way of doing this is as follows: None of the data members in the first version of the data contract should have their `Order` property set.</span></span> <span data-ttu-id="dd0ae-167">La propriété `Order` de tous les membres de données ajoutés à la version 2 du contrat de données doit avoir la valeur 2.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-167">All of the data members added in version 2 of the data contract should have their `Order` property set to 2.</span></span> <span data-ttu-id="dd0ae-168">La propriété `Order` de tous les membres de données ajoutés à la version 3 du contrat de données doit avoir la valeur 3, etc.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-168">All of the data members added in version 3 of the data contract should have their `Order` set to 3, and so on.</span></span> <span data-ttu-id="dd0ae-169">Il est possible que plusieurs membres de données aient le même numéro d'`Order`.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-169">It is permissible to have more than one data member set to the same `Order` number.</span></span>  
  
9. <span data-ttu-id="dd0ae-170">Ne supprimez pas de membres de données dans les versions ultérieures, même si la propriété <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> conserve sa propriété `false` par défaut dans les versions antérieures.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-170">Do not remove data members in later versions, even if the <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A> property was left at its default property of `false` in prior versions.</span></span>  
  
10. <span data-ttu-id="dd0ae-171">Ne modifiez pas la propriété `IsRequired` sur des membres de données existante d'une version à l'autre.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-171">Do not change the `IsRequired` property on any existing data members from version to version.</span></span>  
  
11. <span data-ttu-id="dd0ae-172">Pour les membres de données obligatoires (où `IsRequired` a la valeur `true`), ne modifiez pas la propriété `EmitDefaultValue` d'une version à l'autre.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-172">For required data members (where `IsRequired` is `true`), do not change the `EmitDefaultValue` property from version to version.</span></span>  
  
12. <span data-ttu-id="dd0ae-173">N'essayez pas de créer des hiérarchies de contrôle de version avec des branches.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-173">Do not attempt to create branched versioning hierarchies.</span></span> <span data-ttu-id="dd0ae-174">Autrement dit, il doit toujours y avoir un chemin d'accès dans au moins une direction d'une version à l'autre qui utilise uniquement les modifications autorisées par ces instructions.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-174">That is, there should always be a path in at least one direction from any version to any other version using only the changes permitted by these guidelines.</span></span>  
  
     <span data-ttu-id="dd0ae-175">Par exemple, si la version 1 d'un contrat de données Person contient uniquement le membre de données Name, vous ne devez pas créer une version 2a du contrat en ajoutant seulement le membre Age, et la version 2b en ajoutant seulement le membre Address.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-175">For example, if version 1 of a Person data contract contains only the Name data member, you should not create version 2a of the contract adding only the Age member and version 2b adding only the Address member.</span></span> <span data-ttu-id="dd0ae-176">La transition de 2a à 2b impliquerait la suppression du membre Age et l'ajout d'Address ; dans la direction inverse, il faudrait supprimer Address et ajouter Age.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-176">Going from 2a to 2b would involve removing Age and adding Address; going in the other direction would entail removing Address and adding Age.</span></span> <span data-ttu-id="dd0ae-177">La suppression de membres n'est pas autorisée par ces instructions.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-177">Removing members is not permitted by these guidelines.</span></span>  
  
13. <span data-ttu-id="dd0ae-178">En règle général, il ne faut pas créer de nouveaux sous-types de types de contrat de données existants dans une nouvelle version de votre application.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-178">You should generally not create new subtypes of existing data contract types in a new version of your application.</span></span> <span data-ttu-id="dd0ae-179">De même, il ne faut pas créer de nouveaux contrats de données utilisés à la place des membres de données déclarés en tant qu'Object ou comme types d'interface.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-179">Likewise, you should not create new data contracts that are used in place of data members declared as Object or as interface types.</span></span> <span data-ttu-id="dd0ae-180">La création de ces nouvelles classes est autorisée uniquement lorsque vous savez que vous pouvez ajouter les nouveaux types à la liste des types connus de toutes les instances de votre ancienne application.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-180">Creating these new classes is allowed only when you know that you can add the new types to the known types list of all instances of your old application.</span></span> <span data-ttu-id="dd0ae-181">Par exemple, dans la version 1 de votre application, vous pouvez avoir le type de contrat de données LibraryItem avec les sous-types du contrat de données Book et Newspaper.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-181">For example, in version 1 of your application, you may have the LibraryItem data contract type with the Book and Newspaper data contract subtypes.</span></span> <span data-ttu-id="dd0ae-182">LibraryItem aurait ensuite une liste de types connus qui contient Book et Newspaper.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-182">LibraryItem would then have a known types list that contains Book and Newspaper.</span></span> <span data-ttu-id="dd0ae-183">Supposons que vous ajoutez maintenant un type Magazine dans la version 2 qui est un sous-type de LibraryItem.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-183">Suppose you now add a Magazine type in version 2 which is a subtype of LibraryItem.</span></span> <span data-ttu-id="dd0ae-184">Si vous envoyez une instance Magazine de la version 2 à la version 1, le contrat de données Magazine est introuvable dans la liste de types connus et une exception est levée.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-184">If you send a Magazine instance from version 2 to version 1, the Magazine data contract is not found in the list of known types and an exception is thrown.</span></span>  
  
14. <span data-ttu-id="dd0ae-185">Vous ne devez pas ajouter ou supprimer des membres de l'énumération entre des versions.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-185">You should not add or remove enumeration members between versions.</span></span> <span data-ttu-id="dd0ae-186">Vous ne devez pas non plus renommer de membres de l'énumération, sauf si vous utilisez la propriété Name sur l'attribut `EnumMemberAttribute` pour conserver les mêmes noms dans le modèle de contrat de données.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-186">You should also not rename enumeration members, unless you use the Name property on the `EnumMemberAttribute` attribute to keep their names in the data contract model the same.</span></span>  
  
15. <span data-ttu-id="dd0ae-187">Les collections sont interchangeables dans le modèle de contrat de données comme décrit dans [Types de collections dans les contrats de données](../../../docs/framework/wcf/feature-details/collection-types-in-data-contracts.md).</span><span class="sxs-lookup"><span data-stu-id="dd0ae-187">Collections are interchangeable in the data contract model as described in [Collection Types in Data Contracts](../../../docs/framework/wcf/feature-details/collection-types-in-data-contracts.md).</span></span> <span data-ttu-id="dd0ae-188">Cela permet un plus grand degré de souplesse.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-188">This allows for a great degree of flexibility.</span></span> <span data-ttu-id="dd0ae-189">Toutefois, veillez à ne pas modifier accidentellement un type de collection de manière non interchangeable d'une version à l'autre.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-189">However, make sure that you do not inadvertently change a collection type in a non-interchangeable way from version to version.</span></span> <span data-ttu-id="dd0ae-190">Par exemple, ne passez pas d'une collection non personnalisée (autrement dit, sans l'attribut `CollectionDataContractAttribute`) à une collection personnalisée ou vice versa.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-190">For example, do not change from a non-customized collection (that is, without the `CollectionDataContractAttribute` attribute) to a customized one or a customized collection to a non-customized one.</span></span> <span data-ttu-id="dd0ae-191">Ne modifiez pas non plus les propriétés sur `CollectionDataContractAttribute` d'une version à l'autre.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-191">Also, do not change the properties on the `CollectionDataContractAttribute` from version to version.</span></span> <span data-ttu-id="dd0ae-192">La seule modification autorisée consiste à ajouter une propriété Name ou Namespace si le nom ou l'espace de noms du type de collection sous-jacent a changé et si vous conservez le même nom et espace de noms de contrat de données que dans une version antérieure.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-192">The only allowed change is adding a Name or Namespace property if the underlying collection type's name or namespace has changed and you need to make its data contract name and namespace the same as in a previous version.</span></span>  
  
 <span data-ttu-id="dd0ae-193">Certaines instructions répertoriées dans cette rubrique peuvent être ignorées sans risque si des circonstances particulières s'appliquent.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-193">Some of the guidelines listed here can be safely ignored when special circumstances apply.</span></span> <span data-ttu-id="dd0ae-194">Veillez à bien maîtriser la sérialisation, la désérialisation et les mécanismes de schéma concernés avant de prendre des libertés avec les instructions.</span><span class="sxs-lookup"><span data-stu-id="dd0ae-194">Make sure you fully understand the serialization, deserialization, and schema mechanisms involved before deviating from the guidelines.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="dd0ae-195">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="dd0ae-195">See Also</span></span>  
 <xref:System.Runtime.Serialization.DataContractAttribute.Name%2A>  
 <xref:System.Runtime.Serialization.DataContractAttribute>  
 <xref:System.Runtime.Serialization.DataMemberAttribute.Order%2A>  
 <xref:System.Runtime.Serialization.DataMemberAttribute.IsRequired%2A>  
 <xref:System.Runtime.Serialization.IExtensibleDataObject>  
 <xref:System.ServiceModel.ServiceBehaviorAttribute>  
 <xref:System.Runtime.Serialization.IExtensibleDataObject.ExtensionData%2A>  
 <xref:System.Runtime.Serialization.ExtensionDataObject>  
 <xref:System.Runtime.Serialization.OnDeserializingAttribute>  
 [<span data-ttu-id="dd0ae-196">Utilisation de contrats de données</span><span class="sxs-lookup"><span data-stu-id="dd0ae-196">Using Data Contracts</span></span>](../../../docs/framework/wcf/feature-details/using-data-contracts.md)  
 [<span data-ttu-id="dd0ae-197">Gestion de version des contrats de données</span><span class="sxs-lookup"><span data-stu-id="dd0ae-197">Data Contract Versioning</span></span>](../../../docs/framework/wcf/feature-details/data-contract-versioning.md)  
 [<span data-ttu-id="dd0ae-198">Noms de contrats de données</span><span class="sxs-lookup"><span data-stu-id="dd0ae-198">Data Contract Names</span></span>](../../../docs/framework/wcf/feature-details/data-contract-names.md)  
 [<span data-ttu-id="dd0ae-199">Contrats de données à compatibilité ascendante</span><span class="sxs-lookup"><span data-stu-id="dd0ae-199">Forward-Compatible Data Contracts</span></span>](../../../docs/framework/wcf/feature-details/forward-compatible-data-contracts.md)  
 [<span data-ttu-id="dd0ae-200">Rappels de sérialisation avec tolérance de version</span><span class="sxs-lookup"><span data-stu-id="dd0ae-200">Version-Tolerant Serialization Callbacks</span></span>](../../../docs/framework/wcf/feature-details/version-tolerant-serialization-callbacks.md)
