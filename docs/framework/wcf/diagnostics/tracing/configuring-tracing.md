---
title: "Configuration du traçage"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords: tracing [WCF]
ms.assetid: 82922010-e8b3-40eb-98c4-10fc05c6d65d
caps.latest.revision: "53"
author: Erikre
ms.author: erikre
manager: erikre
ms.openlocfilehash: d516d20144b40aa52a5b11177c6794a6935ba989
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/21/2017
---
# <a name="configuring-tracing"></a><span data-ttu-id="7d6bf-102">Configuration du traçage</span><span class="sxs-lookup"><span data-stu-id="7d6bf-102">Configuring Tracing</span></span>
<span data-ttu-id="7d6bf-103">Cette rubrique décrit comment activer le suivi, configurer des sources de suivi pour émettre des suivis et définir des niveaux de suivi, définir le suivi et la propagation d'activité afin de prendre en charge la corrélation de suivi de bout en bout, et définir des écouteurs de suivi pour accéder aux suivis.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-103">This topic describes how you can enable tracing, configure trace sources to emit traces and set trace levels, set activity tracing and propagation to support end-to-end trace correlation, and set trace listeners to access traces.</span></span>  
  
 <span data-ttu-id="7d6bf-104">Pour les recommandations de paramètres de suivi dans l’environnement de débogage ou de production, reportez-vous à [les paramètres recommandés pour le suivi et la journalisation des messages](../../../../../docs/framework/wcf/diagnostics/tracing/recommended-settings-for-tracing-and-message-logging.md).</span><span class="sxs-lookup"><span data-stu-id="7d6bf-104">For tracing settings recommendations in production or debugging environment, refer to [Recommended Settings for Tracing and Message Logging](../../../../../docs/framework/wcf/diagnostics/tracing/recommended-settings-for-tracing-and-message-logging.md).</span></span>  
  
> [!IMPORTANT]
>  <span data-ttu-id="7d6bf-105">Sur Windows 8 vous devez exécuter votre application avec élévation de privilèges (Exécuter en tant qu'administrateur) pour que votre application génère des journaux de traces.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-105">On Windows 8 you must run your application elevated (Run as Administrator) in order for your application to generate trace logs.</span></span>  
  
## <a name="enabling-tracing"></a><span data-ttu-id="7d6bf-106">Activation du suivi</span><span class="sxs-lookup"><span data-stu-id="7d6bf-106">Enabling Tracing</span></span>  
 [!INCLUDE[indigo1](../../../../../includes/indigo1-md.md)]<span data-ttu-id="7d6bf-107"> génère les données suivantes pour le suivi de diagnostic :</span><span class="sxs-lookup"><span data-stu-id="7d6bf-107"> outputs the following data for diagnostic tracing:</span></span>  
  
-   <span data-ttu-id="7d6bf-108">Suivis des jalons de processus dans l'ensemble des composants des applications, tels que les appels d'opération, les exceptions de code, les avertissements et d'autres événements de traitement significatifs.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-108">Traces for process milestones across all components of the applications, such as operation calls, code exceptions, warnings and other significant processing events.</span></span>  
  
-   <span data-ttu-id="7d6bf-109">Événements d’erreur Windows en cas de dysfonctionnement de la fonctionnalité de suivi.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-109">Windows error events when the tracing feature malfunctions.</span></span> <span data-ttu-id="7d6bf-110">Consultez [la journalisation des événements](../../../../../docs/framework/wcf/diagnostics/event-logging/index.md).</span><span class="sxs-lookup"><span data-stu-id="7d6bf-110">See [Event Logging](../../../../../docs/framework/wcf/diagnostics/event-logging/index.md).</span></span>  
  
 <span data-ttu-id="7d6bf-111">Le suivi [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] est construit sur <xref:System.Diagnostics>.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-111">[!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] tracing is built on top of <xref:System.Diagnostics>.</span></span> <span data-ttu-id="7d6bf-112">Pour utiliser le traçage, vous devez définir des sources de trace dans le fichier de configuration ou dans le code.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-112">To use tracing, you should define trace sources in the configuration file or in code.</span></span> [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)]<span data-ttu-id="7d6bf-113"> définit une source de suivi pour chaque assembly [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="7d6bf-113"> defines a trace source for each [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] assembly.</span></span> <span data-ttu-id="7d6bf-114">La source de suivi `System.ServiceModel` est la source de suivi [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] la plus générale ; elle enregistre des jalons de traitement dans la pile de communication [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)], de l'entrée/sortie de transport à l'entrée/sortie de code utilisateur.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-114">The `System.ServiceModel` trace source is the most general [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] trace source, and records processing milestones across the [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] communication stack, from entering/leaving transport to entering/leaving user code.</span></span> <span data-ttu-id="7d6bf-115">La source de suivi `System.ServiceModel.MessageLogging` enregistre tous les messages qui circulent dans le système.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-115">The `System.ServiceModel.MessageLogging` trace source records all messages that flow through the system.</span></span>  
  
 <span data-ttu-id="7d6bf-116">Le suivi est désactivé par défaut.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-116">Tracing is not enabled by default.</span></span> <span data-ttu-id="7d6bf-117">Pour activer le suivi, vous devez créer un écouteur de suivi et définir un niveau de suivi autre que « Désactivé » pour la source de suivi sélectionnée dans la configuration ; autrement, [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] ne génère pas de suivi.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-117">To activate tracing, you must create a trace listener and set a trace level other than "Off" for the selected trace source in configuration; otherwise, [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] does not generate any traces.</span></span> <span data-ttu-id="7d6bf-118">Si vous ne spécifiez pas d'écouteur, le suivi est automatiquement désactivé.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-118">If you do not specify a listener, tracing is automatically disabled.</span></span> <span data-ttu-id="7d6bf-119">Si un écouteur est défini mais qu'aucun niveau n'est spécifié, le niveau a la valeur « Désactivé » par défaut, ce qui signifie qu'aucun suivi n'est émis.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-119">If a listener is defined, but no level is specified, the level is set to "Off" by default, which means that no trace is emitted.</span></span>  
  
 <span data-ttu-id="7d6bf-120">Si vous utilisez des points d'extensibilité [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)], tels que des demandeurs d'opérations personnalisés, vous devez émettre vos propres suivis.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-120">If you use [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] extensibility points such as custom operation invokers, you should emit your own traces.</span></span> <span data-ttu-id="7d6bf-121">En effet, si vous implémentez un point d'extensibilité, [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] n'est plus en mesure d'émettre les suivis standard dans le chemin d'accès par défaut.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-121">This is because if you implement an extensibility point, [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] can no longer emit the standard traces in the default path.</span></span> <span data-ttu-id="7d6bf-122">Si vous n'implémentez par la prise en charge du suivi manuel à l'aide de l'émission de suivis, les suivis peuvent ne pas s'afficher comme prévu.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-122">If you do not implement manual tracing support by emitting traces, you may not see the traces you expect.</span></span>  
  
 <span data-ttu-id="7d6bf-123">Vous pouvez configurer le suivi en modifiant le fichier de configuration de l'application : Web.config pour les applications hébergées sur le Web, ou Appname.exe.config pour les applications auto-hébergées.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-123">You can configure tracing by editing the application’s configuration file—either Web.config for Web-hosted applications, or Appname.exe.config for self-hosted applications.</span></span> <span data-ttu-id="7d6bf-124">Vous trouverez ci-dessous un exemple de ce type de modification :</span><span class="sxs-lookup"><span data-stu-id="7d6bf-124">The following is an example of such edit.</span></span> <span data-ttu-id="7d6bf-125">Pour plus d’informations sur ces paramètres, consultez la section « Configuration de Trace écouteurs pour consommer des suivis ».</span><span class="sxs-lookup"><span data-stu-id="7d6bf-125">For more information on these settings, see the "Configuring Trace Listeners to Consume Traces" section.</span></span>  
  
```xml  
<configuration>  
   <system.diagnostics>  
      <sources>  
            <source name="System.ServiceModel"   
                    switchValue="Information, ActivityTracing"  
                    propagateActivity="true">  
            <listeners>  
               <add name="traceListener"   
                   type="System.Diagnostics.XmlWriterTraceListener"   
                   initializeData= "c:\log\Traces.svclog" />  
            </listeners>  
         </source>  
      </sources>  
   </system.diagnostics>  
</configuration>  
```  
  
> [!NOTE]
>  <span data-ttu-id="7d6bf-126">Pour modifier le fichier de configuration d’un [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] projet de service dans [!INCLUDE[vs_current_short](../../../../../includes/vs-current-short-md.md)], cliquez avec le bouton droit sur le fichier de configuration application : Web.config pour les applications hébergées par le Web, ou Appname.exe.config pour les applications auto-hébergées dans  **L’Explorateur de solutions**.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-126">To edit the configuration file of a [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] service project in [!INCLUDE[vs_current_short](../../../../../includes/vs-current-short-md.md)], right click the application’s configuration file—either Web.config for Web-hosted applications, or Appname.exe.config for self-hosted application in **Solution Explorer**.</span></span> <span data-ttu-id="7d6bf-127">Puis choisissez le **modifier la Configuration WCF** élément de menu contextuel.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-127">Then choose the **Edit WCF Configuration** context menu item.</span></span> <span data-ttu-id="7d6bf-128">Cette opération lance le [l’outil Éditeur de Configuration (SvcConfigEditor.exe)](../../../../../docs/framework/wcf/configuration-editor-tool-svcconfigeditor-exe.md), ce qui vous permet de modifier les paramètres de configuration de [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] services à l’aide d’une interface utilisateur graphique.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-128">This launches the [Configuration Editor Tool (SvcConfigEditor.exe)](../../../../../docs/framework/wcf/configuration-editor-tool-svcconfigeditor-exe.md), which enables you to modify configuration settings for [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] services using a graphical user interface.</span></span>  
  
## <a name="configuring-trace-sources-to-emit-traces"></a><span data-ttu-id="7d6bf-129">Configuration de sources de suivi de façon à émettre des suivis</span><span class="sxs-lookup"><span data-stu-id="7d6bf-129">Configuring Trace Sources to Emit Traces</span></span>  
 [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)]<span data-ttu-id="7d6bf-130"> définit une source de suivi pour chaque assembly.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-130"> defines a trace source for each assembly.</span></span> <span data-ttu-id="7d6bf-131">Les écouteurs définis pour cette source accèdent aux suivis générés dans un assembly.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-131">Traces generated within an assembly are accessed by the listeners defined for that source.</span></span> <span data-ttu-id="7d6bf-132">Les sources de suivi suivantes sont définies :</span><span class="sxs-lookup"><span data-stu-id="7d6bf-132">The following trace sources are defined:</span></span>  
  
-   <span data-ttu-id="7d6bf-133">System.ServiceModel : enregistre toutes les phases de traitement [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)], chaque lecture de la configuration, chaque message traité dans le transport, le traitement de sécurité, chaque envoi d'un message dans le code utilisateur, etc.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-133">System.ServiceModel: Logs all stages of [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] processing, whenever configuration is read, a message is processed in transport, security processing, a message is dispatched in user code, and so on.</span></span>  
  
-   <span data-ttu-id="7d6bf-134">System.ServiceModel.MessageLogging : enregistre tous les messages qui circulent dans le système.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-134">System.ServiceModel.MessageLogging: Logs all messages that flow through the system.</span></span>  
  
-   <span data-ttu-id="7d6bf-135">System.IdentityModel.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-135">System.IdentityModel.</span></span>  
  
-   <span data-ttu-id="7d6bf-136">System.ServiceModel.Activation.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-136">System.ServiceModel.Activation.</span></span>  
  
-   <span data-ttu-id="7d6bf-137">System.IO.Log : enregistrement pour l'interface .NET Framework dans le système CLFS (Common Log File System).</span><span class="sxs-lookup"><span data-stu-id="7d6bf-137">System.IO.Log: Logging for the .NET Framework interface to the Common Log File System (CLFS).</span></span>  
  
-   <span data-ttu-id="7d6bf-138">System.Runtime.Serialization : enregistre la lecture ou l'écriture des objets.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-138">System.Runtime.Serialization: Logs when objects are read or written.</span></span>  
  
-   <span data-ttu-id="7d6bf-139">CardSpace.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-139">CardSpace.</span></span>  
  
 <span data-ttu-id="7d6bf-140">Vous pouvez configurer chaque source de suivi de façon à utiliser le même écouteur (partagé), comme indiqué dans l'exemple de configuration suivant :</span><span class="sxs-lookup"><span data-stu-id="7d6bf-140">You can configure each trace source to use the same (shared) listener, as indicated in the following configuration example.</span></span>  
  
```xml  
<configuration>  
    <system.diagnostics>  
        <sources>  
            <source name="System.ServiceModel"   
                    switchValue="Information, ActivityTracing"  
                    propagateActivity="true">  
                <listeners>  
                    <add name="xml" />  
                </listeners>  
            </source>  
            <source name="CardSpace">  
                <listeners>  
                    <add name="xml" />  
                </listeners>  
            </source>  
            <source name="System.IO.Log">  
                <listeners>  
                    <add name="xml" />  
                </listeners>  
            </source>  
            <source name="System.Runtime.Serialization">  
                <listeners>  
                    <add name="xml" />  
                </listeners>  
            </source>  
            <source name="System.IdentityModel">  
                <listeners>  
                    <add name="xml" />  
                </listeners>  
            </source>  
        </sources>  
  
        <sharedListeners>  
            <add name="xml"  
                 type="System.Diagnostics.XmlWriterTraceListener"  
                 initializeData="c:\log\Traces.svclog" />  
        </sharedListeners>  
    </system.diagnostics>  
</configuration>  
```  
  
 <span data-ttu-id="7d6bf-141">De plus, vous pouvez ajouter des sources de suivi définies par l'utilisateur, comme illustré par l'exemple suivant, de façon à émettre des suivis de code utilisateur :</span><span class="sxs-lookup"><span data-stu-id="7d6bf-141">In addition, you can add user-defined trace sources, as demonstrated by the following example, to emit user code traces.</span></span>  
  
```xml  
<system.diagnostics>  
   <sources>  
       <source name="UserTraceSource" switchValue="Warning, ActivityTracing" >  
          <listeners>  
              <add name="xml"  
                 type="System.Diagnostics.XmlWriterTraceListener"  
                 initializeData="C:\logs\UserTraces.svclog" />  
          </listeners>  
       </source>  
   </sources>  
   <trace autoflush="true" />   
</system.diagnostics>  
```  
  
 [!INCLUDE[crabout](../../../../../includes/crabout-md.md)]<span data-ttu-id="7d6bf-142">Création définie par l’utilisateur des sources de trace, consultez [extension suivi](../../../../../docs/framework/wcf/samples/extending-tracing.md).</span><span class="sxs-lookup"><span data-stu-id="7d6bf-142"> creating user-defined trace sources, see [Extending Tracing](../../../../../docs/framework/wcf/samples/extending-tracing.md).</span></span>  
  
## <a name="configuring-trace-listeners-to-consume-traces"></a><span data-ttu-id="7d6bf-143">Configuration d'écouteurs de suivi pour consommer des suivis</span><span class="sxs-lookup"><span data-stu-id="7d6bf-143">Configuring Trace Listeners to Consume Traces</span></span>  
 <span data-ttu-id="7d6bf-144">Au moment de l'exécution, [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] fournit des données de suivi aux écouteurs qui traitent les données.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-144">At runtime, [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] feeds trace data to the listeners which process the data.</span></span> [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)]<span data-ttu-id="7d6bf-145"> fournit plusieurs écouteurs prédéfinis pour <xref:System.Diagnostics>, qui diffèrent quant au format utilisé pour la sortie.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-145"> provides several predefined listeners for <xref:System.Diagnostics>, which differ in the format they use for output.</span></span> <span data-ttu-id="7d6bf-146">Vous pouvez également ajouter des types d'écouteurs personnalisés.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-146">You can also add custom listener types.</span></span>  
  
 <span data-ttu-id="7d6bf-147">Vous pouvez utiliser `add` pour indiquer les nom et type de l'écouteur de suivi à utiliser.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-147">You can use `add` to specify the name and type of the trace listener you want to use.</span></span> <span data-ttu-id="7d6bf-148">Dans notre exemple de configuration, nous avons nommé l'écouteur `traceListener` et ajouté l'écouteur de suivi standard .NET Framework (`System.Diagnostics.XmlWriterTraceListener`) comme type à utiliser.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-148">In our example configuration, we named the Listener `traceListener` and added the standard .NET Framework trace listener (`System.Diagnostics.XmlWriterTraceListener`) as the type we want to use.</span></span> <span data-ttu-id="7d6bf-149">Vous pouvez ajouter un nombre quelconque d'écouteurs de suivi pour chaque source.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-149">You can add any number of trace listeners for each source.</span></span> <span data-ttu-id="7d6bf-150">Si l'écouteur de suivi émet le suivi dans un fichier, vous devez spécifier le nom et l'emplacement du fichier de sortie dans le fichier de configuration.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-150">If the trace listener emits the trace to a file, you must specify the output file location and name in the configuration file.</span></span> <span data-ttu-id="7d6bf-151">Pour cela, vous devez affecter à `initializeData` le nom du fichier pour cet écouteur.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-151">This is done by setting `initializeData` to the name of the file for that listener.</span></span> <span data-ttu-id="7d6bf-152">Si vous ne spécifiez pas de nom de fichier, un nom de fichier aléatoire est généré en fonction du type d'écouteur utilisé.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-152">If you do not specify a file name, a random file name is generated based on the listener type used.</span></span> <span data-ttu-id="7d6bf-153">Si <xref:System.Diagnostics.XmlWriterTraceListener> est utilisé, un nom de fichier sans extension est généré.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-153">If <xref:System.Diagnostics.XmlWriterTraceListener> is used, a file name with no extension is generated.</span></span> <span data-ttu-id="7d6bf-154">Si vous implémentez un écouteur personnalisé, vous pouvez également utiliser cet attribut pour recevoir des données d'initialisation autres qu'un nom de fichier.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-154">If you implement a custom listener, you can also use this attribute to receive initialization data other than a filename.</span></span> <span data-ttu-id="7d6bf-155">Par exemple, vous pouvez spécifier un identificateur de base de données pour cet attribut.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-155">For example, you can specify a database identifier for this attribute.</span></span>  
  
 <span data-ttu-id="7d6bf-156">Vous pouvez configurer un écouteur de suivi personnalisé pour envoyer des suivis sur le câble, par exemple à une base de données distante.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-156">You can configure a custom trace listener to send traces on the wire, for example, to a remote database.</span></span> <span data-ttu-id="7d6bf-157">En tant que responsable du déploiement d'applications, vous devez appliquer un contrôle d'accès approprié sur les journaux de suivi sur l'ordinateur distant.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-157">As an application deployer, you should enforce proper access control on the trace logs in the remote machine.</span></span>  
  
 <span data-ttu-id="7d6bf-158">Vous pouvez également configurer un écouteur de suivi par programmation.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-158">You can also configure a trace listener programmatically.</span></span> [!INCLUDE[crdefault](../../../../../includes/crdefault-md.md)]<span data-ttu-id="7d6bf-159">[Comment : créer et initialiser les écouteurs de traçage](http://go.microsoft.com/fwlink/?LinkId=94648) et [création d’un TraceListener personnalisé](http://go.microsoft.com/fwlink/?LinkId=96239).</span><span class="sxs-lookup"><span data-stu-id="7d6bf-159"> [How to: Create and Initialize Trace Listeners](http://go.microsoft.com/fwlink/?LinkId=94648) and [Creating a Custom TraceListener](http://go.microsoft.com/fwlink/?LinkId=96239).</span></span>  
  
> [!CAUTION]
>  <span data-ttu-id="7d6bf-160">`System.Diagnostics.XmlWriterTraceListener` n'étant pas thread-safe, la source de suivi peut verrouiller des ressources exclusivement lors de la sortie de suivis.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-160">Because `System.Diagnostics.XmlWriterTraceListener` is not thread-safe, the trace source may lock resources exclusively when outputting traces.</span></span> <span data-ttu-id="7d6bf-161">Lorsque de nombreux threads sortent des suivis vers une source de suivi configurée pour utiliser cet écouteur, un conflit de ressource peut se produire, provoquant une dégradation significative des performances.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-161">When many threads output traces to a trace source configured to use this listener, resource contention may occur, which results in a significant performance issue.</span></span> <span data-ttu-id="7d6bf-162">Pour résoudre ce problème, vous devez implémenter un écouteur personnalisé thread-safe.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-162">To resolve this problem, you should implement a custom listener that is thread-safe.</span></span>  
  
## <a name="trace-level"></a><span data-ttu-id="7d6bf-163">Niveau de suivi</span><span class="sxs-lookup"><span data-stu-id="7d6bf-163">Trace Level</span></span>  
 <span data-ttu-id="7d6bf-164">Le niveau de suivi est contrôlé par le paramètre `switchValue` de la source de suivi.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-164">The tracing level is controlled by the `switchValue` setting of the trace source.</span></span> <span data-ttu-id="7d6bf-165">Les niveaux de suivi disponibles sont décrits dans le tableau suivant.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-165">The available tracing levels are described in the following table.</span></span>  
  
|<span data-ttu-id="7d6bf-166">Niveau de suivi</span><span class="sxs-lookup"><span data-stu-id="7d6bf-166">Trace Level</span></span>|<span data-ttu-id="7d6bf-167">Nature des événements suivis</span><span class="sxs-lookup"><span data-stu-id="7d6bf-167">Nature of the Tracked Events</span></span>|<span data-ttu-id="7d6bf-168">Contenu des événements suivis</span><span class="sxs-lookup"><span data-stu-id="7d6bf-168">Content of the Tracked Events</span></span>|<span data-ttu-id="7d6bf-169">Événements suivis</span><span class="sxs-lookup"><span data-stu-id="7d6bf-169">Tracked Events</span></span>|<span data-ttu-id="7d6bf-170">Cible utilisateur</span><span class="sxs-lookup"><span data-stu-id="7d6bf-170">User Target</span></span>|  
|-----------------|----------------------------------|-----------------------------------|--------------------|-----------------|  
|<span data-ttu-id="7d6bf-171">Off</span><span class="sxs-lookup"><span data-stu-id="7d6bf-171">Off</span></span>|<span data-ttu-id="7d6bf-172">N/A</span><span class="sxs-lookup"><span data-stu-id="7d6bf-172">N/A</span></span>|<span data-ttu-id="7d6bf-173">N/A</span><span class="sxs-lookup"><span data-stu-id="7d6bf-173">N/A</span></span>|<span data-ttu-id="7d6bf-174">Aucun suivi n'est émis.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-174">No traces are emitted.</span></span>|<span data-ttu-id="7d6bf-175">N/A</span><span class="sxs-lookup"><span data-stu-id="7d6bf-175">N/A</span></span>|  
|<span data-ttu-id="7d6bf-176">Critique</span><span class="sxs-lookup"><span data-stu-id="7d6bf-176">Critical</span></span>|<span data-ttu-id="7d6bf-177">Événements « négatifs » : événements qui indiquent un traitement inattendu ou une condition d’erreur.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-177">"Negative" events: events that indicate an unexpected processing or an error condition.</span></span>||<span data-ttu-id="7d6bf-178">Les exceptions non prises en charge, notamment les suivantes, sont enregistrées :</span><span class="sxs-lookup"><span data-stu-id="7d6bf-178">Unhandled exceptions including the following are logged:</span></span><br /><br /> <span data-ttu-id="7d6bf-179">-OutOfMemoryException</span><span class="sxs-lookup"><span data-stu-id="7d6bf-179">-   OutOfMemoryException</span></span><br /><span data-ttu-id="7d6bf-180">-ThreadAbortException (le CLR appelle tout ThreadAbortExceptionHandler)</span><span class="sxs-lookup"><span data-stu-id="7d6bf-180">-   ThreadAbortException (the CLR invokes any ThreadAbortExceptionHandler)</span></span><br /><span data-ttu-id="7d6bf-181">-StackOverflowException (ne peut pas être intercepté)</span><span class="sxs-lookup"><span data-stu-id="7d6bf-181">-   StackOverflowException (cannot be caught)</span></span><br /><span data-ttu-id="7d6bf-182">-ConfigurationErrorsException</span><span class="sxs-lookup"><span data-stu-id="7d6bf-182">-   ConfigurationErrorsException</span></span><br /><span data-ttu-id="7d6bf-183">-SEHException</span><span class="sxs-lookup"><span data-stu-id="7d6bf-183">-   SEHException</span></span><br /><span data-ttu-id="7d6bf-184">-Erreurs de de l’application</span><span class="sxs-lookup"><span data-stu-id="7d6bf-184">-   Application start errors</span></span><br /><span data-ttu-id="7d6bf-185">-Événements Failfast</span><span class="sxs-lookup"><span data-stu-id="7d6bf-185">-   Failfast events</span></span><br /><span data-ttu-id="7d6bf-186">-Le système se bloque</span><span class="sxs-lookup"><span data-stu-id="7d6bf-186">-   System hangs</span></span><br /><span data-ttu-id="7d6bf-187">-Messages incohérents : suivis de messages qui provoquent l’échec de l’application.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-187">-   Poison messages: message traces that cause the application to fail.</span></span>|<span data-ttu-id="7d6bf-188">Administrateurs</span><span class="sxs-lookup"><span data-stu-id="7d6bf-188">Administrators</span></span><br /><br /> <span data-ttu-id="7d6bf-189">Développeurs d'applications</span><span class="sxs-lookup"><span data-stu-id="7d6bf-189">Application developers</span></span>|  
|<span data-ttu-id="7d6bf-190">Erreur</span><span class="sxs-lookup"><span data-stu-id="7d6bf-190">Error</span></span>|<span data-ttu-id="7d6bf-191">Événements « négatifs » : événements qui indiquent un traitement inattendu ou une condition d’erreur.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-191">"Negative" events: events that indicate an unexpected processing or an error condition.</span></span>|<span data-ttu-id="7d6bf-192">Un traitement inattendu s'est produit.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-192">Unexpected processing has happened.</span></span> <span data-ttu-id="7d6bf-193">L'application n'a pas pu effectuer une tâche comme prévu.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-193">The application was not able to perform a task as expected.</span></span> <span data-ttu-id="7d6bf-194">Toutefois, l'application s'exécute encore.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-194">However, the application is still up and running.</span></span>|<span data-ttu-id="7d6bf-195">Toutes les exceptions sont enregistrées.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-195">All exceptions are logged.</span></span>|<span data-ttu-id="7d6bf-196">Administrateurs</span><span class="sxs-lookup"><span data-stu-id="7d6bf-196">Administrators</span></span><br /><br /> <span data-ttu-id="7d6bf-197">Développeurs d'applications</span><span class="sxs-lookup"><span data-stu-id="7d6bf-197">Application developers</span></span>|  
|<span data-ttu-id="7d6bf-198">Warning</span><span class="sxs-lookup"><span data-stu-id="7d6bf-198">Warning</span></span>|<span data-ttu-id="7d6bf-199">Événements « négatifs » : événements qui indiquent un traitement inattendu ou une condition d’erreur.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-199">"Negative" events: events that indicate an unexpected processing or an error condition.</span></span>|<span data-ttu-id="7d6bf-200">Un problème possible s'est produit ou peut se produire, mais l'application fonctionne encore correctement.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-200">A possible problem has occurred or may occur, but the application still functions correctly.</span></span> <span data-ttu-id="7d6bf-201">Toutefois, elle risque de ne plus fonctionner correctement.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-201">However, it may not continue to work properly.</span></span>|<span data-ttu-id="7d6bf-202">-L’application reçoit davantage de demandes que ses paramètres de limitation.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-202">-   The application is receiving more requests than its throttling settings allow.</span></span><br /><span data-ttu-id="7d6bf-203">-La file d’attente de réception est proche de sa capacité maximale configurée.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-203">-   The receiving queue is near its maximum configured capacity.</span></span><br /><span data-ttu-id="7d6bf-204">-Délai d’attente a été dépassé.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-204">-   Timeout has exceeded.</span></span><br /><span data-ttu-id="7d6bf-205">-Informations d’identification sont rejetées.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-205">-   Credentials are rejected.</span></span>|<span data-ttu-id="7d6bf-206">Administrateurs</span><span class="sxs-lookup"><span data-stu-id="7d6bf-206">Administrators</span></span><br /><br /> <span data-ttu-id="7d6bf-207">Développeurs d'applications</span><span class="sxs-lookup"><span data-stu-id="7d6bf-207">Application developers</span></span>|  
|<span data-ttu-id="7d6bf-208">Information</span><span class="sxs-lookup"><span data-stu-id="7d6bf-208">Information</span></span>|<span data-ttu-id="7d6bf-209">Événements « Positifs » : événements qui marquent des jalons</span><span class="sxs-lookup"><span data-stu-id="7d6bf-209">"Positive" events: events that mark successful milestones</span></span>|<span data-ttu-id="7d6bf-210">Jalons importants et atteints relatifs à l'exécution d'application, indépendamment du fonctionnement correct de l'application.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-210">Important and successful milestones of application execution, regardless of whether the application is working properly or not.</span></span>|<span data-ttu-id="7d6bf-211">En général, des messages d'aide au contrôle et au diagnostic de l'état système, à la mesure des performances ou au profilage sont générés.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-211">In general, messages helpful for monitoring and diagnosing system status, measuring performance or profiling are generated.</span></span> <span data-ttu-id="7d6bf-212">Vous pouvez utiliser ces informations pour la planification de capacité et la gestion des performances :</span><span class="sxs-lookup"><span data-stu-id="7d6bf-212">You can use such information for capacity planning and performance management:</span></span><br /><br /> <span data-ttu-id="7d6bf-213">-Les canaux sont créés.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-213">-   Channels are created.</span></span><br /><span data-ttu-id="7d6bf-214">-Écouteurs de point de terminaison sont créés.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-214">-   Endpoint listeners are created.</span></span><br /><span data-ttu-id="7d6bf-215">-Message pénètre/quitte le transport.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-215">-   Message enters/leaves transport.</span></span><br /><span data-ttu-id="7d6bf-216">-Jeton de sécurité est récupérée.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-216">-   Security token is retrieved.</span></span><br /><span data-ttu-id="7d6bf-217">-Paramètre de configuration est en lecture.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-217">-   Configuration setting is read.</span></span>|<span data-ttu-id="7d6bf-218">Administrateurs</span><span class="sxs-lookup"><span data-stu-id="7d6bf-218">Administrators</span></span><br /><br /> <span data-ttu-id="7d6bf-219">Développeurs d'applications</span><span class="sxs-lookup"><span data-stu-id="7d6bf-219">Application developers</span></span><br /><br /> <span data-ttu-id="7d6bf-220">Développeurs de produits.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-220">Product developers.</span></span>|  
|<span data-ttu-id="7d6bf-221">Verbose</span><span class="sxs-lookup"><span data-stu-id="7d6bf-221">Verbose</span></span>|<span data-ttu-id="7d6bf-222">Événements « Positifs » : événements qui marquent des jalons.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-222">"Positive" events: events that mark successful milestones.</span></span>|<span data-ttu-id="7d6bf-223">Des événements de bas niveau pour le code utilisateur et la maintenance sont émis.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-223">Low level events for both user code and servicing are emitted.</span></span>|<span data-ttu-id="7d6bf-224">En général, vous pouvez utiliser ce niveau pour le débogage ou l'optimisation d'application.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-224">In general, you can use this level for debugging or application optimization.</span></span><br /><br /> <span data-ttu-id="7d6bf-225">-En-tête de message compris.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-225">-   Understood message header.</span></span>|<span data-ttu-id="7d6bf-226">Administrateurs</span><span class="sxs-lookup"><span data-stu-id="7d6bf-226">Administrators</span></span><br /><br /> <span data-ttu-id="7d6bf-227">Développeurs d'applications</span><span class="sxs-lookup"><span data-stu-id="7d6bf-227">Application developers</span></span><br /><br /> <span data-ttu-id="7d6bf-228">Développeurs de produits.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-228">Product developers.</span></span>|  
|<span data-ttu-id="7d6bf-229">ActivityTracing</span><span class="sxs-lookup"><span data-stu-id="7d6bf-229">ActivityTracing</span></span>||<span data-ttu-id="7d6bf-230">Transfert d'événements entre des activités de traitement et des composants.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-230">Flow events between processing activities and components.</span></span>|<span data-ttu-id="7d6bf-231">Ce niveau permet aux administrateurs et aux développeurs de corréler des applications dans le même domaine d'application :</span><span class="sxs-lookup"><span data-stu-id="7d6bf-231">This level allows administrators and developers to correlate applications in the same application domain:</span></span><br /><br /> <span data-ttu-id="7d6bf-232">-Effectue le suivi des limites d’activité, tels que Démarrer/arrêter.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-232">-   Traces for activity boundaries, such as start/stop.</span></span><br /><span data-ttu-id="7d6bf-233">-Suivis pour les transferts.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-233">-   Traces for transfers.</span></span>|<span data-ttu-id="7d6bf-234">Tout</span><span class="sxs-lookup"><span data-stu-id="7d6bf-234">All</span></span>|  
|<span data-ttu-id="7d6bf-235">Tout</span><span class="sxs-lookup"><span data-stu-id="7d6bf-235">All</span></span>||<span data-ttu-id="7d6bf-236">L'application peut fonctionner correctement.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-236">Application may function properly.</span></span> <span data-ttu-id="7d6bf-237">Tous les événements sont émis.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-237">All events are emitted.</span></span>|<span data-ttu-id="7d6bf-238">Tous les événements précédents.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-238">All previous events.</span></span>|<span data-ttu-id="7d6bf-239">Tout</span><span class="sxs-lookup"><span data-stu-id="7d6bf-239">All</span></span>|  
  
 <span data-ttu-id="7d6bf-240">Les niveaux compris entre Verbose et Critique sont empilés les uns sur les autres, autrement dit chaque niveau de suivi inclut tous les niveaux supérieurs hormis le niveau Désactivé.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-240">The levels from Verbose to Critical are stacked on top of each other, that is, each trace level includes all levels above it except the Off level.</span></span> <span data-ttu-id="7d6bf-241">Par exemple, un écouteur qui écoute au niveau Avertissement reçoit les suivis des niveaux Critique, Erreur et Avertissement.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-241">For example, a listener listening at the Warning level receives Critical, Error, and Warning traces.</span></span> <span data-ttu-id="7d6bf-242">Le niveau Tout inclut les événements du niveau Verbose au niveau Critique et les événements ActivityTracing.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-242">The All level includes events from Verbose to Critical and Activity tracing events.</span></span>  
  
> [!CAUTION]
>  <span data-ttu-id="7d6bf-243">Les niveaux Informations, Commentaires et ActivityTracing génèrent de nombreux suivis, ce qui peut avoir un impact négatif sur le débit des messages si vous avez utilisé toutes les ressources disponibles sur l'ordinateur.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-243">The Information, Verbose, and ActivityTracing levels generate a lot of traces, which may negatively impact message throughput if you have used up all available resources on the machine.</span></span>  
  
## <a name="configuring-activity-tracing-and-propagation-for-correlation"></a><span data-ttu-id="7d6bf-244">Configuration du suivi d'activité et de la propagation pour la corrélation</span><span class="sxs-lookup"><span data-stu-id="7d6bf-244">Configuring Activity Tracing and Propagation for Correlation</span></span>  
 <span data-ttu-id="7d6bf-245">La valeur `activityTracing` spécifiée pour l'attribut `switchValue` est utilisée pour activer le suivi d'activité, qui émet des suivis pour les transferts et limites d'activité dans les points de terminaison.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-245">The `activityTracing` value specified for the `switchValue` attribute is used to enable activity tracing, which emits traces for activity boundaries and transfers within endpoints.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="7d6bf-246">Lorsque vous utilisez certaines fonctionnalités d'extensibilité dans [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)], vous pouvez obtenir un <xref:System.NullReferenceException> lorsque le suivi d'activité est activé.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-246">When you use certain extensibility features in [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)], you might get a <xref:System.NullReferenceException> when activity tracing is enabled.</span></span> <span data-ttu-id="7d6bf-247">Pour résoudre ce problème, vérifiez le fichier de configuration de votre application et assurez-vous que l'attribut `switchValue` de votre source de suivi n'a pas la valeur `activityTracing`.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-247">To fix this problem, check your application's configuration file and ensure that the `switchValue` attribute for your trace source is not set to `activityTracing`.</span></span>  
  
 <span data-ttu-id="7d6bf-248">L'attribut `propagateActivity` indique si l'activité doit être propagée vers d'autres points de terminaison qui participent à l'échange de messages.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-248">The `propagateActivity` attribute indicates whether the activity should be propagated to other endpoints that participate in the message exchange.</span></span> <span data-ttu-id="7d6bf-249">En affectant à cet attribut la valeur `true`, vous pouvez prendre des fichiers de suivi générés par deux points de terminaison quelconque et observer comment un ensemble de suivis sur un point de terminaison a été transféré vers un ensemble de suivis sur un autre point de terminaison.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-249">By setting this value to `true`, you can take trace files generated by any two endpoints and observe how a set of traces on one endpoint flowed to a set of traces on another endpoint.</span></span>  
  
 [!INCLUDE[crabout](../../../../../includes/crabout-md.md)]<span data-ttu-id="7d6bf-250">le suivi des activités et propagation, consultez [Propagation](../../../../../docs/framework/wcf/diagnostics/tracing/propagation.md).</span><span class="sxs-lookup"><span data-stu-id="7d6bf-250"> activity tracing and propagation, see [Propagation](../../../../../docs/framework/wcf/diagnostics/tracing/propagation.md).</span></span>  
  
 <span data-ttu-id="7d6bf-251">Les deux `propagateActivity` et `ActivityTracing` valeurs booléennes s’appliquent à la System.ServiceModel TraceSource.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-251">Both `propagateActivity` and `ActivityTracing` Boolean values apply to the System.ServiceModel TraceSource.</span></span> <span data-ttu-id="7d6bf-252">Le `ActivityTracing` valeur s’applique également à toutes les sources de trace, y compris [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] ou défini par l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-252">The `ActivityTracing` value also applies to any trace source, including [!INCLUDE[indigo2](../../../../../includes/indigo2-md.md)] or user-defined ones.</span></span>  
  
 <span data-ttu-id="7d6bf-253">Vous ne pouvez pas utiliser l'attribut `propagateActivity` avec des sources de suivi définies par l'utilisateur.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-253">You cannot use the `propagateActivity` attribute with user-defined trace sources.</span></span> <span data-ttu-id="7d6bf-254">Pour la propagation d'ID d'activité de code utilisateur, assurez-vous de ne pas définir ServiceModel `ActivityTracing`, tout en ayant encore l'attribut `propagateActivity` ServiceModel défini à `true`.</span><span class="sxs-lookup"><span data-stu-id="7d6bf-254">For user code activity ID propagation, make sure you do not set ServiceModel `ActivityTracing`, while still having ServiceModel `propagateActivity` attribute set to `true`.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="7d6bf-255">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="7d6bf-255">See Also</span></span>  
 [<span data-ttu-id="7d6bf-256">Le suivi</span><span class="sxs-lookup"><span data-stu-id="7d6bf-256">Tracing</span></span>](../../../../../docs/framework/wcf/diagnostics/tracing/index.md)  
 [<span data-ttu-id="7d6bf-257">Administration et diagnostics</span><span class="sxs-lookup"><span data-stu-id="7d6bf-257">Administration and Diagnostics</span></span>](../../../../../docs/framework/wcf/diagnostics/index.md)  
 [<span data-ttu-id="7d6bf-258">Comment : créer et initialiser les écouteurs de traçage</span><span class="sxs-lookup"><span data-stu-id="7d6bf-258">How to: Create and Initialize Trace Listeners</span></span>](http://go.microsoft.com/fwlink/?LinkId=94648)  
 [<span data-ttu-id="7d6bf-259">Création d’un TraceListener personnalisé</span><span class="sxs-lookup"><span data-stu-id="7d6bf-259">Creating a Custom TraceListener</span></span>](http://go.microsoft.com/fwlink/?LinkId=96239)
