---
title: "Génération des exemples Windows Communication Foundation"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 2899e7a5-9cb2-4e8d-b8d2-f31391549198
caps.latest.revision: "33"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: 26a47e6ea0d93d81275d7b3b87c88d0d3ab595df
ms.sourcegitcommit: ce279f2d7fe2220e6ea0a25a8a7a5370ddf8d9f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 12/02/2017
---
# <a name="building-the-windows-communication-foundation-samples"></a><span data-ttu-id="3d607-102">Génération des exemples Windows Communication Foundation</span><span class="sxs-lookup"><span data-stu-id="3d607-102">Building the Windows Communication Foundation Samples</span></span>
<span data-ttu-id="3d607-103">Le [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] exemples peuvent être construites à l’aide de Visual Studio 2010 ou à l’aide de la **msbuild** commande à partir de la ligne de commande.</span><span class="sxs-lookup"><span data-stu-id="3d607-103">The [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] samples can be built using Visual Studio 2010 or using the **msbuild** command from the command line.</span></span> <span data-ttu-id="3d607-104">Les deux procédures sont décrites dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="3d607-104">Both procedures are described in this topic.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="3d607-105">Avant la construction ou d’exécution de toute la [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] exemples, assurez-vous d’avoir effectué la [procédure d’installation d’à usage unique pour les exemples Windows Communication Foundation](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md).</span><span class="sxs-lookup"><span data-stu-id="3d607-105">Before building or running any of the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] samples, ensure you have performed the [One-Time Setup Procedure for the Windows Communication Foundation Samples](../../../../docs/framework/wcf/samples/one-time-setup-procedure-for-the-wcf-samples.md).</span></span>  
  
### <a name="to-build-the-sample-using-a-command-prompt"></a><span data-ttu-id="3d607-106">Pour générer l'exemple à partir d'une invite de commandes</span><span class="sxs-lookup"><span data-stu-id="3d607-106">To build the sample using a command prompt</span></span>  
  
1.  <span data-ttu-id="3d607-107">Ouvrez l'invite de commandes de [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] avec des privilèges d'administrateur et accédez au sous-répertoire spécifique aux langues situé sous le répertoire d'installation de l'exemple.</span><span class="sxs-lookup"><span data-stu-id="3d607-107">Open the [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] command prompt with administrator privileges and navigate to the language-specific subdirectory under the directory location where you installed the sample.</span></span>  
  
2.  <span data-ttu-id="3d607-108">Type `msbuild` à la ligne de commande.</span><span class="sxs-lookup"><span data-stu-id="3d607-108">Type `msbuild` at the command line.</span></span> <span data-ttu-id="3d607-109">Les fichiers de programme du client sont générés dans client\bin, et les fichiers de programme du service sont générés dans service\bin.</span><span class="sxs-lookup"><span data-stu-id="3d607-109">The client program files are built to client\bin and the service program files are built to service\bin.</span></span> <span data-ttu-id="3d607-110">Si le service est hébergé par IIS (Internet Information Services), les fichiers programme du service sont également copiés dans le répertoire servicemodelsamples et dans son sous-répertoire \bin.</span><span class="sxs-lookup"><span data-stu-id="3d607-110">If the service is hosted by Internet Information Services (IIS), the service program files are also copied to the servicemodelsamples directory and its \bin subdirectory.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="3d607-111">Vous devez affecter %systemdrive%\inetpub\wwwroot aux listes de contrôle d'accès (ACL) pour accorder des autorisations de modification au compte sous lequel vous vous êtes connecté.</span><span class="sxs-lookup"><span data-stu-id="3d607-111">You must set the ACLs on %systemdrive%\inetpub\wwwroot to grant modify permissions to the account under which you are running.</span></span> <span data-ttu-id="3d607-112">Sinon, certains des événements post-build échoueront.</span><span class="sxs-lookup"><span data-stu-id="3d607-112">Otherwise some post build events fail.</span></span> <span data-ttu-id="3d607-113">Vous pouvez également laisser les listes de contrôle d'accès telles quelles et exécuter l'invite de commandes du Kit de développement logiciel (SDK) en tant qu'administrateur.</span><span class="sxs-lookup"><span data-stu-id="3d607-113">Alternatively, you can leave the ACLs as they are and run the SDK command prompt as administrator.</span></span>  
  
### <a name="to-build-the-sample-using-visual-studio"></a><span data-ttu-id="3d607-114">Pour générer l'exemple à l'aide de Visual Studio</span><span class="sxs-lookup"><span data-stu-id="3d607-114">To build the sample using Visual Studio</span></span>  
  
1.  <span data-ttu-id="3d607-115">Si vous utilisez [!INCLUDE[wv](../../../../includes/wv-md.md)], [!INCLUDE[lserver](../../../../includes/lserver-md.md)], Windows 7 ou Windows Server 2008 R2 et exécutez [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)], vous devez exécuter [!INCLUDE[vsprvs](../../../../includes/vsprvs-md.md)] avec des autorisations élevées.</span><span class="sxs-lookup"><span data-stu-id="3d607-115">If you are using [!INCLUDE[wv](../../../../includes/wv-md.md)], [!INCLUDE[lserver](../../../../includes/lserver-md.md)], Windows 7, or Windows Server 2008 R2, and running [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)], you must run [!INCLUDE[vsprvs](../../../../includes/vsprvs-md.md)] with elevated permission.</span></span> <span data-ttu-id="3d607-116">Pour ce faire, cliquez sur l’icône dans le menu Démarrer, puis cliquez sur **exécuter en tant qu’administrateur**.</span><span class="sxs-lookup"><span data-stu-id="3d607-116">To do so, right-click the icon on the Start menu and then click **Run as administrator**.</span></span>  
  
2.  <span data-ttu-id="3d607-117">À partir de la **fichier** menu [!INCLUDE[vs_current_short](../../../../includes/vs-current-short-md.md)], cliquez sur **ouvrir**, puis cliquez sur **projet/Solution**.</span><span class="sxs-lookup"><span data-stu-id="3d607-117">From the **File** menu in [!INCLUDE[vs_current_short](../../../../includes/vs-current-short-md.md)], click **Open**, then click **Project/Solution**.</span></span> <span data-ttu-id="3d607-118">Accédez au sous-répertoire spécifique aux langues situé sous le répertoire d'installation de l'exemple, puis double-cliquez sur l'icône du fichier .sln pour ouvrir la solution dans [!INCLUDE[vsprvs](../../../../includes/vsprvs-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3d607-118">Navigate to the language-specific subdirectory under the directory in which you installed the sample, and double-click the .sln file icon to open the solution in [!INCLUDE[vsprvs](../../../../includes/vsprvs-md.md)].</span></span>  
  
3.  <span data-ttu-id="3d607-119">Dans le **générer** menu, sélectionnez **régénérer la Solution**.</span><span class="sxs-lookup"><span data-stu-id="3d607-119">In the **Build** menu, select **Rebuild Solution**.</span></span> <span data-ttu-id="3d607-120">Les fichiers de programme du client sont générés dans client\bin, et les fichiers de programme du service sont générés dans service\bin.</span><span class="sxs-lookup"><span data-stu-id="3d607-120">The client program files are built to client\bin and the service program files are built to service\bin.</span></span> <span data-ttu-id="3d607-121">Si le service est hébergé par IIS (Internet Information Services), les fichiers programme du service sont également copiés dans le répertoire servicemodelsamples et dans son sous-répertoire \bin.</span><span class="sxs-lookup"><span data-stu-id="3d607-121">If the service is hosted in IIS, the service program files are also copied to the servicemodelsamples directory and its \bin subdirectory.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="3d607-122">Vous devez affecter %systemdrive%\inetpub\wwwroot aux listes de contrôle d'accès (ACL) pour accorder des autorisations de modification au compte sous lequel vous vous êtes connecté.</span><span class="sxs-lookup"><span data-stu-id="3d607-122">You must set the ACLs on %systemdrive%\inetpub\wwwroot to grant modify permissions to the account under which you are running.</span></span> <span data-ttu-id="3d607-123">Sinon, certains des événements post-build échoueront.</span><span class="sxs-lookup"><span data-stu-id="3d607-123">Otherwise some post build events fail.</span></span> <span data-ttu-id="3d607-124">Vous pouvez également laisser les listes de contrôle d'accès telles quelles et exécuter l'invite de commandes du Kit de développement logiciel (SDK) ou Visual Studio en tant qu'administrateur.</span><span class="sxs-lookup"><span data-stu-id="3d607-124">Alternatively, you can leave the ACLs as they are and run the SDK command prompt or Visual Studio as administrator.</span></span> <span data-ttu-id="3d607-125">Certaines actions de Visual Studio (tel que l'attachement d'un débogueur au processus de travail ASP.NET) requièrent également des privilèges d'administrateur.</span><span class="sxs-lookup"><span data-stu-id="3d607-125">Some Visual Studio actions (such as attaching a debugger to the ASP.Net worker process) also require administrative privileges.</span></span>  
  
## <a name="setup-batch-files-and-scripts"></a><span data-ttu-id="3d607-126">Scripts et fichiers de commandes d'installation</span><span class="sxs-lookup"><span data-stu-id="3d607-126">Setup Batch Files and Scripts</span></span>  
 <span data-ttu-id="3d607-127">Les fichiers de commandes Setup.exe et Cleanup.exe et les scripts doivent être exécutés à partir d'une invite de commandes de Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="3d607-127">Setup.exe and Cleanup.exe batch files and scripts should be run from a Visual Studio command prompt.</span></span> <span data-ttu-id="3d607-128">Plusieurs fichiers d'installation et de nettoyage effectuent des tâches qui requièrent des privilèges d'administrateur et doivent être lancés avec des privilèges d'administrateur.</span><span class="sxs-lookup"><span data-stu-id="3d607-128">Several set up and clean up files perform tasks that require administrative privileges and should be launched with administrator privileges.</span></span>  
  
## <a name="important-security-information-about-metadata-endpoints"></a><span data-ttu-id="3d607-129">Informations de sécurité importantes à propos des points de terminaison de métadonnées</span><span class="sxs-lookup"><span data-stu-id="3d607-129">Important Security Information about Metadata Endpoints</span></span>  
 <span data-ttu-id="3d607-130">Pour empêcher la divulgation involontaire de métadonnées de service potentiellement sensibles, la publication de métadonnées est désactivée par défaut dans la configuration des services [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)].</span><span class="sxs-lookup"><span data-stu-id="3d607-130">To prevent unintentional disclosure of potentially sensitive service metadata, the default configuration for [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] services disables metadata publishing.</span></span> <span data-ttu-id="3d607-131">Ce comportement est sécurisé par défaut, mais il signifie également que vous ne pouvez pas utiliser d'outil d'importation de métadonnées (tel que Svcutil.exe) pour générer le code client requis pour appeler le service, à moins que le comportement de publication des métadonnées du service soit activé explicitement dans la configuration.</span><span class="sxs-lookup"><span data-stu-id="3d607-131">This behavior is secure by default, but also means that you cannot use a metadata import tool (such as Svcutil.exe) to generate the client code required to call the service unless the service’s metadata publishing behavior is explicitly enabled in configuration.</span></span> <span data-ttu-id="3d607-132">Pour faciliter l'utilisation des exemples, pratiquement tous les exemples exposent un point de terminaison de publication de métadonnées non sécurisé.</span><span class="sxs-lookup"><span data-stu-id="3d607-132">To make experimenting with the samples easier, almost all samples expose an unsecured metadata publishing endpoint.</span></span> <span data-ttu-id="3d607-133">De tels points de terminaison sont potentiellement disponibles aux consommateurs non authentifiés anonymes et il est nécessaire de se montrer vigilant et de s'assurer que la divulgation publique des métadonnées d'un service est appropriée avant de déployer de tels points de terminaison.</span><span class="sxs-lookup"><span data-stu-id="3d607-133">Such endpoints are potentially available to anonymous unauthenticated consumers and care must be taken before deploying such endpoints to ensure that publicly disclosing a service’s metadata is appropriate.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="3d607-134">publication des métadonnées de service, consultez le [comportement de publication de métadonnées](../../../../docs/framework/wcf/samples/metadata-publishing-behavior.md) exemple.</span><span class="sxs-lookup"><span data-stu-id="3d607-134"> publishing service metadata, see the [Metadata Publishing Behavior](../../../../docs/framework/wcf/samples/metadata-publishing-behavior.md) sample.</span></span> <span data-ttu-id="3d607-135">Consultez le [personnalisé sécuriser les métadonnées de point de terminaison](../../../../docs/framework/wcf/samples/custom-secure-metadata-endpoint.md) sample pour obtenir un exemple de sécurisation d’un point de terminaison de métadonnées.</span><span class="sxs-lookup"><span data-stu-id="3d607-135">See the [Custom Secure Metadata Endpoint](../../../../docs/framework/wcf/samples/custom-secure-metadata-endpoint.md) sample for a sample securing a metadata endpoint.</span></span>  
  
## <a name="exception-handling"></a><span data-ttu-id="3d607-136">Gestion des exceptions</span><span class="sxs-lookup"><span data-stu-id="3d607-136">Exception Handling</span></span>  
 <span data-ttu-id="3d607-137">En général, ces exemples n'incluent pas la gestion des exceptions pour que le code reste axé sur le sujet de l'exemple.</span><span class="sxs-lookup"><span data-stu-id="3d607-137">Generally speaking these samples do not include exception handling to keep the code focused on the subject of the sample.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="3d607-138">gestion des exceptions, consultez la [attendu des Exceptions](../../../../docs/framework/wcf/samples/expected-exceptions.md) exemple.</span><span class="sxs-lookup"><span data-stu-id="3d607-138"> exception handling, see the [Expected Exceptions](../../../../docs/framework/wcf/samples/expected-exceptions.md) sample.</span></span>  
  
## <a name="regenerating-clients-and-configuration-with-svcutil"></a><span data-ttu-id="3d607-139">Régénération des clients et de la configuration avec Svcutil</span><span class="sxs-lookup"><span data-stu-id="3d607-139">Regenerating Clients and Configuration with Svcutil</span></span>  
 <span data-ttu-id="3d607-140">Vous pouvez utiliser la [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) pour régénérer le code client et configuration pour la plupart des exemples.</span><span class="sxs-lookup"><span data-stu-id="3d607-140">You can use the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) to regenerate client code and configuration for most of the samples.</span></span> <span data-ttu-id="3d607-141">Certains exemples nécessitent une modification manuelle de la configuration.</span><span class="sxs-lookup"><span data-stu-id="3d607-141">Some samples require manually edited configuration.</span></span> <span data-ttu-id="3d607-142">Par exemple, si vous utilisez Svcutil.exe pour régénérer la configuration d'un exemple qui utilise des informations d'identification de certificat client, vous devez spécifier manuellement les informations d'identification précédemment configurées.</span><span class="sxs-lookup"><span data-stu-id="3d607-142">For example, if you use Svcutil.exe to regenerate the configuration for a sample that uses client certificate credentials, you must manually specify the credentials previously configured.</span></span> <span data-ttu-id="3d607-143">Certains exemples utilisent des options Svcutil.exe spécifiques pour affecter le code généré ; ces options sont spécifiées dans les rubriques d'exemple spécifiques.</span><span class="sxs-lookup"><span data-stu-id="3d607-143">Some samples use specific Svcutil.exe options to affect the generated code, these options are specified in the specific sample topics.</span></span>  
  
#### <a name="to-regenerate-the-client-and-configuration-files"></a><span data-ttu-id="3d607-144">Pour régénérer les fichiers du client et les fichiers de configuration</span><span class="sxs-lookup"><span data-stu-id="3d607-144">To regenerate the client and configuration files</span></span>  
  
1.  <span data-ttu-id="3d607-145">Ouvrez une invite de commandes du Kit de développement SDK et accédez au sous-répertoire spécifique aux langues situé sous l'emplacement d'installation de l'exemple.</span><span class="sxs-lookup"><span data-stu-id="3d607-145">Open an SDK command prompt and navigate to the language-specific subdirectory under the directory location where you installed the sample.</span></span>  
  
2.  <span data-ttu-id="3d607-146">Si le service est un type hébergé sur le Web, utilisez la commande suivante.</span><span class="sxs-lookup"><span data-stu-id="3d607-146">If the service is a Web-hosted type, use the following command.</span></span>  
  
    ```  
    svcutil.exe /n:"http://Microsoft.ServiceModel.Samples,Microsoft.ServiceModel.Samples" http://localhost/servicemodelsamples/service.svc/mex /out:generatedClient.cs  
    ```  
  
     <span data-ttu-id="3d607-147">Si le service est un type auto-hébergé, utilisez la commande suivante.</span><span class="sxs-lookup"><span data-stu-id="3d607-147">If the service is a self-hosted type the following command.</span></span>  
  
    ```  
    svcutil.exe /n:"http://Microsoft.ServiceModel.Samples,Microsoft.ServiceModel.Samples" http://localhost:8000/servicemodelsamples/service.svc/mex /out:generatedClient.cs  
    ```  
  
     <span data-ttu-id="3d607-148">Remplacez http://localhost:8000/ServiceModelSamples/service.svc/mex par l'adresse du point de terminaison mex du service auto-hébergé.</span><span class="sxs-lookup"><span data-stu-id="3d607-148">Replace http://localhost:8000/ServiceModelSamples/service.svc/mex with the address of the self-hosted service's mex endpoint.</span></span>  
  
     <span data-ttu-id="3d607-149">Pour générer le client dans un type Visual Basic, utilisez la commande suivante.</span><span class="sxs-lookup"><span data-stu-id="3d607-149">To generate the client in a Visual Basic type, use the following command.</span></span>  
  
    ```  
    svcutil.exe /n:"http://Microsoft.ServiceModel.Samples,Microsoft.ServiceModel.Samples" http://localhost/servicemodelsamples/service.svc/mex /l:vb /out:generatedClient.vb  
    ```  
  
     <span data-ttu-id="3d607-150">Si le service est un type auto-hébergé, utilisez la commande suivante.</span><span class="sxs-lookup"><span data-stu-id="3d607-150">If the service is a self-hosted type, use the following command.</span></span>  
  
    ```  
    svcutil.exe /n:"http://Microsoft.ServiceModel.Samples,Microsoft.ServiceModel.Samples" http://localhost:8000/servicemodelsamples/service.svc/mex /l:vb /out:generatedClient.vb  
    ```  
  
    > [!NOTE]
    >  <span data-ttu-id="3d607-151">Pour ignorer la génération de la configuration du client ajouter la **/noConfig** option.</span><span class="sxs-lookup"><span data-stu-id="3d607-151">To skip the generation of client configuration add the **/noConfig** option.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="3d607-152">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="3d607-152">See Also</span></span>  
 [<span data-ttu-id="3d607-153">Les exemples Windows Communication Foundation en cours d’exécution</span><span class="sxs-lookup"><span data-stu-id="3d607-153">Running the Windows Communication Foundation Samples</span></span>](../../../../docs/framework/wcf/samples/running-the-samples.md)  
 [<span data-ttu-id="3d607-154">Outil ServiceModel Metadata Utility (Svcutil.exe)</span><span class="sxs-lookup"><span data-stu-id="3d607-154">ServiceModel Metadata Utility Tool (Svcutil.exe)</span></span>](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)
