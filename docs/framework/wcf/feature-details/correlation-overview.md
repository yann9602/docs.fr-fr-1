---
title: "Vue d'ensemble de la corrélation"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: edcc0315-5d26-44d6-a36d-ea554c418e9f
caps.latest.revision: "12"
author: Erikre
ms.author: erikre
manager: erikre
ms.openlocfilehash: 3d4320c088c66abdc2c4ff226eb99d66fcbd3b38
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/21/2017
---
# <a name="correlation-overview"></a><span data-ttu-id="cc5ce-102">Vue d'ensemble de la corrélation</span><span class="sxs-lookup"><span data-stu-id="cc5ce-102">Correlation Overview</span></span>
<span data-ttu-id="cc5ce-103">La corrélation est le mécanisme qui permet de lier les messages de service de workflow entre eux ou à l'état de l'instance d'application, par exemple une réponse à une demande initiale ou un ID de commande particulier à l'état persistant d'un workflow de traitement de commandes.</span><span class="sxs-lookup"><span data-stu-id="cc5ce-103">Correlation is the mechanism for relating workflow service messages to each other or to the application instance state, such as a reply to an initial request, or a particular order ID to the persisted state of an order-processing workflow.</span></span> <span data-ttu-id="cc5ce-104">Cette rubrique offre une vue d'ensemble de la corrélation.</span><span class="sxs-lookup"><span data-stu-id="cc5ce-104">This topic provides an overview of correlation.</span></span> <span data-ttu-id="cc5ce-105">Les autres rubriques de cette section fournissent des informations supplémentaires sur chaque type de corrélation.</span><span class="sxs-lookup"><span data-stu-id="cc5ce-105">The other topics in this section provide additional information for each type of correlation.</span></span>  
  
## <a name="types-of-correlation"></a><span data-ttu-id="cc5ce-106">Types de corrélation</span><span class="sxs-lookup"><span data-stu-id="cc5ce-106">Types of Correlation</span></span>  
 <span data-ttu-id="cc5ce-107">La corrélation peut être basée sur le protocole ou basée sur le contenu.</span><span class="sxs-lookup"><span data-stu-id="cc5ce-107">Correlation can be protocol-based or content-based.</span></span> <span data-ttu-id="cc5ce-108">Les corrélations basées sur le protocole utilisent des données fournies par l'infrastructure de remise des messages pour assurer le mappage entre les messages.</span><span class="sxs-lookup"><span data-stu-id="cc5ce-108">Protocol-based correlations use data provided by the message delivery infrastructure to provide the mapping between messages.</span></span> <span data-ttu-id="cc5ce-109">Les messages corrélés à l'aide de la corrélation basée sur le protocole sont liés entre eux à l'aide d'un objet en mémoire, tel qu'un <xref:System.ServiceModel.Channels.RequestContext>, ou par un jeton fourni par le protocole de transport.</span><span class="sxs-lookup"><span data-stu-id="cc5ce-109">Messages that are correlated using protocol-based correlation are related to each other using an object in memory, such as a <xref:System.ServiceModel.Channels.RequestContext>, or by a token provided by the transport protocol.</span></span> <span data-ttu-id="cc5ce-110">Les corrélations basées sur le contenu lient des messages entre eux à l'aide de données spécifiées par l'application.</span><span class="sxs-lookup"><span data-stu-id="cc5ce-110">Content-based correlations relate messages to each other using application-specified data.</span></span> <span data-ttu-id="cc5ce-111">Les messages corrélés à l'aide de la corrélation basée sur le contenu sont liés entre eux par des données du message définies par l'application, telles qu'un numéro de client.</span><span class="sxs-lookup"><span data-stu-id="cc5ce-111">Messages that are correlated using content-based correlation are related to each other by some application-defined data in the message, such as a customer number.</span></span>  
  
 <span data-ttu-id="cc5ce-112">Les activités qui participent à la corrélation utilisent un objet <xref:System.ServiceModel.Activities.CorrelationHandle> pour regrouper les activités de messagerie.</span><span class="sxs-lookup"><span data-stu-id="cc5ce-112">Activities that participate in correlation use a <xref:System.ServiceModel.Activities.CorrelationHandle> to tie the messaging activities together.</span></span> <span data-ttu-id="cc5ce-113">Par exemple, une activité <xref:System.ServiceModel.Activities.Send> utilisée pour appeler un service et une activité <xref:System.ServiceModel.Activities.Receive> successive, utilisée pour recevoir un rappel du service, partagent le même <xref:System.ServiceModel.Activities.CorrelationHandle>.</span><span class="sxs-lookup"><span data-stu-id="cc5ce-113">For example, a <xref:System.ServiceModel.Activities.Send> that is used to call a service and a subsequent <xref:System.ServiceModel.Activities.Receive> that is used to receive a callback from the service, share the same <xref:System.ServiceModel.Activities.CorrelationHandle>.</span></span> <span data-ttu-id="cc5ce-114">Ce modèle de base est utilisé que la corrélation soit basée sur le contenu ou sur le protocole.</span><span class="sxs-lookup"><span data-stu-id="cc5ce-114">This basic pattern is used whether the correlation is content based or protocol based.</span></span> <span data-ttu-id="cc5ce-115">Le handle de corrélation peut être défini explicitement sur chaque activité ou les activités peuvent être contenues dans une activité <xref:System.ServiceModel.Activities.CorrelationScope>.</span><span class="sxs-lookup"><span data-stu-id="cc5ce-115">The correlation handle can be explicitly set on each activity or the activities can be contained in a <xref:System.ServiceModel.Activities.CorrelationScope> activity.</span></span> <span data-ttu-id="cc5ce-116">Les activités contenues dans une activité <xref:System.ServiceModel.Activities.CorrelationScope> possèdent leurs handles de corrélation managés par <xref:System.ServiceModel.Activities.CorrelationScope> et ne requièrent pas le <xref:System.ServiceModel.Activities.CorrelationHandle> pour être définies de manière explicite.</span><span class="sxs-lookup"><span data-stu-id="cc5ce-116">Activities contained in a <xref:System.ServiceModel.Activities.CorrelationScope> have their correlation handles managed by the <xref:System.ServiceModel.Activities.CorrelationScope> and do not require the <xref:System.ServiceModel.Activities.CorrelationHandle> to be explicitly set.</span></span> <span data-ttu-id="cc5ce-117">Une étendue <xref:System.ServiceModel.Activities.CorrelationScope> fournit une gestion <xref:System.ServiceModel.Activities.CorrelationHandle> pour une corrélation demande-réponse et un type de corrélation supplémentaire.</span><span class="sxs-lookup"><span data-stu-id="cc5ce-117">A <xref:System.ServiceModel.Activities.CorrelationScope> scope provides <xref:System.ServiceModel.Activities.CorrelationHandle> management for a request-reply correlation and one additional correlation type.</span></span> <span data-ttu-id="cc5ce-118">Les services de workflow hébergés à l'aide de <xref:System.ServiceModel.Activities.WorkflowServiceHost> ont la même gestion de corrélation par défaut que l'activité <xref:System.ServiceModel.Activities.CorrelationScope>.</span><span class="sxs-lookup"><span data-stu-id="cc5ce-118">Workflow services hosted using <xref:System.ServiceModel.Activities.WorkflowServiceHost> have the same default correlation management as the <xref:System.ServiceModel.Activities.CorrelationScope> activity.</span></span> <span data-ttu-id="cc5ce-119">Cette gestion de corrélation par défaut signifie en général que dans de nombreux scénarios, les activités de messagerie dans une étendue <xref:System.ServiceModel.Activities.CorrelationScope> ou dans un service de workflow n'ont pas besoin que leur <xref:System.ServiceModel.Activities.CorrelationHandle> soit défini, à moins que plusieurs activités de messagerie soient en parallèle ou se chevauchent, par exemple deux activités <xref:System.ServiceModel.Activities.Receive> en parallèle ou deux activités <xref:System.ServiceModel.Activities.Send> suivies de deux activités <xref:System.ServiceModel.Activities.Receive>.</span><span class="sxs-lookup"><span data-stu-id="cc5ce-119">This default correlation management generally means that in many scenarios, messaging activities in a <xref:System.ServiceModel.Activities.CorrelationScope> or a workflow service do not require their <xref:System.ServiceModel.Activities.CorrelationHandle> set unless multiple messaging activities are in parallel or overlap, such as two <xref:System.ServiceModel.Activities.Receive> activities in parallel, or two <xref:System.ServiceModel.Activities.Send> activities followed by two <xref:System.ServiceModel.Activities.Receive> activities.</span></span> <span data-ttu-id="cc5ce-120">Vous trouverez davantage d'informations sur la corrélation par défaut dans les rubriques de cette section qui présentent chaque type spécifique de corrélation.</span><span class="sxs-lookup"><span data-stu-id="cc5ce-120">More information about default correlation is provided in the topics in this section that cover each specific type of correlation.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="cc5ce-121">consultez des activités de messagerie [d’activités de messagerie](../../../../docs/framework/wcf/feature-details/messaging-activities.md) et [Comment : créer un Service de flux de travail avec les activités de messagerie](../../../../docs/framework/wcf/feature-details/how-to-create-a-workflow-service-with-messaging-activities.md).</span><span class="sxs-lookup"><span data-stu-id="cc5ce-121"> messaging activities see [Messaging Activities](../../../../docs/framework/wcf/feature-details/messaging-activities.md) and [How to: Create a Workflow Service with Messaging Activities](../../../../docs/framework/wcf/feature-details/how-to-create-a-workflow-service-with-messaging-activities.md).</span></span>  
  
## <a name="protocol-based-correlation"></a><span data-ttu-id="cc5ce-122">Corrélation basée sur le protocole</span><span class="sxs-lookup"><span data-stu-id="cc5ce-122">Protocol-Based Correlation</span></span>  
 <span data-ttu-id="cc5ce-123">La corrélation basée sur le protocole utilise le mécanisme de transport pour lier des messages entre eux et à l'instance appropriée.</span><span class="sxs-lookup"><span data-stu-id="cc5ce-123">Protocol-based correlation uses the transport mechanism to relate messages to each other and the appropriate instance.</span></span> <span data-ttu-id="cc5ce-124">Certaines corrélations de protocole fournies par le système incluent une corrélation demande-réponse et une corrélation basée sur le contexte.</span><span class="sxs-lookup"><span data-stu-id="cc5ce-124">Some system-provided protocol correlations include request-reply correlation and context-based correlation.</span></span> <span data-ttu-id="cc5ce-125">Une corrélation demande-réponse permet de corréler une seule paire d'activités de messagerie pour former une opération bidirectionnelle, par exemple <xref:System.ServiceModel.Activities.Send> appariée à <xref:System.ServiceModel.Activities.ReceiveReply>, ou <xref:System.ServiceModel.Activities.Receive> appariée à <xref:System.ServiceModel.Activities.SendReply>.</span><span class="sxs-lookup"><span data-stu-id="cc5ce-125">A request-reply correlation is used to correlate a single pair of messaging activities to form a two-way operation, such as a <xref:System.ServiceModel.Activities.Send> paired with a <xref:System.ServiceModel.Activities.ReceiveReply>, or a <xref:System.ServiceModel.Activities.Receive> paired with a <xref:System.ServiceModel.Activities.SendReply>.</span></span> <span data-ttu-id="cc5ce-126">Le Workflow Designer [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] fournit également un jeu de modèles d'activité pour implémenter ce modèle rapidement.</span><span class="sxs-lookup"><span data-stu-id="cc5ce-126">The [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] Workflow Designer also provides a set of activity templates to quickly implement this pattern.</span></span> <span data-ttu-id="cc5ce-127">Une corrélation basée sur le contexte est basée sur le mécanisme d’échange de contexte décrit dans le [spécification du protocole .NET contexte Exchange](http://go.microsoft.com/fwlink/?LinkID=166059).</span><span class="sxs-lookup"><span data-stu-id="cc5ce-127">A context-based correlation is based on the context exchange mechanism described in the [.NET Context Exchange Protocol Specification](http://go.microsoft.com/fwlink/?LinkID=166059).</span></span> <span data-ttu-id="cc5ce-128">Pour utiliser la corrélation basée sur le contexte, une liaison basée sur le contexte telle que <xref:System.ServiceModel.BasicHttpContextBinding>, <xref:System.ServiceModel.WSHttpContextBinding> ou <xref:System.ServiceModel.NetTcpContextBinding> doit être utilisée sur le point de terminaison.</span><span class="sxs-lookup"><span data-stu-id="cc5ce-128">To use context-based correlation, a context-based binding such as <xref:System.ServiceModel.BasicHttpContextBinding>, <xref:System.ServiceModel.WSHttpContextBinding> or <xref:System.ServiceModel.NetTcpContextBinding> must be used on the endpoint.</span></span>  
  
 [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="cc5ce-129">protocole de corrélation, consultez [échange de contexte](../../../../docs/framework/wcf/feature-details/context-exchange-correlation.md), [Durable Duplex](../../../../docs/framework/wcf/feature-details/durable-duplex-correlation.md), et [demande-réponse](../../../../docs/framework/wcf/feature-details/request-reply-correlation.md).</span><span class="sxs-lookup"><span data-stu-id="cc5ce-129"> protocol correlation, see [Context Exchange](../../../../docs/framework/wcf/feature-details/context-exchange-correlation.md), [Durable Duplex](../../../../docs/framework/wcf/feature-details/durable-duplex-correlation.md), and [Request-Reply](../../../../docs/framework/wcf/feature-details/request-reply-correlation.md).</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="cc5ce-130">à l’aide de la [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] modèles d’activité de Workflow Designer, consultez [d’activités de messagerie](../../../../docs/framework/wcf/feature-details/messaging-activities.md).</span><span class="sxs-lookup"><span data-stu-id="cc5ce-130"> using the [!INCLUDE[vs_current_long](../../../../includes/vs-current-long-md.md)] Workflow Designer activity templates, see [Messaging Activities](../../../../docs/framework/wcf/feature-details/messaging-activities.md).</span></span> <span data-ttu-id="cc5ce-131">Pour un exemple de code, consultez la [Durable Duplex &#91; Exemples WF &#93; ](../../../../docs/framework/windows-workflow-foundation/samples/durable-duplex.md) et [NetContextExchangeCorrelation](http://msdn.microsoft.com/en-us/93c74a1a-b9e2-46c6-95c0-c9b0e9472caf) exemples.</span><span class="sxs-lookup"><span data-stu-id="cc5ce-131">For sample code, see the [Durable Duplex &#91;WF Samples&#93;](../../../../docs/framework/windows-workflow-foundation/samples/durable-duplex.md) and [NetContextExchangeCorrelation](http://msdn.microsoft.com/en-us/93c74a1a-b9e2-46c6-95c0-c9b0e9472caf) samples.</span></span>  
  
## <a name="content-based-correlation"></a><span data-ttu-id="cc5ce-132">Corrélation basée sur le contenu</span><span class="sxs-lookup"><span data-stu-id="cc5ce-132">Content-Based Correlation</span></span>  
 <span data-ttu-id="cc5ce-133">La corrélation basée sur le contenu utilise quelques renseignements dans le message pour l'associer à une instance particulière.</span><span class="sxs-lookup"><span data-stu-id="cc5ce-133">Content-based correlation uses some piece of information in the message to associate it to a particular instance.</span></span> <span data-ttu-id="cc5ce-134">Contrairement à la corrélation basée sur le protocole, la corrélation basée sur le contenu exige que l'auteur de l'application déclare explicitement où se trouvent ces données dans chaque message connexe.</span><span class="sxs-lookup"><span data-stu-id="cc5ce-134">Unlike protocol-based correlation, content-based correlation requires the application author to explicitly state where this data can be found in each related message.</span></span> <span data-ttu-id="cc5ce-135">Les activités qui utilisent la corrélation basée sur le contenu spécifient ces données de message à l'aide d'un objet <xref:System.ServiceModel.MessageQuerySet>.</span><span class="sxs-lookup"><span data-stu-id="cc5ce-135">Activities that use content-based correlation specify this message data by using a <xref:System.ServiceModel.MessageQuerySet>.</span></span> <span data-ttu-id="cc5ce-136">La corrélation basée sur le contenu est utile lors de la communication avec des services qui n'utilisent aucune liaison de contexte, comme <xref:System.ServiceModel.BasicHttpContextBinding>.</span><span class="sxs-lookup"><span data-stu-id="cc5ce-136">Content-based correlation is useful when communicating with services that do not use one of the context bindings such as <xref:System.ServiceModel.BasicHttpContextBinding>.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="cc5ce-137">Corrélation basée sur le contenu, consultez [basée sur le contenu](../../../../docs/framework/wcf/feature-details/content-based-correlation.md).</span><span class="sxs-lookup"><span data-stu-id="cc5ce-137"> content-based correlation, see [Content Based](../../../../docs/framework/wcf/feature-details/content-based-correlation.md).</span></span> <span data-ttu-id="cc5ce-138">Pour un exemple de code, consultez la [corrélation basée sur le contenu](../../../../docs/framework/windows-workflow-foundation/samples/content-based-correlation.md) et [corrélés de calculatrice](../../../../docs/framework/windows-workflow-foundation/samples/correlated-calculator.md) exemples.</span><span class="sxs-lookup"><span data-stu-id="cc5ce-138">For sample code, see the [Content-Based Correlation](../../../../docs/framework/windows-workflow-foundation/samples/content-based-correlation.md) and [Correlated Calculator](../../../../docs/framework/windows-workflow-foundation/samples/correlated-calculator.md) samples.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="cc5ce-139">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="cc5ce-139">See Also</span></span>  
 [<span data-ttu-id="cc5ce-140">Corrélation basée sur le contenu</span><span class="sxs-lookup"><span data-stu-id="cc5ce-140">Content-Based Correlation</span></span>](../../../../docs/framework/windows-workflow-foundation/samples/content-based-correlation.md)  
 [<span data-ttu-id="cc5ce-141">Calculatrice corrélée</span><span class="sxs-lookup"><span data-stu-id="cc5ce-141">Correlated Calculator</span></span>](../../../../docs/framework/windows-workflow-foundation/samples/correlated-calculator.md)  
 [<span data-ttu-id="cc5ce-142">Corrélation Duplex durable &#91; Exemples WF &#93;</span><span class="sxs-lookup"><span data-stu-id="cc5ce-142">Durable Duplex &#91;WF Samples&#93;</span></span>](../../../../docs/framework/windows-workflow-foundation/samples/durable-duplex.md)  
 [<span data-ttu-id="cc5ce-143">NetContextExchangeCorrelation</span><span class="sxs-lookup"><span data-stu-id="cc5ce-143">NetContextExchangeCorrelation</span></span>](http://msdn.microsoft.com/en-us/93c74a1a-b9e2-46c6-95c0-c9b0e9472caf)
