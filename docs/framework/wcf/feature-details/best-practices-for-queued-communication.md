---
title: Meilleures pratiques pour les communications mises en file d'attente
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- queues [WCF], best practices
- best practices [WCF], queued communication
ms.assetid: 446a6383-cae3-4338-b193-a33c14a49948
caps.latest.revision: "14"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.workload: dotnet
ms.openlocfilehash: 8c701b608071ebd9e8c29881000db8dcd2634f56
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 12/22/2017
---
# <a name="best-practices-for-queued-communication"></a><span data-ttu-id="f1e05-102">Meilleures pratiques pour les communications mises en file d'attente</span><span class="sxs-lookup"><span data-stu-id="f1e05-102">Best Practices for Queued Communication</span></span>
<span data-ttu-id="f1e05-103">Cette rubrique fournit des méthodes recommandées pour les communications mises en file d'attente dans [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)].</span><span class="sxs-lookup"><span data-stu-id="f1e05-103">This topic provides recommended practices for queued communication in [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)].</span></span> <span data-ttu-id="f1e05-104">Les sections suivantes traitent des méthodes recommandées à partir d'un scénario.</span><span class="sxs-lookup"><span data-stu-id="f1e05-104">The following sections discuss recommended practices from a scenario perspective.</span></span>  
  
## <a name="fast-best-effort-queued-messaging"></a><span data-ttu-id="f1e05-105">Messagerie mise en file attente efficace et rapide</span><span class="sxs-lookup"><span data-stu-id="f1e05-105">Fast, Best-Effort Queued Messaging</span></span>  
 <span data-ttu-id="f1e05-106">Pour les scénarios qui requièrent la séparation fournie par la messagerie en file d'attente et une messagerie performante avec des assurances de meilleur-effort, utilisez une file d'attente non transactionnelle et affectez à la propriété <xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A> la valeur `false`.</span><span class="sxs-lookup"><span data-stu-id="f1e05-106">For scenarios that require separation that queued messaging provides and fast, high-performance messaging with best-effort assurances, use a non-transactional queue and set the <xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A> property to `false`.</span></span>  
  
 <span data-ttu-id="f1e05-107">De plus, vous pouvez choisir de ne pas encourir le coût des écritures sur disque en affectant à la propriété <xref:System.ServiceModel.MsmqBindingBase.Durable%2A> la valeur `false`.</span><span class="sxs-lookup"><span data-stu-id="f1e05-107">In addition, you can choose not to incur the cost of disk writes by setting the <xref:System.ServiceModel.MsmqBindingBase.Durable%2A> property to `false`.</span></span>  
  
 <span data-ttu-id="f1e05-108">La sécurité a des conséquences sur la performance.</span><span class="sxs-lookup"><span data-stu-id="f1e05-108">Security has implications on performance.</span></span> [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="f1e05-109">[Considérations relatives aux performances](../../../../docs/framework/wcf/feature-details/performance-considerations.md).</span><span class="sxs-lookup"><span data-stu-id="f1e05-109"> [Performance Considerations](../../../../docs/framework/wcf/feature-details/performance-considerations.md).</span></span>  
  
## <a name="reliable-end-to-end-queued-messaging"></a><span data-ttu-id="f1e05-110">Messagerie mise en file d'attente fiable de bout en bout</span><span class="sxs-lookup"><span data-stu-id="f1e05-110">Reliable End-to-End Queued Messaging</span></span>  
 <span data-ttu-id="f1e05-111">Les sections suivantes décrivent des méthodes recommandées pour les scénarios qui requièrent une messagerie fiable de bout en bout.</span><span class="sxs-lookup"><span data-stu-id="f1e05-111">The following sections describe recommended practices for scenarios that require end-to-end reliable messaging.</span></span>  
  
### <a name="basic-reliable-transfer"></a><span data-ttu-id="f1e05-112">Transfert fiable de base</span><span class="sxs-lookup"><span data-stu-id="f1e05-112">Basic Reliable Transfer</span></span>  
 <span data-ttu-id="f1e05-113">Pour une fiabilité de bout en bout, affectez à la propriété <xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A> la valeur `true` pour garantir le transfert.</span><span class="sxs-lookup"><span data-stu-id="f1e05-113">For end-to-end reliability, set the <xref:System.ServiceModel.MsmqBindingBase.ExactlyOnce%2A> property to `true` to ensure transfer.</span></span> <span data-ttu-id="f1e05-114">La propriété <xref:System.ServiceModel.MsmqBindingBase.Durable%2A> peut avoir la valeur `true` ou `false` selon vos spécifications (la valeur par défaut est `true`).</span><span class="sxs-lookup"><span data-stu-id="f1e05-114">The <xref:System.ServiceModel.MsmqBindingBase.Durable%2A> property can be set to `true` or `false` depending on your requirements (the default is `true`).</span></span> <span data-ttu-id="f1e05-115">En général, la propriété <xref:System.ServiceModel.MsmqBindingBase.Durable%2A> a la valeur `true` dans le cadre de la fiabilité de bout en bout.</span><span class="sxs-lookup"><span data-stu-id="f1e05-115">Generally, the <xref:System.ServiceModel.MsmqBindingBase.Durable%2A> property is set to `true` as part of end-to-end reliability.</span></span> <span data-ttu-id="f1e05-116">Ce compromis est a une incidence sur la performance, mais rend le message durable afin qu'il ne soit pas perdu si un gestionnaire de files d'attente tombe en panne.</span><span class="sxs-lookup"><span data-stu-id="f1e05-116">The compromise is a performance cost, but makes the message durable so that the message is not lost if a queue manager crashes.</span></span>  
  
### <a name="use-of-transactions"></a><span data-ttu-id="f1e05-117">Utilisation des transactions</span><span class="sxs-lookup"><span data-stu-id="f1e05-117">Use of Transactions</span></span>  
 <span data-ttu-id="f1e05-118">Vous devez utiliser des transactions pour garantir la fiabilité de bout en bout.</span><span class="sxs-lookup"><span data-stu-id="f1e05-118">You must use transactions to ensure end-to-end reliability.</span></span> <span data-ttu-id="f1e05-119">`ExactlyOnce` garantit seulement que les messages sont remis à la file d'attente cible.</span><span class="sxs-lookup"><span data-stu-id="f1e05-119">`ExactlyOnce` assurances only ensure that messages are delivered to the target queue.</span></span> <span data-ttu-id="f1e05-120">Pour vous assurer que le message est reçu, utilisez des transactions.</span><span class="sxs-lookup"><span data-stu-id="f1e05-120">To ensure that the message is received, use transactions.</span></span> <span data-ttu-id="f1e05-121">Sans transactions, si le service tombe en panne, vous perdez le message en cours de livraison qui est en fait remis à l’application.</span><span class="sxs-lookup"><span data-stu-id="f1e05-121">Without transactions, if the service crashes, you lose the message that is being delivered but is actually delivered to the application.</span></span>  
  
### <a name="use-of-dead-letter-queues"></a><span data-ttu-id="f1e05-122">Utilisation des files d'attente de lettres mortes</span><span class="sxs-lookup"><span data-stu-id="f1e05-122">Use of Dead-letter Queues</span></span>  
 <span data-ttu-id="f1e05-123">Les files d'attente de lettres mortes vous permettre d'être averti si un message n'est pas remis à la file d'attente cible.</span><span class="sxs-lookup"><span data-stu-id="f1e05-123">Dead-letter queues ensure that you are notified if a message fails to be delivered to the target queue.</span></span> <span data-ttu-id="f1e05-124">Vous pouvez utiliser la file d'attente de lettres mortes fournie par le système ou une file d'attente de lettres mortes personnalisée.</span><span class="sxs-lookup"><span data-stu-id="f1e05-124">You can use the system-provided dead-letter queue or a custom dead-letter queue.</span></span> <span data-ttu-id="f1e05-125">En général, il est préférable d'utiliser une file d'attente de lettres mortes personnalisée car elle vous permet d'envoyer des messages de lettres mortes d'une application à une file d'attente de lettres mortes unique.</span><span class="sxs-lookup"><span data-stu-id="f1e05-125">In general, using a custom dead-letter queue is best because it enables you to send dead-letter messages from one application into a single dead-letter queue.</span></span> <span data-ttu-id="f1e05-126">Sinon, tous les messages de lettres mortes qui se produisent pour toutes les applications qui s'exécutent sur le système sont remis à une file d'attente unique.</span><span class="sxs-lookup"><span data-stu-id="f1e05-126">Otherwise, all dead-letter messages that occur for all applications running on the system are delivered to a single queue.</span></span> <span data-ttu-id="f1e05-127">Chaque application doit ensuite parcourir la file d'attente de lettres mortes pour rechercher les messages de lettres mortes qui sont pertinents pour cette application.</span><span class="sxs-lookup"><span data-stu-id="f1e05-127">Each application must then search though the dead-letter queue to find the dead-letter messages that are relevant to that application.</span></span> <span data-ttu-id="f1e05-128">Parfois, l'utilisation d'une file d'attente de lettres mortes personnalisée n'est pas possible, lors de l'utilisation de MSMQ 3.0. par exemple.</span><span class="sxs-lookup"><span data-stu-id="f1e05-128">Sometimes, using a custom dead-letter queue is not feasible, such as when using MSMQ 3.0.</span></span>  
  
 <span data-ttu-id="f1e05-129">La désactivation des files d'attente de lettres mortes pour les communications fiables de bout en bout n'est pas recommandée.</span><span class="sxs-lookup"><span data-stu-id="f1e05-129">Turning off dead-letter queues for end-to-end reliable communication is not recommended.</span></span>  
  
 [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="f1e05-130">[Échecs lors du transfert de lettres mortes à l’aide de files d’attente pour traiter des messages](../../../../docs/framework/wcf/feature-details/using-dead-letter-queues-to-handle-message-transfer-failures.md).</span><span class="sxs-lookup"><span data-stu-id="f1e05-130"> [Using Dead-Letter Queues to Handle Message Transfer Failures](../../../../docs/framework/wcf/feature-details/using-dead-letter-queues-to-handle-message-transfer-failures.md).</span></span>  
  
### <a name="use-of-poison-message-handling"></a><span data-ttu-id="f1e05-131">Utilisation de la gestion des messages incohérents</span><span class="sxs-lookup"><span data-stu-id="f1e05-131">Use of Poison-Message Handling</span></span>  
 <span data-ttu-id="f1e05-132">La gestion des messages empoisonnés permet de reprendre le traitement des messages après une défaillance.</span><span class="sxs-lookup"><span data-stu-id="f1e05-132">Poison-message handling provides the ability to recover from the failure to process messages.</span></span>  
  
 <span data-ttu-id="f1e05-133">Lorsque vous utilisez la fonctionnalité de gestion des messages incohérents, vérifiez que la propriété <xref:System.ServiceModel.MsmqBindingBase.ReceiveErrorHandling%2A> a la valeur appropriée.</span><span class="sxs-lookup"><span data-stu-id="f1e05-133">When using the poison-message handling feature, ensure that the <xref:System.ServiceModel.MsmqBindingBase.ReceiveErrorHandling%2A> property is set to the appropriate value.</span></span> <span data-ttu-id="f1e05-134">Lui affecter la valeur <xref:System.ServiceModel.ReceiveErrorHandling.Drop> signifie que les données sont perdues.</span><span class="sxs-lookup"><span data-stu-id="f1e05-134">Setting it to <xref:System.ServiceModel.ReceiveErrorHandling.Drop> means the data is lost.</span></span> <span data-ttu-id="f1e05-135">En revanche, lui affecter la valeur <xref:System.ServiceModel.ReceiveErrorHandling.Fault> entraîne la défaillance de l'hôte de service lorsqu'il détecte un message incohérent.</span><span class="sxs-lookup"><span data-stu-id="f1e05-135">On the other hand, setting it to <xref:System.ServiceModel.ReceiveErrorHandling.Fault> faults the service host when it detects a poison message.</span></span> <span data-ttu-id="f1e05-136">Avec MSMQ 3.0, <xref:System.ServiceModel.ReceiveErrorHandling.Fault> est la meilleure option pour éviter la perte de données et se débarrasser du message incohérent.</span><span class="sxs-lookup"><span data-stu-id="f1e05-136">Using MSMQ 3.0, <xref:System.ServiceModel.ReceiveErrorHandling.Fault> is the best option to avoid data loss and move the poison message out of the way.</span></span> <span data-ttu-id="f1e05-137">Avec MSMQ 4.5, <xref:System.ServiceModel.ReceiveErrorHandling.Move> est l'approche recommandée.</span><span class="sxs-lookup"><span data-stu-id="f1e05-137">Using MSMQ 4.0, <xref:System.ServiceModel.ReceiveErrorHandling.Move> is the recommended approach.</span></span> <span data-ttu-id="f1e05-138"><xref:System.ServiceModel.ReceiveErrorHandling.Move> déplace un message incohérent hors de la file d'attente afin que le service puisse continuer à traiter de nouveaux messages.</span><span class="sxs-lookup"><span data-stu-id="f1e05-138"><xref:System.ServiceModel.ReceiveErrorHandling.Move> moves a poisoned message out of the queue so the service can continue to process new messages.</span></span> <span data-ttu-id="f1e05-139">Le service des messages incohérents peut ensuite traiter séparément le message incohérent.</span><span class="sxs-lookup"><span data-stu-id="f1e05-139">The poison-message service can then process the poison message separately.</span></span>  
  
 [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="f1e05-140">[Gestion des messages incohérents](../../../../docs/framework/wcf/feature-details/poison-message-handling.md).</span><span class="sxs-lookup"><span data-stu-id="f1e05-140"> [Poison Message Handling](../../../../docs/framework/wcf/feature-details/poison-message-handling.md).</span></span>  
  
## <a name="achieving-high-throughput"></a><span data-ttu-id="f1e05-141">Obtention d'un haut débit</span><span class="sxs-lookup"><span data-stu-id="f1e05-141">Achieving High Throughput</span></span>  
 <span data-ttu-id="f1e05-142">Pour obtenir un débit supérieur sur un point de terminaison unique, utilisez les fonctionnalités suivantes :</span><span class="sxs-lookup"><span data-stu-id="f1e05-142">To achieve high throughput on a single endpoint, use the following:</span></span>  
  
-   <span data-ttu-id="f1e05-143">Traitement transactionnel par lots.</span><span class="sxs-lookup"><span data-stu-id="f1e05-143">Transacted batching.</span></span> <span data-ttu-id="f1e05-144">Le traitement transactionnel par lots permet de lire de nombreux messages dans une transaction unique.</span><span class="sxs-lookup"><span data-stu-id="f1e05-144">Transacted batching ensures that many messages can be read in a single transaction.</span></span> <span data-ttu-id="f1e05-145">Il optimise les validations de transactions et augmente la performance globale.</span><span class="sxs-lookup"><span data-stu-id="f1e05-145">This optimizes transaction commits, increasing overall performance.</span></span> <span data-ttu-id="f1e05-146">L'inconvénient du traitement par lots est que si une défaillance se produit dans un message unique dans un lot, le lot entier est restauré et les messages doivent être traités un par un jusqu'à ce que le traitement par lots soit revenu sûr.</span><span class="sxs-lookup"><span data-stu-id="f1e05-146">The cost of batching is that if a failure occurs in a single message within a batch, then the entire batch is rolled back and the messages must be processed one at a time until it is safe to batch again.</span></span> <span data-ttu-id="f1e05-147">Dans la plupart des cas, les messages incohérents sont rares, donc le traitement par lots est le meilleur moyen d’augmenter les performances du système, en particulier lorsque d’autres gestionnaires de ressources participent à la transaction.</span><span class="sxs-lookup"><span data-stu-id="f1e05-147">In most cases, poison messages are rare, so batching is the preferred way to increase system performance, particularly when you have other resource managers that participate in the transaction.</span></span> [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="f1e05-148">[Le traitement par lot des Messages dans une Transaction](../../../../docs/framework/wcf/feature-details/batching-messages-in-a-transaction.md).</span><span class="sxs-lookup"><span data-stu-id="f1e05-148"> [Batching Messages in a Transaction](../../../../docs/framework/wcf/feature-details/batching-messages-in-a-transaction.md).</span></span>  
  
-   <span data-ttu-id="f1e05-149">Accès concurrentiel.</span><span class="sxs-lookup"><span data-stu-id="f1e05-149">Concurrency.</span></span> <span data-ttu-id="f1e05-150">L'accès concurrentiel augmente le débit, mais il peut également créer des conflits de ressources partagées.</span><span class="sxs-lookup"><span data-stu-id="f1e05-150">Concurrency increases throughput, but concurrency also affects contention to shared resources.</span></span> [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="f1e05-151">[Concurrence](../../../../docs/framework/wcf/samples/concurrency.md).</span><span class="sxs-lookup"><span data-stu-id="f1e05-151"> [Concurrency](../../../../docs/framework/wcf/samples/concurrency.md).</span></span>  
  
-   <span data-ttu-id="f1e05-152">Limitation.</span><span class="sxs-lookup"><span data-stu-id="f1e05-152">Throttling.</span></span> <span data-ttu-id="f1e05-153">Pour des performances optimales, limitez le nombre de messages dans le pipeline de répartiteur.</span><span class="sxs-lookup"><span data-stu-id="f1e05-153">For optimal performance, throttle the number of messages in the dispatcher pipeline.</span></span> <span data-ttu-id="f1e05-154">Pour obtenir un exemple de procédure à suivre, consultez [limitation](../../../../docs/framework/wcf/samples/throttling.md).</span><span class="sxs-lookup"><span data-stu-id="f1e05-154">For an example of how to do this, see [Throttling](../../../../docs/framework/wcf/samples/throttling.md).</span></span>  
  
 <span data-ttu-id="f1e05-155">Lorsque vous utilisez le traitement par lots, sachez que l'accès concurrentiel et la limitation se traduisent par des lots simultanés.</span><span class="sxs-lookup"><span data-stu-id="f1e05-155">When using batching, be aware that concurrency and throttling translate to concurrent batches.</span></span>  
  
 <span data-ttu-id="f1e05-156">Pour obtenir un débit et une disponibilité supérieurs, utilisez une batterie de services [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] qui lisent les messages dans la file d'attente.</span><span class="sxs-lookup"><span data-stu-id="f1e05-156">To achieve higher throughput and availability, use a farm of [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services that read from the queue.</span></span> <span data-ttu-id="f1e05-157">Cela nécessite que tous ces services exposent le même contrat sur le même point de terminaison.</span><span class="sxs-lookup"><span data-stu-id="f1e05-157">This requires that all of these services expose the same contract on the same endpoint.</span></span> <span data-ttu-id="f1e05-158">Cette approche fonctionne le mieux pour les applications qui ont des taux élevés de production de messages parce qu'elle active plusieurs services qui lisent les messages dans la même file d'attente.</span><span class="sxs-lookup"><span data-stu-id="f1e05-158">The farm approach works best for applications that have high production rates of messages because it enables a number of services to all read from the same queue.</span></span>  
  
 <span data-ttu-id="f1e05-159">Lorsque vous utilisez des batteries de services, sachez que MSMQ 3.0 ne prend pas en charge les lectures transactionnelles à distance.</span><span class="sxs-lookup"><span data-stu-id="f1e05-159">When using farms, be aware that MSMQ 3.0 does not support remote transacted reads.</span></span> <span data-ttu-id="f1e05-160">MSMQ 4.0 prend en charge les lectures transactionnelles à distance.</span><span class="sxs-lookup"><span data-stu-id="f1e05-160">MSMQ 4.0 does support remote transacted reads.</span></span>  
  
 [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="f1e05-161">[Le traitement par lot des Messages dans une Transaction](../../../../docs/framework/wcf/feature-details/batching-messages-in-a-transaction.md) et [les différences dans les files d’attente de fonctionnalités dans Windows Vista, Windows Server 2003 et Windows XP](../../../../docs/framework/wcf/feature-details/diff-in-queue-in-vista-server-2003-windows-xp.md).</span><span class="sxs-lookup"><span data-stu-id="f1e05-161"> [Batching Messages in a Transaction](../../../../docs/framework/wcf/feature-details/batching-messages-in-a-transaction.md) and [Differences in Queuing Features in Windows Vista, Windows Server 2003, and Windows XP](../../../../docs/framework/wcf/feature-details/diff-in-queue-in-vista-server-2003-windows-xp.md).</span></span>  
  
## <a name="queuing-with-unit-of-work-semantics"></a><span data-ttu-id="f1e05-162">Mise en file d'attente avec sémantique d'unité de travail</span><span class="sxs-lookup"><span data-stu-id="f1e05-162">Queuing with Unit of Work Semantics</span></span>  
 <span data-ttu-id="f1e05-163">Dans certains scénarios, les messages d'un groupe dans une file d'attente peuvent être liés et, par conséquent, l'ordre de ces messages est significatif.</span><span class="sxs-lookup"><span data-stu-id="f1e05-163">In some scenarios a group of messages in a queue may be related and, therefore, the ordering of these messages is significant.</span></span> <span data-ttu-id="f1e05-164">Dans de tels scénarios, traitez le groupe de messages connexes comme une unité unique : soit tous les messages sont traités avec succès, soit aucun ne l'est.</span><span class="sxs-lookup"><span data-stu-id="f1e05-164">In such scenarios, process a group of related messages together as a single unit: either all of the messages are processed successfully or none are.</span></span> <span data-ttu-id="f1e05-165">Pour implémenter un tel comportement, utilisez des sessions avec files d'attente.</span><span class="sxs-lookup"><span data-stu-id="f1e05-165">To implement such behavior, use sessions with queues.</span></span>  
  
 [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="f1e05-166">[Regroupant les Messages en file d’attente dans une Session](../../../../docs/framework/wcf/feature-details/grouping-queued-messages-in-a-session.md).</span><span class="sxs-lookup"><span data-stu-id="f1e05-166"> [Grouping Queued Messages in a Session](../../../../docs/framework/wcf/feature-details/grouping-queued-messages-in-a-session.md).</span></span>  
  
## <a name="correlating-request-reply-messages"></a><span data-ttu-id="f1e05-167">Corrélation des messages demande-réponse</span><span class="sxs-lookup"><span data-stu-id="f1e05-167">Correlating Request-Reply Messages</span></span>  
 <span data-ttu-id="f1e05-168">Bien que les files d'attente soient en général unidirectionnelles, dans certains scénarios vous pouvez corréler une réponse reçue à une demande envoyée plus tôt.</span><span class="sxs-lookup"><span data-stu-id="f1e05-168">Though queues are typically one-way, in some scenarios you may want to correlate a reply received to a request sent earlier.</span></span> <span data-ttu-id="f1e05-169">Si vous avez besoin d'une telle corrélation, il est recommandé d'insérer votre propre en-tête de message SOAP qui contient des informations de corrélation dans le message.</span><span class="sxs-lookup"><span data-stu-id="f1e05-169">If you require such correlation, it is recommended that you apply your own SOAP message header that contains correlation information with the message.</span></span> <span data-ttu-id="f1e05-170">En général, l'expéditeur joint cet en-tête avec le message, et le récepteur, en traitant le message et en y répondant avec un nouveau message sur une file d'attente de réponse, joint l'en-tête du message de l'expéditeur qui contient les informations de corrélation afin que l'expéditeur puisse identifier le message de réponse en relation avec le message de demande.</span><span class="sxs-lookup"><span data-stu-id="f1e05-170">Typically, the sender attaches this header with the message, and the receiver, upon processing the message and replying back with a new message on a reply queue, attaches the sender's message header that contains the correlation information so that the sender can identify the reply message with the request message.</span></span>  
  
## <a name="integrating-with-non-wcf-applications"></a><span data-ttu-id="f1e05-171">Intégration à des applications non WCF</span><span class="sxs-lookup"><span data-stu-id="f1e05-171">Integrating with Non-WCF Applications</span></span>  
 <span data-ttu-id="f1e05-172">Utilisez `MsmqIntegrationBinding` lors de l'intégration des services ou des clients [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] à des services ou clients non [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="f1e05-172">Use `MsmqIntegrationBinding` when integrating [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services or clients with non-[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services or clients.</span></span> <span data-ttu-id="f1e05-173">L'application non [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] peut être une application MSMQ écrite à l'aide de System.Messaging, COM+ [!INCLUDE[vbprvb](../../../../includes/vbprvb-md.md)] ou C++.</span><span class="sxs-lookup"><span data-stu-id="f1e05-173">The non-[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] application can be an MSMQ application written using System.Messaging, COM+, [!INCLUDE[vbprvb](../../../../includes/vbprvb-md.md)], or C++.</span></span>  
  
 <span data-ttu-id="f1e05-174">Lorsque vous utilisez `MsmqIntegrationBinding`, sachez ce qui suit :</span><span class="sxs-lookup"><span data-stu-id="f1e05-174">When using `MsmqIntegrationBinding`, be aware of the following:</span></span>  
  
-   <span data-ttu-id="f1e05-175">Un corps de message [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] n'est pas identique à un corps de message MSMQ.</span><span class="sxs-lookup"><span data-stu-id="f1e05-175">A [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] message body is not the same as a MSMQ message body.</span></span> <span data-ttu-id="f1e05-176">Lors de l'envoi d'un message [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] à l'aide d'une liaison mise en file d'attente, le corps du message [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] est placé dans un message MSMQ.</span><span class="sxs-lookup"><span data-stu-id="f1e05-176">When sending a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] message using a queued binding, the [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] message body is placed inside of a MSMQ message.</span></span> <span data-ttu-id="f1e05-177">L'infrastructure MSMQ oublie cette information supplémentaire ; elle ne voit que le message MSMQ.</span><span class="sxs-lookup"><span data-stu-id="f1e05-177">The MSMQ infrastructure is oblivious to this extra information; it sees only the MSMQ message.</span></span>  
  
-   <span data-ttu-id="f1e05-178">`MsmqIntegrationBinding` prend en charge les types de sérialisation les plus courants.</span><span class="sxs-lookup"><span data-stu-id="f1e05-178">`MsmqIntegrationBinding` supports popular serialization types.</span></span> <span data-ttu-id="f1e05-179">Selon le type de sérialisation, le type de corps du message générique, <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601>, prend des paramètres de type différents.</span><span class="sxs-lookup"><span data-stu-id="f1e05-179">Based on the serialization type, the body type of the generic message, <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601>, takes different type parameters.</span></span> <span data-ttu-id="f1e05-180">Par exemple, <xref:System.ServiceModel.MsmqIntegration.MsmqMessageSerializationFormat.ByteArray> requiert `MsmqMessage\<byte[]>` et <xref:System.ServiceModel.MsmqIntegration.MsmqMessageSerializationFormat.Stream> requiert `MsmqMessage<Stream>`.</span><span class="sxs-lookup"><span data-stu-id="f1e05-180">For example, <xref:System.ServiceModel.MsmqIntegration.MsmqMessageSerializationFormat.ByteArray> requires `MsmqMessage\<byte[]>` and <xref:System.ServiceModel.MsmqIntegration.MsmqMessageSerializationFormat.Stream> requires `MsmqMessage<Stream>`.</span></span>  
  
-   <span data-ttu-id="f1e05-181">Avec la sérialisation XML, vous pouvez spécifier le type connu à l’aide de la `KnownTypes` de l’attribut le [ \<comportement >](../../../../docs/framework/configure-apps/file-schema/wcf/behavior-of-servicebehaviors.md) élément qui est ensuite utilisé pour déterminer comment désérialiser le message XML.</span><span class="sxs-lookup"><span data-stu-id="f1e05-181">With XML serialization, you can specify the known type using the `KnownTypes` attribute on the [\<behavior>](../../../../docs/framework/configure-apps/file-schema/wcf/behavior-of-servicebehaviors.md) element that is then used to determine how to deserialize the XML message.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="f1e05-182">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="f1e05-182">See Also</span></span>  
 [<span data-ttu-id="f1e05-183">Mise en file d’attente dans WCF</span><span class="sxs-lookup"><span data-stu-id="f1e05-183">Queuing in WCF</span></span>](../../../../docs/framework/wcf/feature-details/queuing-in-wcf.md)  
 [<span data-ttu-id="f1e05-184">Guide pratique pour échanger des messages en file d’attente avec des points de terminaison WCF</span><span class="sxs-lookup"><span data-stu-id="f1e05-184">How to: Exchange Queued Messages with WCF Endpoints</span></span>](../../../../docs/framework/wcf/feature-details/how-to-exchange-queued-messages-with-wcf-endpoints.md)  
 [<span data-ttu-id="f1e05-185">Guide pratique pour échanger des messages avec des points de terminaison WCF et des applications Message Queuing</span><span class="sxs-lookup"><span data-stu-id="f1e05-185">How to: Exchange Messages with WCF Endpoints and Message Queuing Applications</span></span>](../../../../docs/framework/wcf/feature-details/how-to-exchange-messages-with-wcf-endpoints-and-message-queuing-applications.md)  
 [<span data-ttu-id="f1e05-186">Regroupement de messages mis en file d’attente dans une session</span><span class="sxs-lookup"><span data-stu-id="f1e05-186">Grouping Queued Messages in a Session</span></span>](../../../../docs/framework/wcf/feature-details/grouping-queued-messages-in-a-session.md)  
 [<span data-ttu-id="f1e05-187">Traitement par lots des messages dans une transaction</span><span class="sxs-lookup"><span data-stu-id="f1e05-187">Batching Messages in a Transaction</span></span>](../../../../docs/framework/wcf/feature-details/batching-messages-in-a-transaction.md)  
 [<span data-ttu-id="f1e05-188">Utilisation de files d’attente de lettres mortes pour gérer des défaillances de transfert de messages</span><span class="sxs-lookup"><span data-stu-id="f1e05-188">Using Dead-Letter Queues to Handle Message Transfer Failures</span></span>](../../../../docs/framework/wcf/feature-details/using-dead-letter-queues-to-handle-message-transfer-failures.md)  
 [<span data-ttu-id="f1e05-189">Gestion des messages incohérents</span><span class="sxs-lookup"><span data-stu-id="f1e05-189">Poison Message Handling</span></span>](../../../../docs/framework/wcf/feature-details/poison-message-handling.md)  
 [<span data-ttu-id="f1e05-190">Différences entre les fonctionnalités de mise en file d’attente dans Windows Vista, Windows Server 2003 et Windows XP</span><span class="sxs-lookup"><span data-stu-id="f1e05-190">Differences in Queuing Features in Windows Vista, Windows Server 2003, and Windows XP</span></span>](../../../../docs/framework/wcf/feature-details/diff-in-queue-in-vista-server-2003-windows-xp.md)  
 [<span data-ttu-id="f1e05-191">Sécurisation des messages à l’aide de la sécurité de transport</span><span class="sxs-lookup"><span data-stu-id="f1e05-191">Securing Messages Using Transport Security</span></span>](../../../../docs/framework/wcf/feature-details/securing-messages-using-transport-security.md)  
 [<span data-ttu-id="f1e05-192">Sécurisation des messages à l’aide de la sécurité de message</span><span class="sxs-lookup"><span data-stu-id="f1e05-192">Securing Messages Using Message Security</span></span>](../../../../docs/framework/wcf/feature-details/securing-messages-using-message-security.md)  
 [<span data-ttu-id="f1e05-193">Résolution des problèmes de messagerie en file d’attente</span><span class="sxs-lookup"><span data-stu-id="f1e05-193">Troubleshooting Queued Messaging</span></span>](../../../../docs/framework/wcf/feature-details/troubleshooting-queued-messaging.md)
