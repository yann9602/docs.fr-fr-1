---
title: "Comment : récupérer des métadonnées et implémenter un service conforme"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: f6f3a2b9-c8aa-4b0b-832c-ec2927bf1163
caps.latest.revision: "13"
author: Erikre
ms.author: erikre
manager: erikre
ms.openlocfilehash: adb1cb9006c6f0e01008dd5f610c4c340c7ddbff
ms.sourcegitcommit: bd1ef61f4bb794b25383d3d72e71041a5ced172e
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/18/2017
---
# <a name="how-to-retrieve-metadata-and-implement-a-compliant-service"></a><span data-ttu-id="e2d81-102">Comment : récupérer des métadonnées et implémenter un service conforme</span><span class="sxs-lookup"><span data-stu-id="e2d81-102">How to: Retrieve Metadata and Implement a Compliant Service</span></span>
<span data-ttu-id="e2d81-103">Souvent, la personne qui conçoit et implémente des services n'est pas la même.</span><span class="sxs-lookup"><span data-stu-id="e2d81-103">Often, the same person does not design and implement services.</span></span> <span data-ttu-id="e2d81-104">Dans les environnements où l'interaction d'applications est importante, les contrats peuvent être conçus ou décrits en WSDL (Web Services Description Language) et un développeur doit implémenter un service qui se conforme au contrat fourni.</span><span class="sxs-lookup"><span data-stu-id="e2d81-104">In environments where interoperating applications are important, contracts can be designed or described in Web Services Description Language (WSDL) and a developer must implement a service that complies with the provided contract.</span></span> <span data-ttu-id="e2d81-105">Vous pouvez souhaiter également effectuer une migration d'un service existant vers [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] mais conserver le format de transmission.</span><span class="sxs-lookup"><span data-stu-id="e2d81-105">You may also want to migrate an existing service to [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] but preserve the wire format.</span></span> <span data-ttu-id="e2d81-106">De plus, les contrats duplex requièrent que les appelants implémentent également un contrat de rappel.</span><span class="sxs-lookup"><span data-stu-id="e2d81-106">In addition, duplex contracts require callers to implement a callback contract as well.</span></span>  
  
 <span data-ttu-id="e2d81-107">Dans ce cas, vous devez utiliser le [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) (ou un outil équivalent) pour générer une interface de contrat de service dans un langage managé que vous pouvez implémenter pour répondre aux exigences de la contrat.</span><span class="sxs-lookup"><span data-stu-id="e2d81-107">In these cases, you must use the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) (or an equivalent tool) to generate a service contract interface in a managed language that you can implement to fulfill the requirements of the contract.</span></span> <span data-ttu-id="e2d81-108">Généralement la [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) est utilisée pour acquérir un contrat de service qui est utilisé avec une fabrication de canal ou un [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] type de client ainsi qu’avec un fichier de configuration de client qui permet de configurer le liaison et l’adresse.</span><span class="sxs-lookup"><span data-stu-id="e2d81-108">Typically the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) is used to acquire a service contract that is used with a channel factory or a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] client type as well as with a client configuration file that sets up the correct binding and address.</span></span> <span data-ttu-id="e2d81-109">Pour utiliser le fichier de configuration généré, vous devez le remplacer par un fichier de configuration de service.</span><span class="sxs-lookup"><span data-stu-id="e2d81-109">To use the generated configuration file, you must change it into a service configuration file.</span></span> <span data-ttu-id="e2d81-110">Vous devrez peut-être aussi modifier le contrat de service.</span><span class="sxs-lookup"><span data-stu-id="e2d81-110">You may also need to modify the service contract.</span></span>  
  
### <a name="to-retrieve-data-and-implement-a-compliant-service"></a><span data-ttu-id="e2d81-111">Pour récupérer des données et implémenter un service conforme</span><span class="sxs-lookup"><span data-stu-id="e2d81-111">To retrieve data and implement a compliant service</span></span>  
  
1.  <span data-ttu-id="e2d81-112">Utilisez le [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) par rapport aux fichiers de métadonnées ou un point de terminaison de métadonnées pour générer un fichier de code.</span><span class="sxs-lookup"><span data-stu-id="e2d81-112">Use the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) against metadata files or a metadata endpoint to generate a code file.</span></span>  
  
2.  <span data-ttu-id="e2d81-113">Recherchez la portion du fichier de code de sortie qui contient l'interface souhaitée (s'il y en a plusieurs) marquée avec l'attribut <xref:System.ServiceModel.ServiceContractAttribute?displayProperty=nameWithType>.</span><span class="sxs-lookup"><span data-stu-id="e2d81-113">Search for the portion of the output code file that contains the interface of interest (in case there is more than one) that is marked with the <xref:System.ServiceModel.ServiceContractAttribute?displayProperty=nameWithType> attribute.</span></span> <span data-ttu-id="e2d81-114">L’exemple de code suivant montre les deux interfaces générées par [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md).</span><span class="sxs-lookup"><span data-stu-id="e2d81-114">The following code example shows the two interfaces generated by [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md).</span></span> <span data-ttu-id="e2d81-115">La première (`ISampleService`) est l'interface de contrat de service que vous implémentez pour créer un service conforme.</span><span class="sxs-lookup"><span data-stu-id="e2d81-115">The first (`ISampleService`) is the service contract interface that you implement to create a compliant service.</span></span> <span data-ttu-id="e2d81-116">La seconde (`ISampleServiceChannel`) est une interface d'assistance destinée au client qui étend à la fois l'interface de contrat de service et <xref:System.ServiceModel.IClientChannel?displayProperty=nameWithType>, et qui est utilisée dans une application cliente.</span><span class="sxs-lookup"><span data-stu-id="e2d81-116">The second (`ISampleServiceChannel`) is a helper interface for client use that extends both the service contract interface and <xref:System.ServiceModel.IClientChannel?displayProperty=nameWithType> and is for use in a client application.</span></span>  
  
     [!code-csharp[ClientProxyCodeSample#2](../../../../samples/snippets/csharp/VS_Snippets_CFX/clientproxycodesample/cs/proxycode.cs#2)]  
  
3.  <span data-ttu-id="e2d81-117">Si WSDL ne spécifie pas d'action de réponse pour toutes les opérations, les contrats d'opération générés peuvent avoir la propriété <xref:System.ServiceModel.OperationContractAttribute.ReplyAction%2A> définie avec le caractère générique (*).</span><span class="sxs-lookup"><span data-stu-id="e2d81-117">If the WSDL does not specify a reply action for all of the operations, the generated operation contracts may have the <xref:System.ServiceModel.OperationContractAttribute.ReplyAction%2A> property set to the wildcard character (*).</span></span> <span data-ttu-id="e2d81-118">Supprimez ce paramètre de propriété.</span><span class="sxs-lookup"><span data-stu-id="e2d81-118">Remove this property setting.</span></span> <span data-ttu-id="e2d81-119">Sinon, lorsque vous implémentez les métadonnées de contrat de service, celles-ci ne peuvent pas être exportées pour ces opérations.</span><span class="sxs-lookup"><span data-stu-id="e2d81-119">Otherwise, when you implement the service contract metadata, the metadata cannot be exported for those operations.</span></span>  
  
4.  <span data-ttu-id="e2d81-120">Implémentez l'interface sur une classe et hébergez le service.</span><span class="sxs-lookup"><span data-stu-id="e2d81-120">Implement the interface on a class and host the service.</span></span> <span data-ttu-id="e2d81-121">Pour obtenir un exemple, consultez [Comment : implémenter un contrat de Service](../../../../docs/framework/wcf/how-to-implement-a-wcf-contract.md), ou consultez une implémentation simple ci-dessous dans la section exemple.</span><span class="sxs-lookup"><span data-stu-id="e2d81-121">For an example, see [How to: Implement a Service Contract](../../../../docs/framework/wcf/how-to-implement-a-wcf-contract.md), or see a simple implementation below in the Example section.</span></span>  
  
5.  <span data-ttu-id="e2d81-122">Dans la configuration du client de fichiers qui le [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) génère, modifiez le [ \<client >](../../../../docs/framework/configure-apps/file-schema/wcf/client.md) section de configuration à un [ \<services >](../../../../docs/framework/configure-apps/file-schema/wcf/services.md) section de configuration.</span><span class="sxs-lookup"><span data-stu-id="e2d81-122">In the client configuration file that the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) generates, change the [\<client>](../../../../docs/framework/configure-apps/file-schema/wcf/client.md) configuration section to a [\<services>](../../../../docs/framework/configure-apps/file-schema/wcf/services.md) configuration section.</span></span> <span data-ttu-id="e2d81-123">(Pour obtenir un exemple d'un fichier de configuration d'application cliente généré, consultez la section « Exemple » suivante.)</span><span class="sxs-lookup"><span data-stu-id="e2d81-123">(For an example of a generated client application configuration file, see the following "Example" section.)</span></span>  
  
6.  <span data-ttu-id="e2d81-124">Dans le [ \<services >](../../../../docs/framework/configure-apps/file-schema/wcf/services.md) configuration en créant un `name` d’attribut dans le [ \<services >](../../../../docs/framework/configure-apps/file-schema/wcf/services.md) section de configuration pour votre service mise en œuvre.</span><span class="sxs-lookup"><span data-stu-id="e2d81-124">Within the [\<services>](../../../../docs/framework/configure-apps/file-schema/wcf/services.md) configuration section, create a `name` attribute in the [\<services>](../../../../docs/framework/configure-apps/file-schema/wcf/services.md) configuration section for your service implementation.</span></span>  
  
7.  <span data-ttu-id="e2d81-125">Affectez à l'attribut `name` de service le nom de configuration pour votre implémentation de service.</span><span class="sxs-lookup"><span data-stu-id="e2d81-125">Set the service `name` attribute to the configuration name for your service implementation.</span></span>  
  
8.  <span data-ttu-id="e2d81-126">Ajoutez les éléments de configuration de point de terminaison qui utilisent le contrat de service implémenté à la section de configuration du service.</span><span class="sxs-lookup"><span data-stu-id="e2d81-126">Add the endpoint configuration elements that use the implemented service contract to the service configuration section.</span></span>  
  
## <a name="example"></a><span data-ttu-id="e2d81-127">Exemple</span><span class="sxs-lookup"><span data-stu-id="e2d81-127">Example</span></span>  
 <span data-ttu-id="e2d81-128">L’exemple de code suivant montre la majorité d’un fichier de code généré en exécutant la [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) par rapport aux fichiers de métadonnées.</span><span class="sxs-lookup"><span data-stu-id="e2d81-128">The following code example shows the majority of a code file generated by running the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md) against metadata files.</span></span>  
  
 <span data-ttu-id="e2d81-129">L'exemple de code suivant montre :</span><span class="sxs-lookup"><span data-stu-id="e2d81-129">The following code shows:</span></span>  
  
-   <span data-ttu-id="e2d81-130">L'interface de contrat de service qui, lorsqu'elle est implémentée, se conforme aux spécifications de contrat (`ISampleService`).</span><span class="sxs-lookup"><span data-stu-id="e2d81-130">The service contract interface that, when implemented, complies with the contract requirements (`ISampleService`).</span></span>  
  
-   <span data-ttu-id="e2d81-131">L'interface d'assistance destinée au client qui étend à la fois l'interface de contrat de service et <xref:System.ServiceModel.IClientChannel?displayProperty=nameWithType>, et doit être utilisée dans une application cliente `ISampleServiceChannel`.</span><span class="sxs-lookup"><span data-stu-id="e2d81-131">The helper interface for client use that extends both the service contract interface and <xref:System.ServiceModel.IClientChannel?displayProperty=nameWithType> and is for use in a client application (`ISampleServiceChannel`).</span></span>  
  
-   <span data-ttu-id="e2d81-132">La classe d'assistance qui étend <xref:System.ServiceModel.ClientBase%601?displayProperty=nameWithType> et doit être utilisée dans une application cliente (`SampleServiceClient`).</span><span class="sxs-lookup"><span data-stu-id="e2d81-132">The helper class that extends <xref:System.ServiceModel.ClientBase%601?displayProperty=nameWithType> and is for use in a client application (`SampleServiceClient`).</span></span>  
  
-   <span data-ttu-id="e2d81-133">Le fichier de configuration généré à partir du service.</span><span class="sxs-lookup"><span data-stu-id="e2d81-133">The configuration file generated from the service.</span></span>  
  
-   <span data-ttu-id="e2d81-134">L'implémentation d'un service `ISampleService` simple.</span><span class="sxs-lookup"><span data-stu-id="e2d81-134">A simple `ISampleService` service implementation.</span></span>  
  
-   <span data-ttu-id="e2d81-135">Conversion du fichier de configuration côté client vers une version côté service.</span><span class="sxs-lookup"><span data-stu-id="e2d81-135">A conversion of the client-side configuration file to a service-side version.</span></span>  
  
 [!code-csharp[ClientProxyCodeSample#1](../../../../samples/snippets/csharp/VS_Snippets_CFX/clientproxycodesample/cs/proxycode.cs#1)]    
 [!code-xml[ClientProxyCodeSample#10](../../../../samples/snippets/csharp/VS_Snippets_CFX/clientproxycodesample/cs/client.exe.config#10)]     
 [!code-csharp[ClientProxyCodeSample#5](../../../../samples/snippets/csharp/VS_Snippets_CFX/clientproxycodesample/cs/hostapplication.cs#5)]    
 [!code-xml[ClientProxyCodeSample#20](../../../../samples/snippets/csharp/VS_Snippets_CFX/clientproxycodesample/cs/hostapplication.exe.config#20)]    
  
## <a name="see-also"></a><span data-ttu-id="e2d81-136">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="e2d81-136">See Also</span></span>  
 [<span data-ttu-id="e2d81-137">Outil ServiceModel Metadata Utility (Svcutil.exe)</span><span class="sxs-lookup"><span data-stu-id="e2d81-137">ServiceModel Metadata Utility Tool (Svcutil.exe)</span></span>](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)
