---
title: Vue d'ensemble des files d'attente
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords: queues [WCF], MSMQ integration
ms.assetid: b8757992-ffce-40ad-9e9b-3243f6d0fce1
caps.latest.revision: "28"
author: dotnet-bot
ms.author: dotnetcontent
manager: wpickett
ms.openlocfilehash: c0952f238c34176112f6ec6a8520fb603cca4750
ms.sourcegitcommit: ce279f2d7fe2220e6ea0a25a8a7a5370ddf8d9f0
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 12/02/2017
---
# <a name="queues-overview"></a><span data-ttu-id="7655f-102">Vue d'ensemble des files d'attente</span><span class="sxs-lookup"><span data-stu-id="7655f-102">Queues Overview</span></span>
<span data-ttu-id="7655f-103">Cette section présente les concepts généraux et principaux relatifs à la communication mise en file d'attente.</span><span class="sxs-lookup"><span data-stu-id="7655f-103">This section introduces the general and core concepts behind queued communication.</span></span> <span data-ttu-id="7655f-104">Les sections suivantes fournissent des détails sur la manière dont les concepts de mise en file d'attente décrits dans cette rubrique se présentent dans [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)].</span><span class="sxs-lookup"><span data-stu-id="7655f-104">Subsequent sections go into details about how the queuing concepts described here are manifested in [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)].</span></span>  
  
## <a name="basic-queuing-concepts"></a><span data-ttu-id="7655f-105">Concepts de base de la mise en file d'attente</span><span class="sxs-lookup"><span data-stu-id="7655f-105">Basic Queuing Concepts</span></span>  
 <span data-ttu-id="7655f-106">Lors de la conception d'une application distribuée, le choix du bon transport pour la communication entre les services et les clients est important.</span><span class="sxs-lookup"><span data-stu-id="7655f-106">When designing a distributed application, choosing the right transport for communication between services and clients is important.</span></span> <span data-ttu-id="7655f-107">Plusieurs facteurs affectent le type de transport à utiliser.</span><span class="sxs-lookup"><span data-stu-id="7655f-107">Several factors affect the kind of transport to use.</span></span> <span data-ttu-id="7655f-108">Un facteur important, l'isolement entre le service, le client et le transport, détermine l'utilisation d'un transport de mise en file d'attente ou d'un transport direct, tel que TCP ou HTTP.</span><span class="sxs-lookup"><span data-stu-id="7655f-108">One important factor—isolation between the service, the client, and the transport—determines use of a queued transport or a direct transport, such as TCP or HTTP.</span></span> <span data-ttu-id="7655f-109">En raison de la nature des transports directs tels que TCP et HTTP, la communication s'arrête complètement si le service ou le client cessent de fonctionner ou en cas de défaillance du réseau.</span><span class="sxs-lookup"><span data-stu-id="7655f-109">Due to the nature of direct transports such as TCP and HTTP, communication stops altogether if the service or the client stop functioning or if the network fails.</span></span> <span data-ttu-id="7655f-110">Le service, le client et le réseau doivent s'exécuter en même temps pour que l'application fonctionne.</span><span class="sxs-lookup"><span data-stu-id="7655f-110">The service, the client, and the network must be running at the same time for the application to work.</span></span> <span data-ttu-id="7655f-111">Les transports de mise en file d'attente fournissent l'isolement, ce qui signifie qu'en cas de défaillance du service ou du client ou des liaisons de communication entre ces derniers, le client et le service peuvent continuer à fonctionner.</span><span class="sxs-lookup"><span data-stu-id="7655f-111">Queued transports provide isolation, which means that if the service or client fail or if communication links between them fail, the client and service can continue to function.</span></span>  
  
 <span data-ttu-id="7655f-112">Les files d'attente fournissent une communication fiable même en cas de défaillance des correspondants ou du réseau.</span><span class="sxs-lookup"><span data-stu-id="7655f-112">Queues provide reliable communication even with failures in the communicating parties or the network.</span></span> <span data-ttu-id="7655f-113">Les files d'attente capturent et remettent les messages échangés entre les correspondants.</span><span class="sxs-lookup"><span data-stu-id="7655f-113">Queues capture and deliver messages exchanged between the communicating parties.</span></span> <span data-ttu-id="7655f-114">Les files d'attente sont généralement soutenues par un type de magasin, ce qui peut être volatile ou durable.</span><span class="sxs-lookup"><span data-stu-id="7655f-114">Queues are typically backed by some kind of a store, which can be volatile or durable.</span></span> <span data-ttu-id="7655f-115">Les files d'attente stockent les messages d'un client pour le compte d'un service et transmettent ultérieurement ces messages au service.</span><span class="sxs-lookup"><span data-stu-id="7655f-115">Queues store messages from a client on behalf of a service and later forward these messages to the service.</span></span> <span data-ttu-id="7655f-116">Les files d'attente d'indirection fournissent un isolement garanti des défaillances pour chaque correspondant, ce qui fait d'elles le mécanisme de communication par défaut préféré pour les systèmes à forte disponibilité et les services déconnectés.</span><span class="sxs-lookup"><span data-stu-id="7655f-116">The indirection queues provide ensured isolation of failure by either party, thus making it the preferred communication mechanism for high-availability systems and disconnected services.</span></span> <span data-ttu-id="7655f-117">L'indirection est la conséquence d'une latence élevée.</span><span class="sxs-lookup"><span data-stu-id="7655f-117">The indirection comes with the cost of high latency.</span></span> <span data-ttu-id="7655f-118">*Latence* est le délai entre le moment que le client envoie un message et l’heure de réception par le service.</span><span class="sxs-lookup"><span data-stu-id="7655f-118">*Latency* is the time delay between the time the client sends a message and the time the service receives it.</span></span> <span data-ttu-id="7655f-119">Cela signifie qu'une fois un message envoyé, vous ne savez pas quand celui-ci peut être traité.</span><span class="sxs-lookup"><span data-stu-id="7655f-119">This means that once a message is sent, you do not know when that message may be processed.</span></span> <span data-ttu-id="7655f-120">La plupart des applications en file d'attente s'accommodent d'une latence élevée.</span><span class="sxs-lookup"><span data-stu-id="7655f-120">Most queued applications cope with high latency.</span></span> <span data-ttu-id="7655f-121">L'illustration suivante montre un modèle conceptuel de la communication en file d'attente.</span><span class="sxs-lookup"><span data-stu-id="7655f-121">The following illustration shows a conceptual model of queued communication.</span></span>  
  
 <span data-ttu-id="7655f-122">![Modèle de communication en file d’attente](../../../../docs/framework/wcf/feature-details/media/qconceptual-figure1c.gif "QConceptual-Figure1c")</span><span class="sxs-lookup"><span data-stu-id="7655f-122">![Model of queued communication](../../../../docs/framework/wcf/feature-details/media/qconceptual-figure1c.gif "QConceptual-Figure1c")</span></span>  
  
 <span data-ttu-id="7655f-123">Modèle conceptuel de la communication en file d'attente</span><span class="sxs-lookup"><span data-stu-id="7655f-123">Queued communication conceptual model</span></span>  
  
 <span data-ttu-id="7655f-124">En fait, la file d'attente est un concept distribué.</span><span class="sxs-lookup"><span data-stu-id="7655f-124">In reality, the queue is a distributed concept.</span></span> <span data-ttu-id="7655f-125">En tant que tel, la file d'attente peut être locale ou distante pour les correspondants.</span><span class="sxs-lookup"><span data-stu-id="7655f-125">As such, they can be local to either party or remote to both parties.</span></span> <span data-ttu-id="7655f-126">En général, la file d'attente est locale au service.</span><span class="sxs-lookup"><span data-stu-id="7655f-126">Typically, the queue is local to the service.</span></span> <span data-ttu-id="7655f-127">Dans cette configuration, le client ne peut pas dépendre de la connectivité de la file d'attente distante pour être constamment disponible.</span><span class="sxs-lookup"><span data-stu-id="7655f-127">In this configuration, the client cannot depend on connectivity to the remote queue to be constantly available.</span></span> <span data-ttu-id="7655f-128">De la même façon, la file d'attente doit être disponible quelle que soit la disponibilité du service qui lit la file d'attente.</span><span class="sxs-lookup"><span data-stu-id="7655f-128">Similarly, the queue must be available independent of the availability of the service reading from the queue.</span></span> <span data-ttu-id="7655f-129">Un gestionnaire de files d'attente gère un ensemble de files d'attente.</span><span class="sxs-lookup"><span data-stu-id="7655f-129">A queue manager manages a collection of queues.</span></span> <span data-ttu-id="7655f-130">Il est chargé d'accepter les messages envoyés à ses files d'attente par d'autres gestionnaires de files d'attente.</span><span class="sxs-lookup"><span data-stu-id="7655f-130">It is responsible for accepting messages sent to its queues from other queue managers.</span></span> <span data-ttu-id="7655f-131">Il doit aussi gérer la connectivité aux files d'attente distantes et le transfert des messages à ces files d'attente distantes.</span><span class="sxs-lookup"><span data-stu-id="7655f-131">It is also responsible for managing connectivity to remote queues and transferring messages to those remote queues.</span></span> <span data-ttu-id="7655f-132">Pour garantir la disponibilité des files d'attente en cas de défaillances de l'application du service ou du client, le gestionnaire de files d'attente est exécuté en général comme un service externe.</span><span class="sxs-lookup"><span data-stu-id="7655f-132">To ensure availability of queues despite client or service application failures, the queue manager is typically run as an external service.</span></span>  
  
 <span data-ttu-id="7655f-133">Lorsqu'un client envoie un message à une file d'attente, il adresse le message à la file d'attente cible qui est la file d'attente gérée par le gestionnaire de files d'attente du service.</span><span class="sxs-lookup"><span data-stu-id="7655f-133">When a client sends a message to a queue, it addresses the message to the target queue, which is the queue managed by the service's queue manager.</span></span> <span data-ttu-id="7655f-134">Le gestionnaire de files d'attente sur le client envoie le message à une file d'attente de transmission (ou sortante).</span><span class="sxs-lookup"><span data-stu-id="7655f-134">The queue manager on the client sends the message to a transmission (or outgoing) queue.</span></span> <span data-ttu-id="7655f-135">La file d'attente de transmission est une file d'attente sur le gestionnaire de files d'attente client qui stocke des messages pour la transmission à la file d'attente cible.</span><span class="sxs-lookup"><span data-stu-id="7655f-135">The transmission queue is a queue on the client queue manager that stores messages for transmission to the target queue.</span></span> <span data-ttu-id="7655f-136">Le gestionnaire de files d'attente recherche ensuite un chemin d'accès au gestionnaire de files d'attente qui possède la file d'attente cible et lui transfère le message.</span><span class="sxs-lookup"><span data-stu-id="7655f-136">The queue manager then finds a path to the queue manager that owns the target queue and transfers the message to it.</span></span> <span data-ttu-id="7655f-137">Pour garantir une communication fiable, les gestionnaires de files d'attente implémentent un protocole de transfert fiable pour empêcher la perte de données.</span><span class="sxs-lookup"><span data-stu-id="7655f-137">To ensure reliable communication, the queue managers implement a reliable transfer protocol to prevent data loss.</span></span> <span data-ttu-id="7655f-138">Le gestionnaire de file d'attente de destination accepte les messages adressés aux files d'attente cibles qu'il possède et stocke les messages.</span><span class="sxs-lookup"><span data-stu-id="7655f-138">The destination queue manager accepts messages addressed to the target queues it owns and stores the messages.</span></span> <span data-ttu-id="7655f-139">Le service effectue une demande de lecture de la file d'attente cible ; le gestionnaire de files d'attente remet alors le message à l'application de destination.</span><span class="sxs-lookup"><span data-stu-id="7655f-139">The service makes requests to read from the target queue, at which time the queue manager then delivers the message to the destination application.</span></span> <span data-ttu-id="7655f-140">L'illustration suivante montre la communication entre les quatre correspondants.</span><span class="sxs-lookup"><span data-stu-id="7655f-140">The following illustration shows communication between the four parties.</span></span>  
  
 <span data-ttu-id="7655f-141">![Diagramme d’Application de la file d’attente](../../../../docs/framework/wcf/feature-details/media/distributed-queue-figure.jpg "Figure de file d’attente distribuée")</span><span class="sxs-lookup"><span data-stu-id="7655f-141">![Queued Application Diagram](../../../../docs/framework/wcf/feature-details/media/distributed-queue-figure.jpg "Distributed-Queue-Figure")</span></span>  
  
 <span data-ttu-id="7655f-142">Communication en file d'attente dans un scénario de déploiement typique</span><span class="sxs-lookup"><span data-stu-id="7655f-142">Queued communication in a typical deployment scenario</span></span>  
  
 <span data-ttu-id="7655f-143">Ainsi, le gestionnaire de files d'attente fournit l'isolement nécessaire qui autorise la défaillance possible de l'expéditeur et du récepteur de manière indépendante sans affecter la communication elle-même.</span><span class="sxs-lookup"><span data-stu-id="7655f-143">Thus, the queue manager provides the required isolation so that the sender and receiver can independently fail without affecting actual communication.</span></span> <span data-ttu-id="7655f-144">L'avantage de l'indirection supplémentaire fournie par les files d'attente permet aussi à plusieurs instances d'application de lire la même file d'attente et aux nœuds d'obtenir un débit plus élevé.</span><span class="sxs-lookup"><span data-stu-id="7655f-144">The benefit of extra indirection that queues provide also enables multiple application instances to read from the same queue, so that farming work among the nodes achieves higher throughput.</span></span> <span data-ttu-id="7655f-145">Par conséquent, il n'est pas rare de faire appel aux files d'attente pour répondre à des exigences de débit et d'échelle supérieures.</span><span class="sxs-lookup"><span data-stu-id="7655f-145">Therefore, it is not uncommon to see queues being used to achieve higher scale and throughput requirements.</span></span>  
  
## <a name="queues-and-transactions"></a><span data-ttu-id="7655f-146">Files d'attente et transactions</span><span class="sxs-lookup"><span data-stu-id="7655f-146">Queues and Transactions</span></span>  
 <span data-ttu-id="7655f-147">Les transactions vous permettent de regrouper un jeu d'opérations pour que toutes les opérations échouent si une seule opération échoue.</span><span class="sxs-lookup"><span data-stu-id="7655f-147">Transactions allow you to group a set of operations together so that if one operation fails, all of the operations fail.</span></span> <span data-ttu-id="7655f-148">Un exemple d'utilisation des transactions est lorsqu'une personne utilise un distributeur de billets pour transférer 1 000 € de son compte épargne vers son compte chèques.</span><span class="sxs-lookup"><span data-stu-id="7655f-148">An example of how to use transactions is when a person uses an ATM to transfer $1,000 from his savings account to his checking account.</span></span> <span data-ttu-id="7655f-149">Cela entraîne les opérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="7655f-149">This entails the following operations:</span></span>  
  
-   <span data-ttu-id="7655f-150">Le retrait de 1 000 € du compte épargne.</span><span class="sxs-lookup"><span data-stu-id="7655f-150">Withdrawing $1,000 from the savings account.</span></span>  
  
-   <span data-ttu-id="7655f-151">Le placement de 1 000 € sur le compte chèques.</span><span class="sxs-lookup"><span data-stu-id="7655f-151">Depositing $1,000 into the checking account.</span></span>  
  
 <span data-ttu-id="7655f-152">Si la première opération réussit et que les 1 000 € sont retirés du compte épargne mais que la deuxième opération échoue, les 1 000 € sont perdus parce qu'ils ont déjà été retirés du compte épargne.</span><span class="sxs-lookup"><span data-stu-id="7655f-152">If the first operation succeeds and $1,000 is withdrawn from the savings account but the second operation fails, the $1,000 is lost because it has already been withdrawn from the savings account.</span></span> <span data-ttu-id="7655f-153">Pour garantir la validité des comptes, si une opération échoue, les deux opérations doivent échouer.</span><span class="sxs-lookup"><span data-stu-id="7655f-153">To keep the accounts in a valid state, if one operation fails, both operations must fail.</span></span>  
  
 <span data-ttu-id="7655f-154">En messagerie transactionnelle, les messages peuvent être envoyés à la file d'attente et reçus de la file d'attente sous une transaction.</span><span class="sxs-lookup"><span data-stu-id="7655f-154">In transactional messaging, messages can be sent to the queue and received from the queue under a transaction.</span></span> <span data-ttu-id="7655f-155">Donc, si un message est envoyé dans une transaction et que celle-ci est restaurée, cela revient à n'avoir jamais envoyé le message à la file d'attente.</span><span class="sxs-lookup"><span data-stu-id="7655f-155">Thus, if a message is sent in a transaction and the transaction is rolled back, then the outcome is as if the message had never been sent to the queue.</span></span> <span data-ttu-id="7655f-156">De même, si un message est reçu dans une transaction et que celle-ci est restaurée, cela revient à n'avoir jamais reçu le message.</span><span class="sxs-lookup"><span data-stu-id="7655f-156">Similarly if a message is received in a transaction and the transaction is rolled back, then the outcome is as if the message had never been received.</span></span> <span data-ttu-id="7655f-157">Le message reste dans la file d'attente pour être lu.</span><span class="sxs-lookup"><span data-stu-id="7655f-157">The message remains in the queue to be read.</span></span>  
  
 <span data-ttu-id="7655f-158">En raison d'une latence élevée, lorsque vous envoyez un message, vous ne pouvez pas connaître le temps nécessaire pour que celui-ci atteigne sa file d'attente cible, ni le temps qu'il faudra au service pour le traiter.</span><span class="sxs-lookup"><span data-stu-id="7655f-158">Because of high latency, when you send a message you have no way of knowing how long it takes to reach its target queue, nor do you know how long it takes for the service to process the message.</span></span> <span data-ttu-id="7655f-159">De ce fait, il est souhaitable de ne pas utiliser une transaction unique pour envoyer le message, le recevoir puis le traiter.</span><span class="sxs-lookup"><span data-stu-id="7655f-159">Because of this, you do not want to use a single transaction to send the message, receive the message, and then process the message.</span></span> <span data-ttu-id="7655f-160">Cela crée une transaction qui reste invalidée durant une période indéterminée.</span><span class="sxs-lookup"><span data-stu-id="7655f-160">This creates a transaction that is not committed for an indeterminate amount of time.</span></span> <span data-ttu-id="7655f-161">Lorsqu'un client et un service communiquent par l'intermédiaire d'une file d'attente à l'aide d'une transaction, deux transactions sont impliquées : une sur le client et une sur le service.</span><span class="sxs-lookup"><span data-stu-id="7655f-161">When a client and service communicate through a queue using a transaction, two transactions are involved: one on the client and one on the service.</span></span> <span data-ttu-id="7655f-162">L’illustration suivante montre les limites de la transaction dans une communication en file d’attente standard.</span><span class="sxs-lookup"><span data-stu-id="7655f-162">The following illustration shows the transaction boundaries in typical queued communication.</span></span>  
  
 <span data-ttu-id="7655f-163">![File d’attente avec transactions](../../../../docs/framework/wcf/feature-details/media/qwithtransactions-figure3.gif "QWithTransactions-figure 3")</span><span class="sxs-lookup"><span data-stu-id="7655f-163">![Queue with transactions](../../../../docs/framework/wcf/feature-details/media/qwithtransactions-figure3.gif "QWithTransactions-Figure3")</span></span>  
  
 <span data-ttu-id="7655f-164">La communication en file d’attente affiche des transactions distinctes pour la capture et la remise.</span><span class="sxs-lookup"><span data-stu-id="7655f-164">Queued communication showing separate transactions for capture and delivery</span></span>  
  
 <span data-ttu-id="7655f-165">La transaction cliente traite et envoie le message.</span><span class="sxs-lookup"><span data-stu-id="7655f-165">The client transaction processes and sends the message.</span></span> <span data-ttu-id="7655f-166">Lorsque la transaction est validée, le message est dans la file d'attente de transmission.</span><span class="sxs-lookup"><span data-stu-id="7655f-166">When the transaction is committed, the message is in the transmission queue.</span></span> <span data-ttu-id="7655f-167">Sur le service, la transaction lit le message de la file d'attente cible, traite le message, puis valide la transaction.</span><span class="sxs-lookup"><span data-stu-id="7655f-167">On the service, the transaction reads the message from the target queue, processes the message, and then commits the transaction.</span></span> <span data-ttu-id="7655f-168">Si une erreur se produit pendant le traitement, le message est annulé et placé dans la file d'attente cible.</span><span class="sxs-lookup"><span data-stu-id="7655f-168">If an error occurs during the processing, the message is rolled back and placed in the target queue.</span></span>  
  
## <a name="asynchronous-communication-using-queues"></a><span data-ttu-id="7655f-169">Communication asynchrone à l'aide de files d'attente</span><span class="sxs-lookup"><span data-stu-id="7655f-169">Asynchronous Communication Using Queues</span></span>  
 <span data-ttu-id="7655f-170">Les files d'attente fournissent un moyen asynchrone de communication.</span><span class="sxs-lookup"><span data-stu-id="7655f-170">Queues provide an asynchronous means of communication.</span></span> <span data-ttu-id="7655f-171">Les applications qui envoient des messages à l'aide de files d'attente ne peuvent pas attendre la réception du message et son traitement par le récepteur en raison de la latence élevée que présente le gestionnaire de files d'attente.</span><span class="sxs-lookup"><span data-stu-id="7655f-171">Applications that send messages using queues cannot wait for the message to be received and processed by the receiver because of high latency introduced by the queue manager.</span></span> <span data-ttu-id="7655f-172">Les messages peuvent rester dans la file d'attente pour une durée bien supérieure à celle prévue par l'application.</span><span class="sxs-lookup"><span data-stu-id="7655f-172">Messages can remain in the queue for a far longer time than the application intended.</span></span> <span data-ttu-id="7655f-173">Pour éviter cela, l'application peut spécifier une valeur de durée de vie sur le message.</span><span class="sxs-lookup"><span data-stu-id="7655f-173">To avoid this, the application can specify a Time-To-Live value on the message.</span></span> <span data-ttu-id="7655f-174">Cette valeur spécifie combien de temps le message doit rester dans la file d'attente de transmission.</span><span class="sxs-lookup"><span data-stu-id="7655f-174">This value specifies how long the message should remain in the transmission queue.</span></span> <span data-ttu-id="7655f-175">Si cette valeur de temps est dépassée, et que le message n'a pas encore été envoyé à la file d'attente cible, le message peut être transféré à une file d'attente de lettres mortes.</span><span class="sxs-lookup"><span data-stu-id="7655f-175">If this time value is exceeded, and the message still has not been sent to the target queue, the message can be transferred to a dead-letter queue.</span></span>  
  
 <span data-ttu-id="7655f-176">Lorsque l'expéditeur envoie un message, le retour de l'opération d'envoi implique que le message est parvenu seulement à la file d'attente de transmission sur l'expéditeur.</span><span class="sxs-lookup"><span data-stu-id="7655f-176">When the sender sends a message, the return from the send operation implies that the message only made it to the transmission queue on the sender.</span></span> <span data-ttu-id="7655f-177">Dans ce cas, s'il y a une défaillance dans la remise du message à la file d'attente cible, l'application émettrice ne peut pas le savoir immédiatement.</span><span class="sxs-lookup"><span data-stu-id="7655f-177">As such, if there is a failure in getting the message to the target queue, the sending application cannot know about it immediately.</span></span> <span data-ttu-id="7655f-178">Pour prendre acte de ces défaillances, le message en échec est transféré à une file d'attente de lettres mortes.</span><span class="sxs-lookup"><span data-stu-id="7655f-178">To take note of such failures, the failed message is transferred to a dead-letter queue.</span></span>  
  
 <span data-ttu-id="7655f-179">Toute erreur, par exemple lorsqu'un message ne peut pas atteindre la file d'attente cible ou lors de l'expiration de la durée de vie, doit être traitée séparément.</span><span class="sxs-lookup"><span data-stu-id="7655f-179">Any error, such as a message failing to reach the target queue or the Time-To-Live expiring, must be processed separately.</span></span> <span data-ttu-id="7655f-180">Ainsi, il arrive que les applications en file d'attente écrivent deux jeux de logique :</span><span class="sxs-lookup"><span data-stu-id="7655f-180">It is not uncommon, therefore, for queued applications to write two sets of logic:</span></span>  
  
-   <span data-ttu-id="7655f-181">La logique normale du client et du service relative à l'envoi et à la réception des messages.</span><span class="sxs-lookup"><span data-stu-id="7655f-181">The normal client and service logic of sending and receiving messages.</span></span>  
  
-   <span data-ttu-id="7655f-182">La logique de compensation chargée de gérer les messages issus de la transmission ou de la remise ayant échoué.</span><span class="sxs-lookup"><span data-stu-id="7655f-182">Compensation logic to handle messages from the failed transmission or delivery.</span></span>  
  
 <span data-ttu-id="7655f-183">Les sections suivantes traitent de ces concepts.</span><span class="sxs-lookup"><span data-stu-id="7655f-183">The following sections discuss these concepts.</span></span>  
  
## <a name="dead-letter-queue-programming"></a><span data-ttu-id="7655f-184">Programmation de la file d'attente de lettres mortes.</span><span class="sxs-lookup"><span data-stu-id="7655f-184">Dead-Letter Queue Programming</span></span>  
 <span data-ttu-id="7655f-185">Les files d'attente de lettres mortes contiennent des messages qui ne sont pas parvenus à la file d'attente cible pour différentes raisons.</span><span class="sxs-lookup"><span data-stu-id="7655f-185">Dead-letter queues contain messages that failed to reach the target queue for various reasons.</span></span> <span data-ttu-id="7655f-186">Les raisons peuvent porter sur des messages arrivés à expiration et des problèmes de connectivité qui empêchent le transfert du message vers la file d'attente cible.</span><span class="sxs-lookup"><span data-stu-id="7655f-186">The reasons can range from expired messages to connectivity issues preventing transfer of the message to the target queue.</span></span>  
  
 <span data-ttu-id="7655f-187">En général, une application peut lire des messages dans une file d'attente de lettres mortes à l'échelle du système, déterminer le mauvais fonctionnement et prendre les mesures appropriées, telles que corriger les erreurs et renvoyer le message ou en prendre note.</span><span class="sxs-lookup"><span data-stu-id="7655f-187">Typically, an application can read messages from a system-wide dead-letter queue, determine what went wrong, and take appropriate action, such as correcting the errors and resending the message or taking note of it.</span></span>  
  
## <a name="poison-message-queue-programming"></a><span data-ttu-id="7655f-188">Programmation de la file d'attente du message incohérent</span><span class="sxs-lookup"><span data-stu-id="7655f-188">Poison Message Queue Programming</span></span>  
 <span data-ttu-id="7655f-189">Une fois qu'un message parvient dans la file d'attente cible, son traitement par le service peut faire l'objet de plusieurs échecs.</span><span class="sxs-lookup"><span data-stu-id="7655f-189">After a message makes it to the target queue, the service may repeatedly fail to process the message.</span></span> <span data-ttu-id="7655f-190">Par exemple, une application qui lit un message de la file d'attente sous une transaction et met à jour une base de données peut être confronté à une déconnexion temporaire de la base de données.</span><span class="sxs-lookup"><span data-stu-id="7655f-190">For example, an application reading a message from the queue under a transaction and updating a database may find the database temporarily disconnected.</span></span> <span data-ttu-id="7655f-191">Dans ce cas, la transaction est restaurée, une nouvelle transaction est créée et le message est relu dans la file d'attente.</span><span class="sxs-lookup"><span data-stu-id="7655f-191">In this case, the transaction is rolled back, a new transaction is created, and the message is reread from the queue.</span></span> <span data-ttu-id="7655f-192">Une deuxième tentative peut réussir ou échouer.</span><span class="sxs-lookup"><span data-stu-id="7655f-192">A second attempt may succeed or fail.</span></span> <span data-ttu-id="7655f-193">Dans certains cas, selon la cause de l'erreur, la remise du message à l'application peut connaître plusieurs échecs.</span><span class="sxs-lookup"><span data-stu-id="7655f-193">In some cases, depending on the cause of the error, the message may repeatedly fail delivery to the application.</span></span> <span data-ttu-id="7655f-194">Dans ce cas, le message est considéré comme « incohérent ».</span><span class="sxs-lookup"><span data-stu-id="7655f-194">In this case, the message is deemed as "poison."</span></span> <span data-ttu-id="7655f-195">Ces messages sont déplacés vers une file d'attente de messages incohérents pour être lus par une application chargée de traiter les messages incohérents.</span><span class="sxs-lookup"><span data-stu-id="7655f-195">Such messages are moved to a poison queue that can be read by a poison-handling application.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="7655f-196">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="7655f-196">See Also</span></span>  
 [<span data-ttu-id="7655f-197">Queuing dans WCF</span><span class="sxs-lookup"><span data-stu-id="7655f-197">Queuing in WCF</span></span>](../../../../docs/framework/wcf/feature-details/queuing-in-wcf.md)  
 [<span data-ttu-id="7655f-198">Queuing dans WCF</span><span class="sxs-lookup"><span data-stu-id="7655f-198">Queuing in WCF</span></span>](../../../../docs/framework/wcf/feature-details/queuing-in-wcf.md)  
 [<span data-ttu-id="7655f-199">Files d’attente et sessions</span><span class="sxs-lookup"><span data-stu-id="7655f-199">Sessions and Queues</span></span>](../../../../docs/framework/wcf/samples/sessions-and-queues.md)  
 [<span data-ttu-id="7655f-200">Files d’attente de lettres mortes</span><span class="sxs-lookup"><span data-stu-id="7655f-200">Dead Letter Queues</span></span>](../../../../docs/framework/wcf/samples/dead-letter-queues.md)  
 [<span data-ttu-id="7655f-201">Volatile en file d’attente de Communication</span><span class="sxs-lookup"><span data-stu-id="7655f-201">Volatile Queued Communication</span></span>](../../../../docs/framework/wcf/samples/volatile-queued-communication.md)  
 [<span data-ttu-id="7655f-202">Windows Communication Foundation à Message Queuing</span><span class="sxs-lookup"><span data-stu-id="7655f-202">Windows Communication Foundation to Message Queuing</span></span>](../../../../docs/framework/wcf/samples/wcf-to-message-queuing.md)  
 [<span data-ttu-id="7655f-203">Installation de Message Queuing (MSMQ)</span><span class="sxs-lookup"><span data-stu-id="7655f-203">Installing Message Queuing (MSMQ)</span></span>](../../../../docs/framework/wcf/samples/installing-message-queuing-msmq.md)  
 [<span data-ttu-id="7655f-204">Exemples de Message Queuing liaison d’intégration</span><span class="sxs-lookup"><span data-stu-id="7655f-204">Message Queuing Integration Binding Samples</span></span>](http://msdn.microsoft.com/en-us/997d11cb-f2c5-4ba0-9209-92843d4d0e1a)  
 [<span data-ttu-id="7655f-205">Message Queuing à Windows Communication Foundation</span><span class="sxs-lookup"><span data-stu-id="7655f-205">Message Queuing to Windows Communication Foundation</span></span>](../../../../docs/framework/wcf/samples/message-queuing-to-wcf.md)  
 [<span data-ttu-id="7655f-206">Sécurité de message sur Message Queuing</span><span class="sxs-lookup"><span data-stu-id="7655f-206">Message Security over Message Queuing</span></span>](../../../../docs/framework/wcf/samples/message-security-over-message-queuing.md)
