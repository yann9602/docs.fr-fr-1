---
title: "Utilisation de l'emprunt d'identité avec la sécurité de transport"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: 426df8cb-6337-4262-b2c0-b96c2edf21a9
caps.latest.revision: "12"
author: BrucePerlerMS
ms.author: bruceper
manager: mbaldwin
ms.openlocfilehash: 906d45ccba7185e82aed82626a13034f2e97422d
ms.sourcegitcommit: 4f3fef493080a43e70e951223894768d36ce430a
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/21/2017
---
# <a name="using-impersonation-with-transport-security"></a><span data-ttu-id="d7b9d-102">Utilisation de l'emprunt d'identité avec la sécurité de transport</span><span class="sxs-lookup"><span data-stu-id="d7b9d-102">Using Impersonation with Transport Security</span></span>
<span data-ttu-id="d7b9d-103">*L’emprunt d’identité* désigne la capacité d’une application serveur pour prendre l’identité du client.</span><span class="sxs-lookup"><span data-stu-id="d7b9d-103">*Impersonation* is the ability of a server application to take on the identity of the client.</span></span> <span data-ttu-id="d7b9d-104">Les services utilisent couramment l'emprunt d'identité lors de la validation de l'accès aux ressources.</span><span class="sxs-lookup"><span data-stu-id="d7b9d-104">It is common for services to use impersonation when validating access to resources.</span></span> <span data-ttu-id="d7b9d-105">L'application serveur s'exécute à l'aide d'un compte de service, mais lorsque le serveur accepte une connexion cliente, il emprunte l'identité du client afin d'exécuter des contrôles d'accès à l'aide des informations d'identification du client.</span><span class="sxs-lookup"><span data-stu-id="d7b9d-105">The server application runs using a service account, but when the server accepts a client connection, it impersonates the client so that access checks are performed using the client's credentials.</span></span> <span data-ttu-id="d7b9d-106">La sécurité de transport est un mécanisme permettant à la fois de passer des informations d'identification et sécuriser les communications à l'aide de ces informations.</span><span class="sxs-lookup"><span data-stu-id="d7b9d-106">Transport security is a mechanism both for passing credentials and securing communication using those credentials.</span></span> <span data-ttu-id="d7b9d-107">Cette rubrique décrit l'utilisation de la sécurité de transport dans [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] avec la fonctionnalité d'emprunt d'identité.</span><span class="sxs-lookup"><span data-stu-id="d7b9d-107">This topic describes using transport security in [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)] with the impersonation feature.</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="d7b9d-108">l’emprunt d’identité à l’aide de la sécurité des messages, consultez [délégation et emprunt d’identité](../../../../docs/framework/wcf/feature-details/delegation-and-impersonation-with-wcf.md).</span><span class="sxs-lookup"><span data-stu-id="d7b9d-108"> impersonation using message security, see [Delegation and Impersonation](../../../../docs/framework/wcf/feature-details/delegation-and-impersonation-with-wcf.md).</span></span>  
  
## <a name="five-impersonation-levels"></a><span data-ttu-id="d7b9d-109">Les cinq niveaux d'emprunt d'identité</span><span class="sxs-lookup"><span data-stu-id="d7b9d-109">Five Impersonation Levels</span></span>  
 <span data-ttu-id="d7b9d-110">La sécurité de transport utilise cinq niveaux d'emprunt d'identité, comme le décrit le tableau suivant.</span><span class="sxs-lookup"><span data-stu-id="d7b9d-110">Transport security makes use of five levels of impersonation, as described in the following table.</span></span>  
  
|<span data-ttu-id="d7b9d-111">Niveau d'emprunt d'identité</span><span class="sxs-lookup"><span data-stu-id="d7b9d-111">Impersonation level</span></span>|<span data-ttu-id="d7b9d-112">Description</span><span class="sxs-lookup"><span data-stu-id="d7b9d-112">Description</span></span>|  
|-------------------------|-----------------|  
|<span data-ttu-id="d7b9d-113">None</span><span class="sxs-lookup"><span data-stu-id="d7b9d-113">None</span></span>|<span data-ttu-id="d7b9d-114">L'application serveur n'essaie pas d'emprunter l'identité du client.</span><span class="sxs-lookup"><span data-stu-id="d7b9d-114">The server application does not attempt to impersonate the client.</span></span>|  
|<span data-ttu-id="d7b9d-115">Anonymous</span><span class="sxs-lookup"><span data-stu-id="d7b9d-115">Anonymous</span></span>|<span data-ttu-id="d7b9d-116">L'application serveur peut exécuter les contrôles d'accès à partir des informations d'identification du client, mais ne reçoit pas d'informations à propos de l'identité du client.</span><span class="sxs-lookup"><span data-stu-id="d7b9d-116">The server application can perform access checks against the client's credentials, but does not receive any information about the client's identity.</span></span> <span data-ttu-id="d7b9d-117">Ce niveau d'emprunt d'identité n'est utile que pour les communications sur ordinateur, telles que les canaux nommés.</span><span class="sxs-lookup"><span data-stu-id="d7b9d-117">This impersonation level is meaningful only for on-machine communication, such as named pipes.</span></span> <span data-ttu-id="d7b9d-118">L'utilisation de `Anonymous` avec une connexion à distance fait passer le niveau d'emprunt d'identité à Identifier.</span><span class="sxs-lookup"><span data-stu-id="d7b9d-118">Using `Anonymous` with a remote connection promotes the impersonation level to Identify.</span></span>|  
|<span data-ttu-id="d7b9d-119">Identifier</span><span class="sxs-lookup"><span data-stu-id="d7b9d-119">Identify</span></span>|<span data-ttu-id="d7b9d-120">L'application serveur connaît l'identité du client et peut exécuter les contrôles d'accès à partir des informations d'identification du client, mais ne peut pas emprunter l'identité du client.</span><span class="sxs-lookup"><span data-stu-id="d7b9d-120">The server application knows the client's identity and can perform access validation against the client's credentials, but cannot impersonate the client.</span></span> <span data-ttu-id="d7b9d-121">Le niveau Identifier est le niveau d'emprunt d'identité par défaut utilisé avec les informations d'identification SSPI dans [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] à moins que le fournisseur de jetons ne propose un niveau d'emprunt d'identité différent.</span><span class="sxs-lookup"><span data-stu-id="d7b9d-121">Identify is the default impersonation level used with SSPI credentials in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] unless the token provider provides a different impersonation level.</span></span>|  
|<span data-ttu-id="d7b9d-122">Impersonate</span><span class="sxs-lookup"><span data-stu-id="d7b9d-122">Impersonate</span></span>|<span data-ttu-id="d7b9d-123">L'application serveur peut accéder aux ressources de l'ordinateur serveur en tant que client en plus d'exécuter des contrôles d'accès.</span><span class="sxs-lookup"><span data-stu-id="d7b9d-123">The server application can access resources on the server machine as the client in addition to performing access checks.</span></span> <span data-ttu-id="d7b9d-124">L'application serveur ne peut pas accéder aux ressources des ordinateurs distants à l'aide de l'identité du client parce que le jeton personnifié ne possède pas d'informations d'identification réseau.</span><span class="sxs-lookup"><span data-stu-id="d7b9d-124">The server application cannot access resources on remote machines using the client's identity because the impersonated token does not have network credentials</span></span>|  
|<span data-ttu-id="d7b9d-125">Délégué</span><span class="sxs-lookup"><span data-stu-id="d7b9d-125">Delegate</span></span>|<span data-ttu-id="d7b9d-126">En plus d'avoir les mêmes fonctions que le niveau `Impersonate`, le niveau d'emprunt d'identité Déléguer permet également à l'application serveur d'accéder aux ressources des ordinateurs distants à l'aide de l'identité du client et de passer l'identité à d'autres applications.</span><span class="sxs-lookup"><span data-stu-id="d7b9d-126">In addition to having the same capabilities as `Impersonate`, the Delegate impersonation level also enables the server application to access resources on remote machines using the client's identity and to pass the identity to other applications.</span></span><br /><br /> <span data-ttu-id="d7b9d-127">**Important** le compte de domaine de serveur doit être marqué comme approuvé pour la délégation sur le contrôleur de domaine pour utiliser ces fonctionnalités supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="d7b9d-127">**Important** The server domain account must be marked as trusted for delegation on the domain controller to use these additional features.</span></span> <span data-ttu-id="d7b9d-128">Ce niveau d'emprunt d'identité ne peut pas être utilisé avec les comptes de domaine du client marqués comme sensibles.</span><span class="sxs-lookup"><span data-stu-id="d7b9d-128">This level of impersonation cannot be used with client domain accounts marked as sensitive.</span></span>|  
  
 <span data-ttu-id="d7b9d-129">Les niveaux de couramment utilisés avec la sécurité de transport sont `Identify` et `Impersonate`.</span><span class="sxs-lookup"><span data-stu-id="d7b9d-129">The levels most commonly used with transport security are `Identify` and `Impersonate`.</span></span> <span data-ttu-id="d7b9d-130">Le niveaux `None` et `Anonymous` ne sont pas recommandés pour une utilisation par défaut, car de nombreux transports ne prennent pas en charge l'authentification avec ces niveaux.</span><span class="sxs-lookup"><span data-stu-id="d7b9d-130">The levels `None` and `Anonymous` are not recommended for typical use, and many transports do not support using those levels with authentication.</span></span> <span data-ttu-id="d7b9d-131">Le niveau `Delegate` est une fonctionnalité puissante qui doit être utilisée avec prudence.</span><span class="sxs-lookup"><span data-stu-id="d7b9d-131">The `Delegate` level is a powerful feature that should be used with care.</span></span> <span data-ttu-id="d7b9d-132">Seules les applications serveur approuvées doivent avoir l'autorisation de déléguer des informations d'identification.</span><span class="sxs-lookup"><span data-stu-id="d7b9d-132">Only trusted server applications should be given the permission to delegate credentials.</span></span>  
  
 <span data-ttu-id="d7b9d-133">L'utilisation de l'emprunt d'identité avec les niveaux `Impersonate` ou `Delegate` nécessite que l'application serveur ait le privilège `SeImpersonatePrivilege`.</span><span class="sxs-lookup"><span data-stu-id="d7b9d-133">Using impersonation at the `Impersonate` or `Delegate` levels requires the server application to have the `SeImpersonatePrivilege` privilege.</span></span> <span data-ttu-id="d7b9d-134">Une application a ce privilège par défaut si elle s'exécute sur un compte du groupe Administrateurs ou sur un compte avec un service SID (service réseau, service local ou système local).</span><span class="sxs-lookup"><span data-stu-id="d7b9d-134">An application has this privilege by default if it is running on an account in the Administrators group or on an account with a Service SID (Network Service, Local Service, or Local System).</span></span> <span data-ttu-id="d7b9d-135">L'emprunt d'identité ne requiert pas l'authentification mutuelle du client et du serveur.</span><span class="sxs-lookup"><span data-stu-id="d7b9d-135">Impersonation does not require mutual authentication of the client and server.</span></span> <span data-ttu-id="d7b9d-136">Certains schémas d'authentification qui prennent en charge l'emprunt d'identité, tels que NTLM, ne peuvent pas être utilisés avec l'authentification mutuelle.</span><span class="sxs-lookup"><span data-stu-id="d7b9d-136">Some authentication schemes that support impersonation, such as NTLM, cannot be used with mutual authentication.</span></span>  
  
## <a name="transport-specific-issues-with-impersonation"></a><span data-ttu-id="d7b9d-137">Problèmes spécifiques au transport avec l'emprunt d'identité</span><span class="sxs-lookup"><span data-stu-id="d7b9d-137">Transport-Specific Issues with Impersonation</span></span>  
 <span data-ttu-id="d7b9d-138">Le choix d'un transport dans [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] affecte les choix possibles pour l'emprunt d'identité.</span><span class="sxs-lookup"><span data-stu-id="d7b9d-138">The choice of a transport in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] affects the possible choices for impersonation.</span></span> <span data-ttu-id="d7b9d-139">Cette section décrit les problèmes qui affectent le HTTP standard et les transport de canal nommé dans [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span><span class="sxs-lookup"><span data-stu-id="d7b9d-139">This section describes issues affecting the standard HTTP and named pipe transports in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)].</span></span> <span data-ttu-id="d7b9d-140">Les transports personnalisés ont leurs propres restrictions quant à la prise en charge de l'emprunt d'identité.</span><span class="sxs-lookup"><span data-stu-id="d7b9d-140">Custom transports have their own restrictions on support for impersonation.</span></span>  
  
### <a name="named-pipe-transport"></a><span data-ttu-id="d7b9d-141">Transport de canal nommé</span><span class="sxs-lookup"><span data-stu-id="d7b9d-141">Named Pipe Transport</span></span>  
 <span data-ttu-id="d7b9d-142">Les éléments suivants sont utilisés avec le transport de canal nommé :</span><span class="sxs-lookup"><span data-stu-id="d7b9d-142">The following items are used with the named pipe transport:</span></span>  
  
-   <span data-ttu-id="d7b9d-143">Le transport de canal nommé est prévu uniquement pour une utilisation sur l'ordinateur local.</span><span class="sxs-lookup"><span data-stu-id="d7b9d-143">The named pipe transport is intended for use only on the local machine.</span></span> <span data-ttu-id="d7b9d-144">Le transport de canal nommé dans [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] rejette explicitement les connexions d'ordinateur à ordinateur.</span><span class="sxs-lookup"><span data-stu-id="d7b9d-144">The named pipe transport in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] explicitly disallows cross-machine connections.</span></span>  
  
-   <span data-ttu-id="d7b9d-145">Les canaux nommés ne peuvent pas être utilisés avec les niveaux d'emprunt d'identité `Impersonate` ou `Delegate`.</span><span class="sxs-lookup"><span data-stu-id="d7b9d-145">Named pipes cannot be used with the `Impersonate` or `Delegate` impersonation level.</span></span> <span data-ttu-id="d7b9d-146">Le canal nommé ne peut pas mettre en vigueur la garantie sur ordinateur à ces niveaux d'emprunt d'identité.</span><span class="sxs-lookup"><span data-stu-id="d7b9d-146">The named pipe cannot enforce the on-machine guarantee at these impersonation levels.</span></span>  
  
 [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="d7b9d-147">canaux nommés, consultez [choisir un Transport](../../../../docs/framework/wcf/feature-details/choosing-a-transport.md).</span><span class="sxs-lookup"><span data-stu-id="d7b9d-147"> named pipes, see [Choosing a Transport](../../../../docs/framework/wcf/feature-details/choosing-a-transport.md).</span></span>  
  
### <a name="http-transport"></a><span data-ttu-id="d7b9d-148">Transport HTTP</span><span class="sxs-lookup"><span data-stu-id="d7b9d-148">HTTP Transport</span></span>  
 <span data-ttu-id="d7b9d-149">Les liaisons qui utilisent le transport HTTP (<xref:System.ServiceModel.WSHttpBinding> et <xref:System.ServiceModel.BasicHttpBinding>) prend en charge plusieurs schémas d’authentification, comme expliqué dans [compréhension de l’authentification HTTP](../../../../docs/framework/wcf/feature-details/understanding-http-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="d7b9d-149">The bindings that use the HTTP transport (<xref:System.ServiceModel.WSHttpBinding> and <xref:System.ServiceModel.BasicHttpBinding>) support several authentication schemes, as explained in [Understanding HTTP Authentication](../../../../docs/framework/wcf/feature-details/understanding-http-authentication.md).</span></span> <span data-ttu-id="d7b9d-150">Le niveau d'emprunt d'identité pris en charge dépend du schéma d'authentification.</span><span class="sxs-lookup"><span data-stu-id="d7b9d-150">The impersonation level supported depends on the authentication scheme.</span></span> <span data-ttu-id="d7b9d-151">Les éléments suivants sont utilisés avec le transport http :</span><span class="sxs-lookup"><span data-stu-id="d7b9d-151">The following items are used with the HTTP transport:</span></span>  
  
-   <span data-ttu-id="d7b9d-152">Le schéma d'authentification `Anonymous` ignore l'emprunt d'identité.</span><span class="sxs-lookup"><span data-stu-id="d7b9d-152">The `Anonymous` authentication scheme ignores impersonation.</span></span>  
  
-   <span data-ttu-id="d7b9d-153">Le `Basic` schéma d’authentification prend en charge uniquement la `Delegate` niveau.</span><span class="sxs-lookup"><span data-stu-id="d7b9d-153">The `Basic` authentication scheme supports only the `Delegate` level.</span></span> <span data-ttu-id="d7b9d-154">Tous les niveaux d'emprunt d'identité inférieurs sont mis à niveau.</span><span class="sxs-lookup"><span data-stu-id="d7b9d-154">All lower impersonation levels are upgraded.</span></span>  
  
-   <span data-ttu-id="d7b9d-155">Le schéma d'authentification `Digest` prend uniquement en charge les niveaux `Impersonate` et `Delegate`.</span><span class="sxs-lookup"><span data-stu-id="d7b9d-155">The `Digest` authentication scheme supports only the `Impersonate` and `Delegate` levels.</span></span>  
  
-   <span data-ttu-id="d7b9d-156">Le schéma d'authentification `NTLM`, sélectionnable soit directement, soit par négociation, prend uniquement en charge le niveau `Delegate` sur l'ordinateur local.</span><span class="sxs-lookup"><span data-stu-id="d7b9d-156">The `NTLM` authentication scheme, selectable either directly or through negotiation, supports only the `Delegate` level on the local machine.</span></span>  
  
-   <span data-ttu-id="d7b9d-157">Le schéma d'authentification Kerberos, qui ne peut être sélectionné que par négociation, peut être utilisé avec tout niveau d'emprunt d'identité pris en charge.</span><span class="sxs-lookup"><span data-stu-id="d7b9d-157">The Kerberos authentication scheme, which can only be selected through negotiation, can be used with any supported impersonation level.</span></span>  
  
 [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="d7b9d-158">le transport HTTP, consultez [choisir un Transport](../../../../docs/framework/wcf/feature-details/choosing-a-transport.md).</span><span class="sxs-lookup"><span data-stu-id="d7b9d-158"> the HTTP transport, see [Choosing a Transport](../../../../docs/framework/wcf/feature-details/choosing-a-transport.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d7b9d-159">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="d7b9d-159">See Also</span></span>  
 [<span data-ttu-id="d7b9d-160">Délégation et emprunt d’identité</span><span class="sxs-lookup"><span data-stu-id="d7b9d-160">Delegation and Impersonation</span></span>](../../../../docs/framework/wcf/feature-details/delegation-and-impersonation-with-wcf.md)  
 [<span data-ttu-id="d7b9d-161">Autorisation</span><span class="sxs-lookup"><span data-stu-id="d7b9d-161">Authorization</span></span>](../../../../docs/framework/wcf/feature-details/authorization-in-wcf.md)  
 [<span data-ttu-id="d7b9d-162">Guide pratique pour emprunter l’identité d’un client sur un service</span><span class="sxs-lookup"><span data-stu-id="d7b9d-162">How to: Impersonate a Client on a Service</span></span>](../../../../docs/framework/wcf/how-to-impersonate-a-client-on-a-service.md)  
 [<span data-ttu-id="d7b9d-163">Présentation de l’authentification HTTP</span><span class="sxs-lookup"><span data-stu-id="d7b9d-163">Understanding HTTP Authentication</span></span>](../../../../docs/framework/wcf/feature-details/understanding-http-authentication.md)
