---
title: "Considérations sur la sécurité des métadonnées"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
ms.assetid: e78ef8ab-4f63-4656-ab93-b1deab2666d5
caps.latest.revision: "10"
author: BrucePerlerMS
ms.author: bruceper
manager: mbaldwin
ms.workload: dotnet
ms.openlocfilehash: 098b31e479322d9de3a299f06652e819a5388c42
ms.sourcegitcommit: 16186c34a957fdd52e5db7294f291f7530ac9d24
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 12/22/2017
---
# <a name="security-considerations-with-metadata"></a><span data-ttu-id="ec8a1-102">Considérations sur la sécurité des métadonnées</span><span class="sxs-lookup"><span data-stu-id="ec8a1-102">Security Considerations with Metadata</span></span>
<span data-ttu-id="ec8a1-103">Lorsque vous utilisez des fonctionnalités de métadonnées dans [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)], vous devez tenir compte des conséquences liées à la publication, la récupération et l'utilisation de métadonnées de service en termes de sécurité.</span><span class="sxs-lookup"><span data-stu-id="ec8a1-103">When using the metadata features in [!INCLUDE[indigo1](../../../../includes/indigo1-md.md)], consider the security implications of publishing, retrieving, and using service metadata.</span></span>  
  
## <a name="when-to-publish-metadata"></a><span data-ttu-id="ec8a1-104">Quand publier des métadonnées</span><span class="sxs-lookup"><span data-stu-id="ec8a1-104">When to Publish Metadata</span></span>  
 <span data-ttu-id="ec8a1-105">Les services [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] ne publient pas de métadonnées par défaut.</span><span class="sxs-lookup"><span data-stu-id="ec8a1-105">[!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] services do not publish metadata by default.</span></span> <span data-ttu-id="ec8a1-106">Pour publier les métadonnées pour un [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service, vous devez explicitement activer la publication des métadonnées en ajoutant des points de terminaison de métadonnées à votre service (consultez [publication des métadonnées](../../../../docs/framework/wcf/feature-details/publishing-metadata.md)).</span><span class="sxs-lookup"><span data-stu-id="ec8a1-106">To publish metadata for a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service you must explicitly enable metadata publishing by adding metadata endpoints to your service (see [Publishing Metadata](../../../../docs/framework/wcf/feature-details/publishing-metadata.md)).</span></span> <span data-ttu-id="ec8a1-107">Désactiver la publication de métadonnées permet de réduire la surface d'attaque de votre service et limiter le risque de divulgation d'informations involontaire.</span><span class="sxs-lookup"><span data-stu-id="ec8a1-107">Leaving metadata publishing disabled reduces the attack surface for your service and lowers the risk of unintentional information disclosure.</span></span> <span data-ttu-id="ec8a1-108">Tous les services ne sont pas tenus de publier des métadonnées.</span><span class="sxs-lookup"><span data-stu-id="ec8a1-108">Not all services must publish metadata.</span></span> <span data-ttu-id="ec8a1-109">Si vous n'avez pas besoin de publier de métadonnées, laissez cette fonctionnalité désactivée.</span><span class="sxs-lookup"><span data-stu-id="ec8a1-109">If you do not have to publish metadata, consider leaving it turned off.</span></span> <span data-ttu-id="ec8a1-110">Notez que vous pouvez toujours générer des métadonnées et du code client directement à partir de vos assemblys de service à l’aide de la [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md).</span><span class="sxs-lookup"><span data-stu-id="ec8a1-110">Note that you can still generate metadata and client code directly from your service assemblies using the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md).</span></span> [!INCLUDE[crabout](../../../../includes/crabout-md.md)]<span data-ttu-id="ec8a1-111">à l’aide de Svcutil.exe pour exporter les métadonnées, consultez [Comment : utiliser Svcutil.exe pour exporter les métadonnées à partir de Code de Service compilé](../../../../docs/framework/wcf/feature-details/how-to-use-svcutil-exe-to-export-metadata-from-compiled-service-code.md).</span><span class="sxs-lookup"><span data-stu-id="ec8a1-111"> using Svcutil.exe to export metadata, see [How to: Use Svcutil.exe to Export Metadata from Compiled Service Code](../../../../docs/framework/wcf/feature-details/how-to-use-svcutil-exe-to-export-metadata-from-compiled-service-code.md).</span></span>  
  
## <a name="publishing-metadata-using-a-secure-binding"></a><span data-ttu-id="ec8a1-112">Publication de métadonnées à l’aide d’une liaison sécurisée</span><span class="sxs-lookup"><span data-stu-id="ec8a1-112">Publishing Metadata Using a Secure Binding</span></span>  
 <span data-ttu-id="ec8a1-113">Les liaisons de métadonnées par défaut fournies par [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] ne sont pas sécurisées et elles autorisent l'accès anonyme aux métadonnées.</span><span class="sxs-lookup"><span data-stu-id="ec8a1-113">The default metadata bindings that [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] provides are not secure and they allow anonymous access to the metadata.</span></span> <span data-ttu-id="ec8a1-114">Les métadonnées de service publiées par un service [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] contiennent une description détaillée du service et peuvent, de manière intentionnelle ou non intentionnelle, contenir des informations sensibles.</span><span class="sxs-lookup"><span data-stu-id="ec8a1-114">The service metadata that a [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] service publishes contains a detailed description about the service and may intentionally or unintentionally contain sensitive information.</span></span> <span data-ttu-id="ec8a1-115">Par exemple, des métadonnées de service peuvent contenir des informations sur des opérations d'infrastructure qui n'étaient pas destinées à être diffusées publiquement.</span><span class="sxs-lookup"><span data-stu-id="ec8a1-115">For example, service metadata may contain information about infrastructure operations that was not intended to be broadcast publicly.</span></span> <span data-ttu-id="ec8a1-116">Pour protéger des métadonnées de service contre les accès non autorisés, vous pouvez recourir à une liaison sécurisée pour le point de terminaison des métadonnées.</span><span class="sxs-lookup"><span data-stu-id="ec8a1-116">To protect service metadata from unauthorized access, you can use a secure binding for your metadata endpoint.</span></span> <span data-ttu-id="ec8a1-117">Les points de terminaison de métadonnées répondent à des demandes HTTP/GET qui peuvent utiliser le protocole SSL (Secure Sockets Layer) pour sécuriser les métadonnées.</span><span class="sxs-lookup"><span data-stu-id="ec8a1-117">Metadata endpoints respond to HTTP/GET requests that can use Secure Sockets Layer (SSL) to secure the metadata.</span></span> [!INCLUDE[crdefault](../../../../includes/crdefault-md.md)]<span data-ttu-id="ec8a1-118">[Comment : sécuriser des points de terminaison de métadonnées](../../../../docs/framework/wcf/feature-details/how-to-secure-metadata-endpoints.md).</span><span class="sxs-lookup"><span data-stu-id="ec8a1-118"> [How to: Secure Metadata Endpoints](../../../../docs/framework/wcf/feature-details/how-to-secure-metadata-endpoints.md).</span></span>  
  
 <span data-ttu-id="ec8a1-119">La sécurisation des points de terminaison de métadonnées permet aussi de fournir aux demandeurs un moyen de récupérer en toute sécurité les métadonnées de service sans risque de falsification ou d'usurpation.</span><span class="sxs-lookup"><span data-stu-id="ec8a1-119">Securing your metadata endpoints also provides a way for requesters to securely retrieve service metadata without the risk of tampering or spoofing.</span></span>  
  
## <a name="using-only-trusted-metadata"></a><span data-ttu-id="ec8a1-120">Utilisation de métadonnées approuvées uniquement</span><span class="sxs-lookup"><span data-stu-id="ec8a1-120">Using Only Trusted Metadata</span></span>  
 <span data-ttu-id="ec8a1-121">Les métadonnées de service permettent de construire automatiquement les composants d'exécution requis pour appeler le service.</span><span class="sxs-lookup"><span data-stu-id="ec8a1-121">You can use service metadata to automatically construct the run-time components required to call the service.</span></span> <span data-ttu-id="ec8a1-122">Vous pouvez également utiliser des métadonnées au moment du design, pour développer une application cliente, ou au moment de l'exécution, pour mettre à jour de manière dynamique la liaison qu'un client utilise pour appeler un service.</span><span class="sxs-lookup"><span data-stu-id="ec8a1-122">You can also use metadata at design time to develop a client application or at runtime to dynamically update the binding a client uses to call a service.</span></span>  
  
 <span data-ttu-id="ec8a1-123">Les métadonnées de service peuvent être falsifiées ou usurpées lorsqu'elles sont récupérées de façon non sécurisée.</span><span class="sxs-lookup"><span data-stu-id="ec8a1-123">Service metadata can be tampered with or spoofed when retrieved in an insecure manner.</span></span> <span data-ttu-id="ec8a1-124">Des métadonnées falsifiées sont susceptibles de rediriger votre client vers un service malveillant ou de contenir des paramètres de sécurité compromis ou des structures XML nuisibles.</span><span class="sxs-lookup"><span data-stu-id="ec8a1-124">Tampered metadata can redirect your client to a malicious service, contain compromised security settings, or contain malicious XML structures.</span></span> <span data-ttu-id="ec8a1-125">Les documents de métadonnées peuvent être volumineux et sont souvent enregistrés dans le système de fichiers.</span><span class="sxs-lookup"><span data-stu-id="ec8a1-125">Metadata documents can be large and are frequently saved to the file system.</span></span> <span data-ttu-id="ec8a1-126">Pour vous protéger contre la falsification et l'usurpation de données, utilisez une liaison sécurisée pour demander des métadonnées de service, lorsque ce type de liaison est disponible.</span><span class="sxs-lookup"><span data-stu-id="ec8a1-126">To protect against tampering and spoofing, use a secure binding to request service metadata when one is available.</span></span>  
  
## <a name="using-safe-techniques-for-processing-metadata"></a><span data-ttu-id="ec8a1-127">Utilisation de techniques éprouvées pour traiter les métadonnées</span><span class="sxs-lookup"><span data-stu-id="ec8a1-127">Using Safe Techniques for Processing Metadata</span></span>  
 <span data-ttu-id="ec8a1-128">Les métadonnées de service sont souvent récupérées d'un service situé sur un réseau à l'aide de protocoles standardisés, tels que WS-MetadataExchange (MEX).</span><span class="sxs-lookup"><span data-stu-id="ec8a1-128">Service metadata is frequently retrieved from a service over a network using standardized protocols such as WS-MetadataExchange (MEX).</span></span> <span data-ttu-id="ec8a1-129">De nombreux formats de métadonnées incluent des mécanismes de référencement pour pointer vers des métadonnées supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="ec8a1-129">Many metadata formats include referencing mechanisms for pointing to additional metadata.</span></span> <span data-ttu-id="ec8a1-130">Le type <xref:System.ServiceModel.Description.MetadataExchangeClient> traite automatiquement les références, à votre place, dans des documents WSDL (Web Services Description Language), des schémas XML et des documents MEX.</span><span class="sxs-lookup"><span data-stu-id="ec8a1-130">The <xref:System.ServiceModel.Description.MetadataExchangeClient> type automatically processes references for you in Web Services Description Language (WSDL) documents, XML Schema, and MEX documents.</span></span> <span data-ttu-id="ec8a1-131">La taille de l'objet <xref:System.ServiceModel.Description.MetadataSet> créé à partir des métadonnées récupérées est directement proportionnelle à la valeur <xref:System.ServiceModel.Description.MetadataExchangeClient.MaximumResolvedReferences%2A> de l'instance <xref:System.ServiceModel.Description.MetadataExchangeClient> utilisée et à la valeur `MaxReceivedMessageSize` de la liaison utilisée par cette instance <xref:System.ServiceModel.Description.MetadataExchangeClient>.</span><span class="sxs-lookup"><span data-stu-id="ec8a1-131">The size of the <xref:System.ServiceModel.Description.MetadataSet> object created from the retrieved metadata is directly proportional to the <xref:System.ServiceModel.Description.MetadataExchangeClient.MaximumResolvedReferences%2A> value for the <xref:System.ServiceModel.Description.MetadataExchangeClient> instance that is used and the `MaxReceivedMessageSize` value for the binding being used by that <xref:System.ServiceModel.Description.MetadataExchangeClient> instance.</span></span> <span data-ttu-id="ec8a1-132">Affectez à ces quotas les valeurs appropriées définies par votre scénario.</span><span class="sxs-lookup"><span data-stu-id="ec8a1-132">Set these quotas to appropriate values as dictated by your scenario.</span></span>  
  
 <span data-ttu-id="ec8a1-133">Dans [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], les métadonnées de service sont traitées comme des données XML.</span><span class="sxs-lookup"><span data-stu-id="ec8a1-133">In [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)], service metadata is processed as XML.</span></span> <span data-ttu-id="ec8a1-134">Lors du traitement de documents XML, les applications doivent se protéger contre des structures XML malveillantes.</span><span class="sxs-lookup"><span data-stu-id="ec8a1-134">When processing XML documents, applications should protect themselves against malicious XML structures.</span></span> <span data-ttu-id="ec8a1-135">Utilisez le `XmlDictionaryReader` avec les quotas appropriés lors du traitement XML et également définir le <xref:System.Xml.XmlTextReader.DtdProcessing%2A> propriété `Prohibit`.</span><span class="sxs-lookup"><span data-stu-id="ec8a1-135">Use the `XmlDictionaryReader` with appropriate quotas when processing XML and also set the <xref:System.Xml.XmlTextReader.DtdProcessing%2A> property to `Prohibit`.</span></span>  
  
 <span data-ttu-id="ec8a1-136">Le système de métadonnées dans [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] est extensible et extensions de métadonnées peuvent être enregistrées dans votre fichier de configuration d’application (consultez [extension du système de métadonnées](../../../../docs/framework/wcf/extending/extending-the-metadata-system.md)).</span><span class="sxs-lookup"><span data-stu-id="ec8a1-136">The metadata system in [!INCLUDE[indigo2](../../../../includes/indigo2-md.md)] is extensible and metadata extensions can be registered in your application configuration file (see [Extending the Metadata System](../../../../docs/framework/wcf/extending/extending-the-metadata-system.md)).</span></span> <span data-ttu-id="ec8a1-137">Les extensions de métadonnées peuvent exécuter du code arbitraire, vous devez donc protéger le fichier de configuration de l’application avec des listes de contrôle d’accès (ACL) appropriées et inscrire uniquement les implémentations d’extensions de métadonnées approuvées.</span><span class="sxs-lookup"><span data-stu-id="ec8a1-137">Metadata extensions can run arbitrary code, so you should protect your application configuration file with appropriate access control lists (ACLs) and register only trusted metadata extension implementations.</span></span>  
  
## <a name="validating-generated-clients"></a><span data-ttu-id="ec8a1-138">Validation des clients générés</span><span class="sxs-lookup"><span data-stu-id="ec8a1-138">Validating Generated Clients</span></span>  
 <span data-ttu-id="ec8a1-139">Lorsque vous générez du code client à partir de métadonnées récupérées d'une source non approuvée, validez le code client généré pour vous assurer que le client généré est conforme aux stratégies de sécurité des applications clientes.</span><span class="sxs-lookup"><span data-stu-id="ec8a1-139">When generating client code from metadata retrieved from a source that is not trusted, validate the generated client code to ensure that the generated client conforms to your client applications security policies.</span></span> <span data-ttu-id="ec8a1-140">Vous pouvez utiliser un comportement de validation pour vérifier les paramètres sur votre liaison cliente ou inspecter visuellement le code généré par les outils.</span><span class="sxs-lookup"><span data-stu-id="ec8a1-140">You can use a validating behavior to check settings on your client binding or visually inspect code generated by tools.</span></span> <span data-ttu-id="ec8a1-141">Pour obtenir un exemple montrant comment implémenter un client qui valide les comportements, consultez [validation côté Client](../../../../docs/framework/wcf/samples/client-validation.md).</span><span class="sxs-lookup"><span data-stu-id="ec8a1-141">For an example of how to implement a client that validates behaviors, see [Client Validation](../../../../docs/framework/wcf/samples/client-validation.md).</span></span>  
  
## <a name="protecting-application-configuration-files"></a><span data-ttu-id="ec8a1-142">Protection des fichiers de configuration d'application</span><span class="sxs-lookup"><span data-stu-id="ec8a1-142">Protecting Application Configuration Files</span></span>  
 <span data-ttu-id="ec8a1-143">Le fichier de configuration d'application d'un service peut spécifier si des métadonnées doivent être publiées et de quelle façon.</span><span class="sxs-lookup"><span data-stu-id="ec8a1-143">A service's application configuration file may control how and if metadata is published.</span></span> <span data-ttu-id="ec8a1-144">Il est judicieux de protéger le fichier de configuration d'application à l'aide des listes de contrôle d'accès (ACL) appropriées pour vous assurer qu'aucun intrus ne pourra modifier ces paramètres.</span><span class="sxs-lookup"><span data-stu-id="ec8a1-144">It is a good idea to protect the application configuration file with appropriate access control lists (ACLs) to ensure an attacker cannot modify such settings.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="ec8a1-145">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="ec8a1-145">See Also</span></span>  
 [<span data-ttu-id="ec8a1-146">Guide pratique pour sécuriser des points de terminaison de métadonnées</span><span class="sxs-lookup"><span data-stu-id="ec8a1-146">How to: Secure Metadata Endpoints</span></span>](../../../../docs/framework/wcf/feature-details/how-to-secure-metadata-endpoints.md)  
 [<span data-ttu-id="ec8a1-147">Sécurité</span><span class="sxs-lookup"><span data-stu-id="ec8a1-147">Security</span></span>](../../../../docs/framework/wcf/feature-details/security.md)
