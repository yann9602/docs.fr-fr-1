---
title: "Génération de profils d'exécution"
ms.custom: 
ms.date: 03/30/2017
ms.prod: .net-framework
ms.reviewer: 
ms.suite: 
ms.technology: dotnet-clr
ms.tgt_pltfrm: 
ms.topic: article
helpviewer_keywords:
- performance counters
- common language runtime, profiling
- Perfmon.exe
- System Monitor
- profiling
- runtime, profiling
- profiling applications
- Performance Console
ms.assetid: ccd68284-f3a8-47b8-bc3f-92e5fe3a1640
caps.latest.revision: "22"
author: rpetrusha
ms.author: ronpet
manager: wpickett
ms.openlocfilehash: 876635cfe0349c734a61dcc827a6f9594bb2a5d7
ms.sourcegitcommit: bd1ef61f4bb794b25383d3d72e71041a5ced172e
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 10/18/2017
---
# <a name="runtime-profiling"></a><span data-ttu-id="8833f-102">Génération de profils d'exécution</span><span class="sxs-lookup"><span data-stu-id="8833f-102">Runtime Profiling</span></span>
<span data-ttu-id="8833f-103">Le profilage est une méthode de collecte de données de performance dans le cadre d’un scénario de développement ou de déploiement.</span><span class="sxs-lookup"><span data-stu-id="8833f-103">Profiling is a method of gathering performance data in any development or deployment scenario.</span></span> <span data-ttu-id="8833f-104">Cette section s’adresse aux développeurs et administrateurs système qui souhaitent recueillir des informations sur les performances d’une application.</span><span class="sxs-lookup"><span data-stu-id="8833f-104">This section is for developers and system administrators who want to gather information about application performance.</span></span>  
  
## <a name="tracking-performance-using-the-performance-monitor-perfmonexe"></a><span data-ttu-id="8833f-105">Suivi des performances à l’aide de l’analyseur de performances (Perfmon.exe)</span><span class="sxs-lookup"><span data-stu-id="8833f-105">Tracking Performance Using the Performance Monitor (Perfmon.exe)</span></span>  
 <span data-ttu-id="8833f-106">L’analyseur de performances est l’outil le plus simple à utiliser pour profiler votre application [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] .</span><span class="sxs-lookup"><span data-stu-id="8833f-106">The Performance Monitor is the easiest tool to use to profile your [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] application.</span></span> <span data-ttu-id="8833f-107">L’analyseur de performances représente graphiquement les données trouvées dans les compteurs de performances .NET Framework qui sont installés avec le Common Language Runtime et le [!INCLUDE[winsdklong](../../../includes/winsdklong-md.md)].</span><span class="sxs-lookup"><span data-stu-id="8833f-107">The Performance Monitor graphically represents data found in the .NET Framework performance counters that are installed with the common language runtime and the [!INCLUDE[winsdklong](../../../includes/winsdklong-md.md)].</span></span> <span data-ttu-id="8833f-108">Ces compteurs permettent de tout surveiller, de la gestion de la mémoire jusqu’aux performances du compilateur juste-à-temps (JIT).</span><span class="sxs-lookup"><span data-stu-id="8833f-108">These counters can be used to monitor everything from memory management to just-in-time (JIT) compiler performance.</span></span> <span data-ttu-id="8833f-109">Ils vous renseignent sur les ressources que votre application utilise, ce qui est une mesure indirecte des performances de votre application.</span><span class="sxs-lookup"><span data-stu-id="8833f-109">They tell you about the resources your application uses, which is an indirect measure of your application's performance.</span></span> <span data-ttu-id="8833f-110">Ces compteurs s’avèrent utiles pour comprendre le fonctionnement interne de votre application.</span><span class="sxs-lookup"><span data-stu-id="8833f-110">Use these counters to understand how your application works internally.</span></span>  
  
#### <a name="to-run-perfmonexe-on-windows-vista-and-later-versions"></a><span data-ttu-id="8833f-111">Pour exécuter Perfmon.exe sur Windows Vista et les versions ultérieures</span><span class="sxs-lookup"><span data-stu-id="8833f-111">To run Perfmon.exe on Windows Vista and later versions</span></span>  
  
1.  <span data-ttu-id="8833f-112">À l'invite de commandes, entrez **perfmon**.</span><span class="sxs-lookup"><span data-stu-id="8833f-112">At the command prompt, type **perfmon**.</span></span> <span data-ttu-id="8833f-113">La console **Analyseur de performances** apparaît.</span><span class="sxs-lookup"><span data-stu-id="8833f-113">The **Performance Monitor** console appears.</span></span>  
  
2.  <span data-ttu-id="8833f-114">Dans le dossier **Outils d’analyse** , cliquez sur **Analyseur de performances**.</span><span class="sxs-lookup"><span data-stu-id="8833f-114">In the **Monitoring Tools** folder, click **Performance Monitor**.</span></span>  
  
3.  <span data-ttu-id="8833f-115">Dans la barre d’outils de l’analyseur de performances, cliquez sur l’icône **Ajouter** (signe plus), si elle est présente.</span><span class="sxs-lookup"><span data-stu-id="8833f-115">In the Performance Monitor toolbar, click the **Add** icon (the plus sign), if it is present.</span></span> <span data-ttu-id="8833f-116">À défaut, cliquez avec le bouton droit dans la fenêtre de l’analyseur et sélectionnez l’option **Ajouter des compteurs** .</span><span class="sxs-lookup"><span data-stu-id="8833f-116">If it is not present, right-click in the monitor window and select the **Add Counters** option.</span></span>  
  
     <span data-ttu-id="8833f-117">La boîte de dialogue **Ajouter des compteurs** s’ouvre.</span><span class="sxs-lookup"><span data-stu-id="8833f-117">This opens the **Add Counters** dialog box.</span></span> <span data-ttu-id="8833f-118">La zone de liste **Compteurs disponibles** présente les objets de performance disponibles.</span><span class="sxs-lookup"><span data-stu-id="8833f-118">The **Available counters** list box displays the available performance objects.</span></span> <span data-ttu-id="8833f-119">Il existe plusieurs objets prédéfinis pour les applications .NET Framework, notamment ceux qui touchent à la gestion de la mémoire (**.NET CLR Memory**), à l’interopérabilité (**.NET CLR Interop**), à la gestion des exceptions (**.NET CLR Exceptions**) et au multithreading (**.NET CLR LocksAndThreads**).</span><span class="sxs-lookup"><span data-stu-id="8833f-119">There are a number of predefined objects for .NET Framework applications, including those for memory management (**.NET CLR Memory**), interoperability (**.NET CLR Interop**), exception handling (**.NET CLR Exceptions**), and multithreading (**.NET CLR LocksAndThreads**).</span></span> <span data-ttu-id="8833f-120">Chaque objet de performance comprend un certain nombre de compteurs de performances individuels.</span><span class="sxs-lookup"><span data-stu-id="8833f-120">Each performance object includes a number of individual performance counters.</span></span> <span data-ttu-id="8833f-121">Pour obtenir la liste des compteurs de performances disponibles dans l’analyseur de performances, consultez [Performance Counters](../../../docs/framework/debug-trace-profile/performance-counters.md).</span><span class="sxs-lookup"><span data-stu-id="8833f-121">For a list of the performance counters available in Performance Monitor, see [Performance Counters](../../../docs/framework/debug-trace-profile/performance-counters.md).</span></span>  
  
4.  <span data-ttu-id="8833f-122">Cochez la case en regard du nom d’un objet de performance pour afficher la liste des compteurs de performances individuels qu’il prend en charge.</span><span class="sxs-lookup"><span data-stu-id="8833f-122">Select the check box next to a performance object's name to view the list of individual performance counters that it supports.</span></span>  
  
5.  <span data-ttu-id="8833f-123">Cliquez sur le compteur de performances que vous voulez afficher.</span><span class="sxs-lookup"><span data-stu-id="8833f-123">Click the performance counter you want to view.</span></span>  
  
6.  <span data-ttu-id="8833f-124">Dans la zone de liste **Instances de l’objet sélectionné**, cliquez sur **\<Toutes les instances>** pour spécifier que vous voulez analyser le compteur de performances pour le Common Language Runtime dans sa globalité (c’est-à-dire à l’échelle du système).</span><span class="sxs-lookup"><span data-stu-id="8833f-124">In the **Instances of selected object** list box, click **\<All instances>** to specify that you want to monitor the performance counter for the common language runtime globally (that is, on a system-wide basis).</span></span>  
  
     <span data-ttu-id="8833f-125">ou</span><span class="sxs-lookup"><span data-stu-id="8833f-125">-or-</span></span>  
  
     <span data-ttu-id="8833f-126">Dans la zone de liste **Instances de l’objet sélectionné** , cliquez sur le nom d’une application pour analyser le compteur de performances de cette application.</span><span class="sxs-lookup"><span data-stu-id="8833f-126">In the **Instances of selected object** list box, click an application name to monitor the performance counter for that application.</span></span>  
  
     <span data-ttu-id="8833f-127">Pour différencier plusieurs versions du runtime ou pour lever toute ambiguïté quant aux applications qui ont le même nom, vous devez aussi modifier une clé de Registre.</span><span class="sxs-lookup"><span data-stu-id="8833f-127">To differentiate multiple versions of the runtime, or to disambiguate multiple applications with the same name, you must also modify a registry key.</span></span> <span data-ttu-id="8833f-128">Pour plus d'informations, consultez [Performance Counters and In-Process Side-By-Side Applications](../../../docs/framework/debug-trace-profile/performance-counters-and-in-process-side-by-side-applications.md).</span><span class="sxs-lookup"><span data-stu-id="8833f-128">For more information, see [Performance Counters and In-Process Side-By-Side Applications](../../../docs/framework/debug-trace-profile/performance-counters-and-in-process-side-by-side-applications.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="8833f-129">Si des compteurs de performances nouveaux sont installés pendant l’exécution de la console de performances, arrêtez et redémarrez la console de performances pour les rendre visibles.</span><span class="sxs-lookup"><span data-stu-id="8833f-129">When new performance counters are installed while the Performance console is running, stop and restart the Performance console to make the new counters visible.</span></span>  
  
 <span data-ttu-id="8833f-130">Si vous voulez profiler un assembly qui existe dans une zone ou sur un partage distant, assurez-vous que l’assembly distant bénéficie d’une confiance totale sur l’ordinateur qui exécute les compteurs de performances.</span><span class="sxs-lookup"><span data-stu-id="8833f-130">If you want to profile an assembly that exists in a zone or on a remote share, make sure that the remote assembly has full trust on the computer that runs the performance counters.</span></span> <span data-ttu-id="8833f-131">Si l’assembly n’a pas un niveau de confiance suffisant, les compteurs de performances ne fonctionnent pas.</span><span class="sxs-lookup"><span data-stu-id="8833f-131">If the assembly does not have sufficient trust, the performance counters will not work.</span></span> <span data-ttu-id="8833f-132">Pour plus d’informations sur l’octroi de confiance à différentes zones, consultez [Caspol.exe (outil Stratégie de sécurité d’accès du code)](../../../docs/framework/tools/caspol-exe-code-access-security-policy-tool.md).</span><span class="sxs-lookup"><span data-stu-id="8833f-132">For information about granting trust to different zones, see [Caspol.exe (Code Access Security Policy Tool)](../../../docs/framework/tools/caspol-exe-code-access-security-policy-tool.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="8833f-133">Sur les systèmes où le [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)] est installé, il se peut que l’analyseur de performances n’affiche pas de données pour les compteurs de performances de certaines catégories, telles que **.NET CLR Data** et **.NET CLR Networking**, pour les applications développées à l’aide du [!INCLUDE[net_v11_short](../../../includes/net-v11-short-md.md)].</span><span class="sxs-lookup"><span data-stu-id="8833f-133">On systems on which the [!INCLUDE[net_v40_short](../../../includes/net-v40-short-md.md)] is installed, the Performance Monitor may not display data for performance counters in some categories, such as **.NET CLR Data** and **.NET CLR Networking**, for applications that were developed using the [!INCLUDE[net_v11_short](../../../includes/net-v11-short-md.md)].</span></span> <span data-ttu-id="8833f-134">Si c’est le cas, vous pouvez configurer l’Analyseur de performances pour qu’il affiche ces données en ajoutant l’élément [\<forcePerformanceCounterUniqueSharedMemoryReads>](../../../docs/framework/configure-apps/file-schema/runtime/forceperformancecounteruniquesharedmemoryreads-element.md) au fichier de configuration de l’application.</span><span class="sxs-lookup"><span data-stu-id="8833f-134">If this is the case, you can configure Performance Monitor to display this data by adding the [\<forcePerformanceCounterUniqueSharedMemoryReads>](../../../docs/framework/configure-apps/file-schema/runtime/forceperformancecounteruniquesharedmemoryreads-element.md) element to the application's configuration file.</span></span>  
  
## <a name="reading-and-creating-performance-counters-programmatically"></a><span data-ttu-id="8833f-135">Lecture et création de compteurs de performances par programmation</span><span class="sxs-lookup"><span data-stu-id="8833f-135">Reading and Creating Performance Counters Programmatically</span></span>  
 <span data-ttu-id="8833f-136">Le [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] propose des classes qui vous permettent d’accéder par programmation aux mêmes informations de performances que celles qui sont disponibles dans la console de performances.</span><span class="sxs-lookup"><span data-stu-id="8833f-136">The [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)] provides classes you can use to programmatically access the same performance information that is available in the Performance console.</span></span> <span data-ttu-id="8833f-137">Vous pouvez aussi utiliser ces classes pour créer des compteurs de performances personnalisés.</span><span class="sxs-lookup"><span data-stu-id="8833f-137">You can also use these classes to create custom performance counters.</span></span> <span data-ttu-id="8833f-138">Le tableau suivant décrit quelques-unes des classes d’analyse de performances proposées dans le [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)].</span><span class="sxs-lookup"><span data-stu-id="8833f-138">The following table describes some of the performance monitoring classes that are provided in the [!INCLUDE[dnprdnshort](../../../includes/dnprdnshort-md.md)].</span></span>  
  
|<span data-ttu-id="8833f-139">Classe</span><span class="sxs-lookup"><span data-stu-id="8833f-139">Class</span></span>|<span data-ttu-id="8833f-140">Description</span><span class="sxs-lookup"><span data-stu-id="8833f-140">Description</span></span>|  
|-----------|-----------------|  
|<xref:System.Diagnostics.PerformanceCounter?displayProperty=nameWithType>|<span data-ttu-id="8833f-141">Représente un composant de compteur de performances Windows NT.</span><span class="sxs-lookup"><span data-stu-id="8833f-141">Represents a Windows NT performance counter component.</span></span> <span data-ttu-id="8833f-142">Cette classe permet de lire les compteurs prédéfinis ou personnalisés existants et de publier (écrire) des données de performance dans des compteurs personnalisés.</span><span class="sxs-lookup"><span data-stu-id="8833f-142">Use this class to read existing predefined or custom counters and publish (write) performance data to custom counters.</span></span>|  
|<xref:System.Diagnostics.PerformanceCounterCategory?displayProperty=nameWithType>|<span data-ttu-id="8833f-143">Propose plusieurs méthodes permettant d’interagir avec les compteurs et les catégories de compteurs de l’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="8833f-143">Provides several methods for interacting with counters and categories of counters on the computer.</span></span>|  
|<xref:System.Diagnostics.PerformanceCounterInstaller?displayProperty=nameWithType>|<span data-ttu-id="8833f-144">Spécifie un programme d’installation pour le composant `PerformanceCounter` .</span><span class="sxs-lookup"><span data-stu-id="8833f-144">Specifies an installer for the `PerformanceCounter` component.</span></span>|  
|<xref:System.Diagnostics.PerformanceCounterType?displayProperty=nameWithType>|<span data-ttu-id="8833f-145">Spécifie la formule de calcul de la méthode `NextValue` pour un `PerformanceCounter`.</span><span class="sxs-lookup"><span data-stu-id="8833f-145">Specifies the formula to calculate the `NextValue` method for a `PerformanceCounter`.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="8833f-146">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="8833f-146">See Also</span></span>  
 [<span data-ttu-id="8833f-147">Performance Counters</span><span class="sxs-lookup"><span data-stu-id="8833f-147">Performance Counters</span></span>](../../../docs/framework/debug-trace-profile/performance-counters.md)
